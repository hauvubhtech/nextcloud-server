{"version":3,"file":"files_sharing-files_sharing_tab.js?v=d263e1b231351b6e4e8d","mappings":"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","sources":["webpack:///nextcloud/webpack\\runtime\\chunk loaded","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingTab.vue?vue&type=template&id=0f81577f&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\services\\ConfigService.js","webpack:///nextcloud/apps\\files_sharing\\src\\models\\Share.js","webpack:///nextcloud/apps\\files_sharing\\src\\mixins\\ShareTypes.js","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInternal.vue?vue&type=template&id=f55cfc52&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntrySimple.vue?vue&type=template&id=354542cc&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntrySimple.vue?vue&type=script&lang=js&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntrySimple.vue","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntrySimple.vue?638b","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntrySimple.vue?cb12","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInternal.vue","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInternal.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInternal.vue?6b32","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInternal.vue?4c20","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingInput.vue?vue&type=template&id=39161a5c&","webpack:///nextcloud/apps\\files_sharing\\src\\utils\\GeneratePassword.js","webpack:///nextcloud/apps\\files_sharing\\src\\mixins\\ShareRequests.js","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingInput.vue","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingInput.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/components/SharingInput.vue?1f8b","webpack://nextcloud/./apps/files_sharing/src/components/SharingInput.vue?3d7c","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingInherited.vue?vue&type=template&id=3f1bda78&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInherited.vue?vue&type=template&id=06bd31b0&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\mixins\\SharesMixin.js","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInherited.vue?vue&type=script&lang=js&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInherited.vue","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInherited.vue?88eb","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInherited.vue?0e5a","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingInherited.vue","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingInherited.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/views/SharingInherited.vue?0e4f","webpack://nextcloud/./apps/files_sharing/src/views/SharingInherited.vue?1677","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingLinkList.vue?vue&type=template&id=dd248c84&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryLink.vue?vue&type=template&id=7a675594&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\ExternalShareAction.vue?vue&type=template&id=27835356&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\ExternalShareAction.vue","webpack:///nextcloud/apps\\files_sharing\\src\\components\\ExternalShareAction.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/components/ExternalShareAction.vue?9bf3","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharePermissionsEditor.vue?vue&type=template&id=7f000276&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\lib\\SharePermissionsToolBox.js","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharePermissionsEditor.vue?vue&type=script&lang=js&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharePermissionsEditor.vue","webpack://nextcloud/./apps/files_sharing/src/components/SharePermissionsEditor.vue?19c2","webpack://nextcloud/./apps/files_sharing/src/components/SharePermissionsEditor.vue?f133","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryLink.vue","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryLink.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryLink.vue?76b5","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryLink.vue?af90","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingLinkList.vue","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingLinkList.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/views/SharingLinkList.vue?a70b","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingList.vue?vue&type=template&id=698e26a4&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntry.vue?vue&type=template&id=61240f7a&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntry.vue","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntry.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntry.vue?440d","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntry.vue?10a7","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingList.vue","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingList.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/views/SharingList.vue?9f9c","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingTab.vue","webpack:///nextcloud/apps\\files_sharing\\src\\utils\\SharedWithMe.js","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingTab.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/files_sharing/src/views/SharingTab.vue?db58","webpack://nextcloud/./apps/files_sharing/src/views/SharingTab.vue?6997","webpack:///nextcloud/apps\\files_sharing\\src\\services\\ShareSearch.js","webpack:///nextcloud/apps\\files_sharing\\src\\services\\ExternalLinkActions.js","webpack:///nextcloud/apps\\files_sharing\\src\\services\\ExternalShareActions.js","webpack:///nextcloud/apps\\files_sharing\\src\\services\\TabSections.js","webpack:///nextcloud/apps\\files_sharing\\src\\files_sharing_tab.js","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharePermissionsEditor.vue?vue&type=style&index=0&id=7f000276&lang=scss&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntry.vue?vue&type=style&index=0&id=61240f7a&lang=scss&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInherited.vue?vue&type=style&index=0&id=06bd31b0&lang=scss&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryInternal.vue?vue&type=style&index=0&id=f55cfc52&lang=scss&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntryLink.vue?vue&type=style&index=0&id=7a675594&lang=scss&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingEntrySimple.vue?vue&type=style&index=0&id=354542cc&lang=scss&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\components\\SharingInput.vue?vue&type=style&index=0&lang=scss&","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingInherited.vue?vue&type=style&index=0&id=3f1bda78&lang=scss&scoped=true&","webpack:///nextcloud/apps\\files_sharing\\src\\views\\SharingTab.vue?vue&type=style&index=0&id=0f81577f&scoped=true&lang=scss&","webpack:///nextcloud/webpack\\bootstrap","webpack:///nextcloud/webpack\\runtime\\amd define","webpack:///nextcloud/webpack\\runtime\\amd options","webpack:///nextcloud/webpack\\runtime\\compat get default export","webpack:///nextcloud/webpack\\runtime\\define property getters","webpack:///nextcloud/webpack\\runtime\\global","webpack:///nextcloud/webpack\\runtime\\hasOwnProperty shorthand","webpack:///nextcloud/webpack\\runtime\\make namespace object","webpack:///nextcloud/webpack\\runtime\\node module decorator","webpack:///nextcloud/webpack\\runtime\\runtimeId","webpack:///nextcloud/webpack\\runtime\\jsonp chunk loading","webpack:///nextcloud/webpack\\runtime\\nonce","webpack:///nextcloud/webpack\\startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { class: { \"icon-loading\": _vm.loading } },\n    [\n      _vm.error\n        ? _c(\n            \"div\",\n            {\n              staticClass: \"emptycontent\",\n              class: { emptyContentWithSections: _vm.sections.length > 0 },\n            },\n            [\n              _c(\"div\", { staticClass: \"icon icon-error\" }),\n              _vm._v(\" \"),\n              _c(\"h2\", [_vm._v(_vm._s(_vm.error))]),\n            ]\n          )\n        : _c(\n            \"div\",\n            { staticClass: \"sharingTab__content\" },\n            [\n              _vm.isSharedWithMe\n                ? _c(\n                    \"SharingEntrySimple\",\n                    _vm._b(\n                      {\n                        staticClass: \"sharing-entry__reshare\",\n                        scopedSlots: _vm._u(\n                          [\n                            {\n                              key: \"avatar\",\n                              fn: function () {\n                                return [\n                                  _c(\"NcAvatar\", {\n                                    staticClass: \"sharing-entry__avatar\",\n                                    attrs: {\n                                      user: _vm.sharedWithMe.user,\n                                      \"display-name\":\n                                        _vm.sharedWithMe.displayName,\n                                      \"tooltip-message\": \"\",\n                                    },\n                                  }),\n                                ]\n                              },\n                              proxy: true,\n                            },\n                          ],\n                          null,\n                          false,\n                          1656378807\n                        ),\n                      },\n                      \"SharingEntrySimple\",\n                      _vm.sharedWithMe,\n                      false\n                    )\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              !_vm.loading\n                ? _c(\"SharingInput\", {\n                    attrs: {\n                      \"can-reshare\": _vm.canReshare,\n                      \"file-info\": _vm.fileInfo,\n                      \"link-shares\": _vm.linkShares,\n                      reshare: _vm.reshare,\n                      shares: _vm.shares,\n                    },\n                    on: { \"add:share\": _vm.addShare },\n                  })\n                : _vm._e(),\n              _vm._v(\" \"),\n              !_vm.loading\n                ? _c(\"SharingLinkList\", {\n                    ref: \"linkShareList\",\n                    attrs: {\n                      \"can-reshare\": _vm.canReshare,\n                      \"file-info\": _vm.fileInfo,\n                      shares: _vm.linkShares,\n                    },\n                  })\n                : _vm._e(),\n              _vm._v(\" \"),\n              !_vm.loading\n                ? _c(\"SharingList\", {\n                    ref: \"shareList\",\n                    attrs: { shares: _vm.shares, \"file-info\": _vm.fileInfo },\n                  })\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.canReshare && !_vm.loading\n                ? _c(\"SharingInherited\", {\n                    attrs: { \"file-info\": _vm.fileInfo },\n                  })\n                : _vm._e(),\n              _vm._v(\" \"),\n              _c(\"SharingEntryInternal\", {\n                attrs: { \"file-info\": _vm.fileInfo },\n              }),\n              _vm._v(\" \"),\n              _vm.projectsEnabled && _vm.fileInfo\n                ? _c(\"CollectionList\", {\n                    attrs: {\n                      id: \"\" + _vm.fileInfo.id,\n                      type: \"file\",\n                      name: _vm.fileInfo.name,\n                    },\n                  })\n                : _vm._e(),\n            ],\n            1\n          ),\n      _vm._v(\" \"),\n      _vm._l(_vm.sections, function (section, index) {\n        return _c(\n          \"div\",\n          {\n            key: index,\n            ref: \"section-\" + index,\n            refInFor: true,\n            staticClass: \"sharingTab__additionalContent\",\n          },\n          [\n            _c(section(_vm.$refs[\"section-\" + index], _vm.fileInfo), {\n              tag: \"component\",\n              attrs: { \"file-info\": _vm.fileInfo },\n            }),\n          ],\n          1\n        )\n      }),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author Arthur Schiwon <blizzz@arthur-schiwon.de>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default class Config {\r\n\r\n\t/**\r\n\t * Is public upload allowed on link shares ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isPublicUploadEnabled() {\r\n\t\treturn document.getElementsByClassName('files-filestable')[0]\r\n\t\t\t&& document.getElementsByClassName('files-filestable')[0].dataset.allowPublicUpload === 'yes'\r\n\t}\r\n\r\n\t/**\r\n\t * Are link share allowed ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isShareWithLinkAllowed() {\r\n\t\treturn document.getElementById('allowShareWithLink')\r\n\t\t\t&& document.getElementById('allowShareWithLink').value === 'yes'\r\n\t}\r\n\r\n\t/**\r\n\t * Get the federated sharing documentation link\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget federatedShareDocLink() {\r\n\t\treturn OC.appConfig.core.federatedCloudShareDoc\r\n\t}\r\n\r\n\t/**\r\n\t * Get the default link share expiration date\r\n\t *\r\n\t * @return {Date|null}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget defaultExpirationDate() {\r\n\t\tif (this.isDefaultExpireDateEnabled) {\r\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + this.defaultExpireDate))\r\n\t\t}\r\n\t\treturn null\r\n\t}\r\n\r\n\t/**\r\n\t * Get the default internal expiration date\r\n\t *\r\n\t * @return {Date|null}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget defaultInternalExpirationDate() {\r\n\t\tif (this.isDefaultInternalExpireDateEnabled) {\r\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + this.defaultInternalExpireDate))\r\n\t\t}\r\n\t\treturn null\r\n\t}\r\n\r\n\t/**\r\n\t * Get the default remote expiration date\r\n\t *\r\n\t * @return {Date|null}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget defaultRemoteExpirationDateString() {\r\n\t\tif (this.isDefaultRemoteExpireDateEnabled) {\r\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + this.defaultRemoteExpireDate))\r\n\t\t}\r\n\t\treturn null\r\n\t}\r\n\r\n\t/**\r\n\t * Are link shares password-enforced ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget enforcePasswordForPublicLink() {\r\n\t\treturn OC.appConfig.core.enforcePasswordForPublicLink === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is password asked by default on link shares ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget enableLinkPasswordByDefault() {\r\n\t\treturn OC.appConfig.core.enableLinkPasswordByDefault === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is link shares expiration enforced ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isDefaultExpireDateEnforced() {\r\n\t\treturn OC.appConfig.core.defaultExpireDateEnforced === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is there a default expiration date for new link shares ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isDefaultExpireDateEnabled() {\r\n\t\treturn OC.appConfig.core.defaultExpireDateEnabled === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is internal shares expiration enforced ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isDefaultInternalExpireDateEnforced() {\r\n\t\treturn OC.appConfig.core.defaultInternalExpireDateEnforced === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is remote shares expiration enforced ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isDefaultRemoteExpireDateEnforced() {\r\n\t\treturn OC.appConfig.core.defaultRemoteExpireDateEnforced === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is there a default expiration date for new internal shares ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isDefaultInternalExpireDateEnabled() {\r\n\t\treturn OC.appConfig.core.defaultInternalExpireDateEnabled === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is there a default expiration date for new remote shares ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isDefaultRemoteExpireDateEnabled() {\r\n\t\treturn OC.appConfig.core.defaultRemoteExpireDateEnabled === true\r\n\t}\r\n\r\n\t/**\r\n\t * Are users on this server allowed to send shares to other servers ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isRemoteShareAllowed() {\r\n\t\treturn OC.appConfig.core.remoteShareAllowed === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is sharing my mail (link share) enabled ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isMailShareAllowed() {\r\n\t\tconst capabilities = OC.getCapabilities()\r\n\t\t// eslint-disable-next-line camelcase\r\n\t\treturn capabilities?.files_sharing?.sharebymail !== undefined\r\n\t\t\t// eslint-disable-next-line camelcase\r\n\t\t\t&& capabilities?.files_sharing?.public?.enabled === true\r\n\t}\r\n\r\n\t/**\r\n\t * Get the default days to link shares expiration\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget defaultExpireDate() {\r\n\t\treturn OC.appConfig.core.defaultExpireDate\r\n\t}\r\n\r\n\t/**\r\n\t * Get the default days to internal shares expiration\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget defaultInternalExpireDate() {\r\n\t\treturn OC.appConfig.core.defaultInternalExpireDate\r\n\t}\r\n\r\n\t/**\r\n\t * Get the default days to remote shares expiration\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget defaultRemoteExpireDate() {\r\n\t\treturn OC.appConfig.core.defaultRemoteExpireDate\r\n\t}\r\n\r\n\t/**\r\n\t * Is resharing allowed ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isResharingAllowed() {\r\n\t\treturn OC.appConfig.core.resharingAllowed === true\r\n\t}\r\n\r\n\t/**\r\n\t * Is password enforced for mail shares ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget isPasswordForMailSharesRequired() {\r\n\t\treturn (OC.getCapabilities().files_sharing.sharebymail === undefined) ? false : OC.getCapabilities().files_sharing.sharebymail.password.enforced\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget shouldAlwaysShowUnique() {\r\n\t\treturn (OC.getCapabilities().files_sharing?.sharee?.always_show_unique === true)\r\n\t}\r\n\r\n\t/**\r\n\t * Is sharing with groups allowed ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget allowGroupSharing() {\r\n\t\treturn OC.appConfig.core.allowGroupSharing === true\r\n\t}\r\n\r\n\t/**\r\n\t * Get the maximum results of a share search\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget maxAutocompleteResults() {\r\n\t\treturn parseInt(OC.config['sharing.maxAutocompleteResults'], 10) || 25\r\n\t}\r\n\r\n\t/**\r\n\t * Get the minimal string length\r\n\t * to initiate a share search\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget minSearchStringLength() {\r\n\t\treturn parseInt(OC.config['sharing.minSearchStringLength'], 10) || 0\r\n\t}\r\n\r\n\t/**\r\n\t * Get the password policy config\r\n\t *\r\n\t * @return {object}\r\n\t * @readonly\r\n\t * @memberof Config\r\n\t */\r\n\tget passwordPolicy() {\r\n\t\tconst capabilities = OC.getCapabilities()\r\n\t\treturn capabilities.password_policy ? capabilities.password_policy : {}\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\r\n * @author Gary Kim <gary@garykim.dev>\r\n * @author Georg Ehrke <oc.list@georgehrke.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default class Share {\r\n\r\n\t_share\r\n\r\n\t/**\r\n\t * Create the share object\r\n\t *\r\n\t * @param {object} ocsData ocs request response\r\n\t */\r\n\tconstructor(ocsData) {\r\n\t\tif (ocsData.ocs && ocsData.ocs.data && ocsData.ocs.data[0]) {\r\n\t\t\tocsData = ocsData.ocs.data[0]\r\n\t\t}\r\n\r\n\t\t// convert int into boolean\r\n\t\tocsData.hide_download = !!ocsData.hide_download\r\n\t\tocsData.mail_send = !!ocsData.mail_send\r\n\r\n\t\tif (ocsData.attributes) {\r\n\t\t\ttry {\r\n\t\t\t\tocsData.attributes = JSON.parse(ocsData.attributes)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn('Could not parse share attributes returned by server: \"' + ocsData.attributes + '\"')\r\n\t\t\t}\r\n\t\t}\r\n\t\tocsData.attributes = ocsData.attributes ?? []\r\n\r\n\t\t// store state\r\n\t\tthis._share = ocsData\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share state\r\n\t * ! used for reactivity purpose\r\n\t * Do not remove. It allow vuejs to\r\n\t * inject its watchers into the #share\r\n\t * state and make the whole class reactive\r\n\t *\r\n\t * @return {object} the share raw state\r\n\t * @readonly\r\n\t * @memberof Sidebar\r\n\t */\r\n\tget state() {\r\n\t\treturn this._share\r\n\t}\r\n\r\n\t/**\r\n\t * get the share id\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget id() {\r\n\t\treturn this._share.id\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share type\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget type() {\r\n\t\treturn this._share.share_type\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share permissions\r\n\t * See OC.PERMISSION_* variables\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget permissions() {\r\n\t\treturn this._share.permissions\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share attributes\r\n\t *\r\n\t * @return {Array}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget attributes() {\r\n\t\treturn this._share.attributes\r\n\t}\r\n\r\n\t/**\r\n\t * Set the share permissions\r\n\t * See OC.PERMISSION_* variables\r\n\t *\r\n\t * @param {number} permissions valid permission, See OC.PERMISSION_* variables\r\n\t * @memberof Share\r\n\t */\r\n\tset permissions(permissions) {\r\n\t\tthis._share.permissions = permissions\r\n\t}\r\n\r\n\t// SHARE OWNER --------------------------------------------------\r\n\t/**\r\n\t * Get the share owner uid\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget owner() {\r\n\t\treturn this._share.uid_owner\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share owner's display name\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget ownerDisplayName() {\r\n\t\treturn this._share.displayname_owner\r\n\t}\r\n\r\n\t// SHARED WITH --------------------------------------------------\r\n\t/**\r\n\t * Get the share with entity uid\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget shareWith() {\r\n\t\treturn this._share.share_with\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share with entity display name\r\n\t * fallback to its uid if none\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget shareWithDisplayName() {\r\n\t\treturn this._share.share_with_displayname\r\n\t\t\t|| this._share.share_with\r\n\t}\r\n\r\n\t/**\r\n\t * Unique display name in case of multiple\r\n\t * duplicates results with the same name.\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget shareWithDisplayNameUnique() {\r\n\t\treturn this._share.share_with_displayname_unique\r\n\t\t\t|| this._share.share_with\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share with entity link\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget shareWithLink() {\r\n\t\treturn this._share.share_with_link\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share with avatar if any\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget shareWithAvatar() {\r\n\t\treturn this._share.share_with_avatar\r\n\t}\r\n\r\n\t// SHARED FILE OR FOLDER OWNER ----------------------------------\r\n\t/**\r\n\t * Get the shared item owner uid\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget uidFileOwner() {\r\n\t\treturn this._share.uid_file_owner\r\n\t}\r\n\r\n\t/**\r\n\t * Get the shared item display name\r\n\t * fallback to its uid if none\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget displaynameFileOwner() {\r\n\t\treturn this._share.displayname_file_owner\r\n\t\t\t|| this._share.uid_file_owner\r\n\t}\r\n\r\n\t// TIME DATA ----------------------------------------------------\r\n\t/**\r\n\t * Get the share creation timestamp\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget createdTime() {\r\n\t\treturn this._share.stime\r\n\t}\r\n\r\n\t/**\r\n\t * Get the expiration date\r\n\t *\r\n\t * @return {string} date with YYYY-MM-DD format\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget expireDate() {\r\n\t\treturn this._share.expiration\r\n\t}\r\n\r\n\t/**\r\n\t * Set the expiration date\r\n\t *\r\n\t * @param {string} date the share expiration date with YYYY-MM-DD format\r\n\t * @memberof Share\r\n\t */\r\n\tset expireDate(date) {\r\n\t\tthis._share.expiration = date\r\n\t}\r\n\r\n\t// EXTRA DATA ---------------------------------------------------\r\n\t/**\r\n\t * Get the public share token\r\n\t *\r\n\t * @return {string} the token\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget token() {\r\n\t\treturn this._share.token\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share note if any\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget note() {\r\n\t\treturn this._share.note\r\n\t}\r\n\r\n\t/**\r\n\t * Set the share note if any\r\n\t *\r\n\t * @param {string} note the note\r\n\t * @memberof Share\r\n\t */\r\n\tset note(note) {\r\n\t\tthis._share.note = note\r\n\t}\r\n\r\n\t/**\r\n\t * Get the share label if any\r\n\t * Should only exist on link shares\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget label() {\r\n\t\treturn this._share.label\r\n\t}\r\n\r\n\t/**\r\n\t * Set the share label if any\r\n\t * Should only be set on link shares\r\n\t *\r\n\t * @param {string} label the label\r\n\t * @memberof Share\r\n\t */\r\n\tset label(label) {\r\n\t\tthis._share.label = label\r\n\t}\r\n\r\n\t/**\r\n\t * Have a mail been sent\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget mailSend() {\r\n\t\treturn this._share.mail_send === true\r\n\t}\r\n\r\n\t/**\r\n\t * Hide the download button on public page\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget hideDownload() {\r\n\t\treturn this._share.hide_download === true\r\n\t}\r\n\r\n\t/**\r\n\t * Hide the download button on public page\r\n\t *\r\n\t * @param {boolean} state hide the button ?\r\n\t * @memberof Share\r\n\t */\r\n\tset hideDownload(state) {\r\n\t\tthis._share.hide_download = state === true\r\n\t}\r\n\r\n\t/**\r\n\t * Password protection of the share\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget password() {\r\n\t\treturn this._share.password\r\n\t}\r\n\r\n\t/**\r\n\t * Password protection of the share\r\n\t *\r\n\t * @param {string} password the share password\r\n\t * @memberof Share\r\n\t */\r\n\tset password(password) {\r\n\t\tthis._share.password = password\r\n\t}\r\n\r\n\t/**\r\n\t * Password expiration time\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget passwordExpirationTime() {\r\n\t\treturn this._share.password_expiration_time\r\n\t}\r\n\r\n\t/**\r\n\t * Password expiration time\r\n\t *\r\n\t * @param {string} password expiration time\r\n\t * @memberof Share\r\n\t */\r\n\tset passwordExpirationTime(passwordExpirationTime) {\r\n\t\tthis._share.password_expiration_time = passwordExpirationTime\r\n\t}\r\n\r\n\t/**\r\n\t * Password protection by Talk of the share\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget sendPasswordByTalk() {\r\n\t\treturn this._share.send_password_by_talk\r\n\t}\r\n\r\n\t/**\r\n\t * Password protection by Talk of the share\r\n\t *\r\n\t * @param {boolean} sendPasswordByTalk whether to send the password by Talk\r\n\t *        or not\r\n\t * @memberof Share\r\n\t */\r\n\tset sendPasswordByTalk(sendPasswordByTalk) {\r\n\t\tthis._share.send_password_by_talk = sendPasswordByTalk\r\n\t}\r\n\r\n\t// SHARED ITEM DATA ---------------------------------------------\r\n\t/**\r\n\t * Get the shared item absolute full path\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget path() {\r\n\t\treturn this._share.path\r\n\t}\r\n\r\n\t/**\r\n\t * Return the item type: file or folder\r\n\t *\r\n\t * @return {string} 'folder' or 'file'\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget itemType() {\r\n\t\treturn this._share.item_type\r\n\t}\r\n\r\n\t/**\r\n\t * Get the shared item mimetype\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget mimetype() {\r\n\t\treturn this._share.mimetype\r\n\t}\r\n\r\n\t/**\r\n\t * Get the shared item id\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget fileSource() {\r\n\t\treturn this._share.file_source\r\n\t}\r\n\r\n\t/**\r\n\t * Get the target path on the receiving end\r\n\t * e.g the file /xxx/aaa will be shared in\r\n\t * the receiving root as /aaa, the fileTarget is /aaa\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget fileTarget() {\r\n\t\treturn this._share.file_target\r\n\t}\r\n\r\n\t/**\r\n\t * Get the parent folder id if any\r\n\t *\r\n\t * @return {number}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget fileParent() {\r\n\t\treturn this._share.file_parent\r\n\t}\r\n\r\n\t// PERMISSIONS Shortcuts\r\n\r\n\t/**\r\n\t * Does this share have READ permissions\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget hasReadPermission() {\r\n\t\treturn !!((this.permissions & OC.PERMISSION_READ))\r\n\t}\r\n\r\n\t/**\r\n\t * Does this share have CREATE permissions\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget hasCreatePermission() {\r\n\t\treturn !!((this.permissions & OC.PERMISSION_CREATE))\r\n\t}\r\n\r\n\t/**\r\n\t * Does this share have DELETE permissions\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget hasDeletePermission() {\r\n\t\treturn !!((this.permissions & OC.PERMISSION_DELETE))\r\n\t}\r\n\r\n\t/**\r\n\t * Does this share have UPDATE permissions\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget hasUpdatePermission() {\r\n\t\treturn !!((this.permissions & OC.PERMISSION_UPDATE))\r\n\t}\r\n\r\n\t/**\r\n\t * Does this share have SHARE permissions\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget hasSharePermission() {\r\n\t\treturn !!((this.permissions & OC.PERMISSION_SHARE))\r\n\t}\r\n\r\n\t/**\r\n\t * Does this share have download permissions\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget hasDownloadPermission() {\r\n\t\tfor (const i in this._share.attributes) {\r\n\t\t\tconst attr = this._share.attributes[i]\r\n\t\t\tif (attr.scope === 'permissions' && attr.key === 'download') {\r\n\t\t\t\treturn attr.enabled\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t}\r\n\r\n\tset hasDownloadPermission(enabled) {\r\n\t\tthis.setAttribute('permissions', 'download', !!enabled)\r\n\t}\r\n\r\n\tsetAttribute(scope, key, enabled) {\r\n\t\tconst attrUpdate = {\r\n\t\t\tscope,\r\n\t\t\tkey,\r\n\t\t\tenabled,\r\n\t\t}\r\n\r\n\t\t// try and replace existing\r\n\t\tfor (const i in this._share.attributes) {\r\n\t\t\tconst attr = this._share.attributes[i]\r\n\t\t\tif (attr.scope === attrUpdate.scope && attr.key === attrUpdate.key) {\r\n\t\t\t\tthis._share.attributes[i] = attrUpdate\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._share.attributes.push(attrUpdate)\r\n\t}\r\n\r\n\t// PERMISSIONS Shortcuts for the CURRENT USER\r\n\t// ! the permissions above are the share settings,\r\n\t// ! meaning the permissions for the recipient\r\n\t/**\r\n\t * Can the current user EDIT this share ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget canEdit() {\r\n\t\treturn this._share.can_edit === true\r\n\t}\r\n\r\n\t/**\r\n\t * Can the current user DELETE this share ?\r\n\t *\r\n\t * @return {boolean}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget canDelete() {\r\n\t\treturn this._share.can_delete === true\r\n\t}\r\n\r\n\t/**\r\n\t * Top level accessible shared folder fileid for the current user\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget viaFileid() {\r\n\t\treturn this._share.via_fileid\r\n\t}\r\n\r\n\t/**\r\n\t * Top level accessible shared folder path for the current user\r\n\t *\r\n\t * @return {string}\r\n\t * @readonly\r\n\t * @memberof Share\r\n\t */\r\n\tget viaPath() {\r\n\t\treturn this._share.via_path\r\n\t}\r\n\r\n\t// TODO: SORT THOSE PROPERTIES\r\n\r\n\tget parent() {\r\n\t\treturn this._share.parent\r\n\t}\r\n\r\n\tget storageId() {\r\n\t\treturn this._share.storage_id\r\n\t}\r\n\r\n\tget storage() {\r\n\t\treturn this._share.storage\r\n\t}\r\n\r\n\tget itemSource() {\r\n\t\treturn this._share.item_source\r\n\t}\r\n\r\n\tget status() {\r\n\t\treturn this._share.status\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { Type as ShareTypes } from '@nextcloud/sharing'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tSHARE_TYPES: ShareTypes,\r\n\t\t}\r\n\t},\r\n}\r\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"ul\",\n    [\n      _c(\n        \"SharingEntrySimple\",\n        {\n          ref: \"shareEntrySimple\",\n          staticClass: \"sharing-entry__internal\",\n          attrs: {\n            title: _vm.t(\"files_sharing\", \"Internal link\"),\n            subtitle: _vm.internalLinkSubtitle,\n          },\n          scopedSlots: _vm._u([\n            {\n              key: \"avatar\",\n              fn: function () {\n                return [\n                  _c(\"div\", {\n                    staticClass: \"avatar-external icon-external-white\",\n                  }),\n                ]\n              },\n              proxy: true,\n            },\n          ]),\n        },\n        [\n          _vm._v(\" \"),\n          _c(\n            \"NcActionLink\",\n            {\n              attrs: {\n                href: _vm.internalLink,\n                \"aria-label\": _vm.t(\n                  \"files_sharing\",\n                  \"Copy internal link to clipboard\"\n                ),\n                target: \"_blank\",\n                icon:\n                  _vm.copied && _vm.copySuccess\n                    ? \"icon-checkmark-color\"\n                    : \"icon-clippy\",\n              },\n              on: {\n                click: function ($event) {\n                  $event.preventDefault()\n                  return _vm.copyLink.apply(null, arguments)\n                },\n              },\n            },\n            [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.clipboardTooltip) + \"\\n\\t\\t\")]\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"li\",\n    { staticClass: \"sharing-entry\" },\n    [\n      _vm._t(\"avatar\"),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        {\n          directives: [\n            {\n              name: \"tooltip\",\n              rawName: \"v-tooltip\",\n              value: _vm.tooltip,\n              expression: \"tooltip\",\n            },\n          ],\n          staticClass: \"sharing-entry__desc\",\n        },\n        [\n          _c(\"span\", { staticClass: \"sharing-entry__title\" }, [\n            _vm._v(_vm._s(_vm.title)),\n          ]),\n          _vm._v(\" \"),\n          _vm.subtitle\n            ? _c(\"p\", [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.subtitle) + \"\\n\\t\\t\")])\n            : _vm._e(),\n        ]\n      ),\n      _vm._v(\" \"),\n      _vm.$slots[\"default\"]\n        ? _c(\n            \"NcActions\",\n            {\n              ref: \"actionsComponent\",\n              staticClass: \"sharing-entry__actions\",\n              attrs: {\n                \"menu-align\": \"right\",\n                \"aria-expanded\": _vm.ariaExpandedValue,\n              },\n            },\n            [_vm._t(\"default\")],\n            2\n          )\n        : _vm._e(),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=script&lang=js&\"","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<li class=\"sharing-entry\">\r\n\t\t<slot name=\"avatar\" />\r\n\t\t<div v-tooltip=\"tooltip\" class=\"sharing-entry__desc\">\r\n\t\t\t<span class=\"sharing-entry__title\">{{ title }}</span>\r\n\t\t\t<p v-if=\"subtitle\">\r\n\t\t\t\t{{ subtitle }}\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t<NcActions ref=\"actionsComponent\"\r\n\t\t\tv-if=\"$slots['default']\"\r\n\t\t\tclass=\"sharing-entry__actions\"\r\n\t\t\tmenu-align=\"right\"\r\n\t\t\t:aria-expanded=\"ariaExpandedValue\">\r\n\t\t\t<slot />\r\n\t\t</NcActions>\r\n\t</li>\r\n</template>\r\n\r\n<script>\r\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions'\r\nimport Tooltip from '@nextcloud/vue/dist/Directives/Tooltip'\r\n\r\nexport default {\r\n\tname: 'SharingEntrySimple',\r\n\r\n\tcomponents: {\r\n\t\tNcActions,\r\n\t},\r\n\r\n\tdirectives: {\r\n\t\tTooltip,\r\n\t},\r\n\r\n\tprops: {\r\n\t\ttitle: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\ttooltip: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '',\r\n\t\t},\r\n\t\tsubtitle: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '',\r\n\t\t},\r\n\t\tisUnique: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tariaExpanded: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tariaExpandedValue() {\r\n\t\t\tif (this.ariaExpanded === null) {\r\n\t\t\t\treturn this.ariaExpanded\r\n\t\t\t}\r\n\t\t\treturn this.ariaExpanded ? 'true' : 'false'\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sharing-entry {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmin-height: 44px;\r\n\t&__desc {\r\n\t\tpadding: 8px;\r\n\t\tline-height: 1.2em;\r\n\t\tposition: relative;\r\n\t\tflex: 1 1;\r\n\t\tmin-width: 0;\r\n\t\tp {\r\n\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t}\r\n\t}\r\n\t&__title {\r\n\t\twhite-space: nowrap;\r\n\t\ttext-overflow: ellipsis;\r\n\t\toverflow: hidden;\r\n\t\tmax-width: inherit;\r\n\t}\r\n\t&__actions {\r\n\t\tmargin-left: auto !important;\r\n\t}\r\n}\r\n</style>\r\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=style&index=0&id=354542cc&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=style&index=0&id=354542cc&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntrySimple.vue?vue&type=template&id=354542cc&scoped=true&\"\nimport script from \"./SharingEntrySimple.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingEntrySimple.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingEntrySimple.vue?vue&type=style&index=0&id=354542cc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"354542cc\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('354542cc')) {\n      api.createRecord('354542cc', component.options)\n    } else {\n      api.reload('354542cc', component.options)\n    }\n    module.hot.accept(\"./SharingEntrySimple.vue?vue&type=template&id=354542cc&scoped=true&\", function () {\n      api.rerender('354542cc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/SharingEntrySimple.vue\"\nexport default component.exports","\r\n<template>\r\n\t<ul>\r\n\t\t<SharingEntrySimple ref=\"shareEntrySimple\"\r\n\t\t\tclass=\"sharing-entry__internal\"\r\n\t\t\t:title=\"t('files_sharing', 'Internal link')\"\r\n\t\t\t:subtitle=\"internalLinkSubtitle\">\r\n\t\t\t<template #avatar>\r\n\t\t\t\t<div class=\"avatar-external icon-external-white\" />\r\n\t\t\t</template>\r\n\r\n\t\t\t<NcActionLink :href=\"internalLink\"\r\n\t\t\t\t:aria-label=\"t('files_sharing', 'Copy internal link to clipboard')\"\r\n\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t:icon=\"copied && copySuccess ? 'icon-checkmark-color' : 'icon-clippy'\"\r\n\t\t\t\t@click.prevent=\"copyLink\">\r\n\t\t\t\t{{ clipboardTooltip }}\r\n\t\t\t</NcActionLink>\r\n\t\t</SharingEntrySimple>\r\n\t</ul>\r\n</template>\r\n\r\n<script>\r\nimport { generateUrl } from '@nextcloud/router'\r\nimport NcActionLink from '@nextcloud/vue/dist/Components/NcActionLink'\r\nimport SharingEntrySimple from './SharingEntrySimple'\r\n\r\nexport default {\r\n\tname: 'SharingEntryInternal',\r\n\r\n\tcomponents: {\r\n\t\tNcActionLink,\r\n\t\tSharingEntrySimple,\r\n\t},\r\n\r\n\tprops: {\r\n\t\tfileInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcopied: false,\r\n\t\t\tcopySuccess: false,\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t/**\r\n\t\t * Get the internal link to this file id\r\n\t\t *\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tinternalLink() {\r\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl('/f/') + this.fileInfo.id\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Clipboard v-tooltip message\r\n\t\t *\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tclipboardTooltip() {\r\n\t\t\tif (this.copied) {\r\n\t\t\t\treturn this.copySuccess\r\n\t\t\t\t\t? t('files_sharing', 'Link copied')\r\n\t\t\t\t\t: t('files_sharing', 'Cannot copy, please copy the link manually')\r\n\t\t\t}\r\n\t\t\treturn t('files_sharing', 'Copy to clipboard')\r\n\t\t},\r\n\r\n\t\tinternalLinkSubtitle() {\r\n\t\t\tif (this.fileInfo.type === 'dir') {\r\n\t\t\t\treturn t('files_sharing', 'Only works for users with access to this folder')\r\n\t\t\t}\r\n\t\t\treturn t('files_sharing', 'Only works for users with access to this file')\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync copyLink() {\r\n\t\t\ttry {\r\n\t\t\t\tawait this.$copyText(this.internalLink)\r\n\t\t\t\t// focus and show the tooltip (note: cannot set ref on NcActionLink)\r\n\t\t\t\tthis.$refs.shareEntrySimple.$refs.actionsComponent.$el.focus()\r\n\t\t\t\tthis.copySuccess = true\r\n\t\t\t\tthis.copied = true\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.copySuccess = false\r\n\t\t\t\tthis.copied = true\r\n\t\t\t\tconsole.error(error)\r\n\t\t\t} finally {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.copySuccess = false\r\n\t\t\t\t\tthis.copied = false\r\n\t\t\t\t}, 4000)\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sharing-entry__internal {\r\n\t.avatar-external {\r\n\t\twidth: 32px;\r\n\t\theight: 32px;\r\n\t\tline-height: 32px;\r\n\t\tfont-size: 18px;\r\n\t\tbackground-color: var(--color-text-maxcontrast);\r\n\t\tborder-radius: 50%;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\t.icon-checkmark-color {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=style&index=0&id=f55cfc52&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=style&index=0&id=f55cfc52&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntryInternal.vue?vue&type=template&id=f55cfc52&scoped=true&\"\nimport script from \"./SharingEntryInternal.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingEntryInternal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingEntryInternal.vue?vue&type=style&index=0&id=f55cfc52&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f55cfc52\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('f55cfc52')) {\n      api.createRecord('f55cfc52', component.options)\n    } else {\n      api.reload('f55cfc52', component.options)\n    }\n    module.hot.accept(\"./SharingEntryInternal.vue?vue&type=template&id=f55cfc52&scoped=true&\", function () {\n      api.rerender('f55cfc52', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/SharingEntryInternal.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"sharing-search\" },\n    [\n      _c(\"label\", { attrs: { for: \"sharing-search-input\" } }, [\n        _vm._v(_vm._s(_vm.t(\"files_sharing\", \"Search for share recipients\"))),\n      ]),\n      _vm._v(\" \"),\n      _c(\"NcMultiselect\", {\n        ref: \"multiselect\",\n        staticClass: \"sharing-search__input\",\n        attrs: {\n          id: \"sharing-search-input\",\n          \"clear-on-select\": true,\n          disabled: !_vm.canReshare,\n          \"hide-selected\": true,\n          \"internal-search\": false,\n          loading: _vm.loading,\n          options: _vm.options,\n          placeholder: _vm.inputPlaceholder,\n          \"preselect-first\": true,\n          \"preserve-search\": true,\n          searchable: true,\n          \"user-select\": true,\n          \"open-direction\": \"below\",\n          label: \"displayName\",\n          \"track-by\": \"id\",\n        },\n        on: { \"search-change\": _vm.asyncFind, select: _vm.addShare },\n        scopedSlots: _vm._u([\n          {\n            key: \"noOptions\",\n            fn: function () {\n              return [\n                _vm._v(\n                  \"\\n\\t\\t\\t\" +\n                    _vm._s(\n                      _vm.t(\n                        \"files_sharing\",\n                        \"No recommendations. Start typing.\"\n                      )\n                    ) +\n                    \"\\n\\t\\t\"\n                ),\n              ]\n            },\n            proxy: true,\n          },\n          {\n            key: \"noResult\",\n            fn: function () {\n              return [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.noResultText) + \"\\n\\t\\t\")]\n            },\n            proxy: true,\n          },\n        ]),\n      }),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/**\r\n * @copyright Copyright (c) 2020 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport axios from '@nextcloud/axios'\r\nimport Config from '../services/ConfigService'\r\n\r\nconst config = new Config()\r\nconst passwordSet = 'abcdefgijkmnopqrstwxyzABCDEFGHJKLMNPQRSTWXYZ23456789'\r\n\r\n/**\r\n * Generate a valid policy password or\r\n * request a valid password if password_policy\r\n * is enabled\r\n *\r\n * @return {string} a valid password\r\n */\r\nexport default async function() {\r\n\t// password policy is enabled, let's request a pass\r\n\tif (config.passwordPolicy.api && config.passwordPolicy.api.generate) {\r\n\t\ttry {\r\n\t\t\tconst request = await axios.get(config.passwordPolicy.api.generate)\r\n\t\t\tif (request.data.ocs.data.password) {\r\n\t\t\t\treturn request.data.ocs.data.password\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.info('Error generating password from password_policy', error)\r\n\t\t}\r\n\t}\r\n\r\n\t// generate password of 10 length based on passwordSet\r\n\treturn Array(10).fill(0)\r\n\t\t.reduce((prev, curr) => {\r\n\t\t\tprev += passwordSet.charAt(Math.floor(Math.random() * passwordSet.length))\r\n\t\t\treturn prev\r\n\t\t}, '')\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Joas Schilling <coding@schilljs.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n// TODO: remove when ie not supported\r\nimport 'url-search-params-polyfill'\r\n\r\nimport { generateOcsUrl } from '@nextcloud/router'\r\nimport axios from '@nextcloud/axios'\r\nimport Share from '../models/Share'\r\n\r\nconst shareUrl = generateOcsUrl('apps/files_sharing/api/v1/shares')\r\n\r\nexport default {\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Create a new share\r\n\t\t *\r\n\t\t * @param {object} data destructuring object\r\n\t\t * @param {string} data.path  path to the file/folder which should be shared\r\n\t\t * @param {number} data.shareType  0 = user; 1 = group; 3 = public link; 6 = federated cloud share\r\n\t\t * @param {string} data.shareWith  user/group id with which the file should be shared (optional for shareType > 1)\r\n\t\t * @param {boolean} [data.publicUpload=false]  allow public upload to a public shared folder\r\n\t\t * @param {string} [data.password]  password to protect public link Share with\r\n\t\t * @param {number} [data.permissions=31]  1 = read; 2 = update; 4 = create; 8 = delete; 16 = share; 31 = all (default: 31, for public shares: 1)\r\n\t\t * @param {boolean} [data.sendPasswordByTalk=false] send the password via a talk conversation\r\n\t\t * @param {string} [data.expireDate=''] expire the shareautomatically after\r\n\t\t * @param {string} [data.label=''] custom label\r\n\t\t * @param {string} [data.attributes=null] Share attributes encoded as json\r\n\t\t * @return {Share} the new share\r\n\t\t * @throws {Error}\r\n\t\t */\r\n\t\tasync createShare({ path, permissions, shareType, shareWith, publicUpload, password, sendPasswordByTalk, expireDate, label, attributes }) {\r\n\t\t\ttry {\r\n\t\t\t\tconst request = await axios.post(shareUrl, { path, permissions, shareType, shareWith, publicUpload, password, sendPasswordByTalk, expireDate, label, attributes })\r\n\t\t\t\tif (!request?.data?.ocs) {\r\n\t\t\t\t\tthrow request\r\n\t\t\t\t}\r\n\t\t\t\treturn new Share(request.data.ocs.data)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error while creating share', error)\r\n\t\t\t\tconst errorMessage = error?.response?.data?.ocs?.meta?.message\r\n\t\t\t\tOC.Notification.showTemporary(\r\n\t\t\t\t\terrorMessage ? t('files_sharing', 'Error creating the share: {errorMessage}', { errorMessage }) : t('files_sharing', 'Error creating the share'),\r\n\t\t\t\t\t{ type: 'error' }\r\n\t\t\t\t)\r\n\t\t\t\tthrow error\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Delete a share\r\n\t\t *\r\n\t\t * @param {number} id share id\r\n\t\t * @throws {Error}\r\n\t\t */\r\n\t\tasync deleteShare(id) {\r\n\t\t\ttry {\r\n\t\t\t\tconst request = await axios.delete(shareUrl + `/${id}`)\r\n\t\t\t\tif (!request?.data?.ocs) {\r\n\t\t\t\t\tthrow request\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error while deleting share', error)\r\n\t\t\t\tconst errorMessage = error?.response?.data?.ocs?.meta?.message\r\n\t\t\t\tOC.Notification.showTemporary(\r\n\t\t\t\t\terrorMessage ? t('files_sharing', 'Error deleting the share: {errorMessage}', { errorMessage }) : t('files_sharing', 'Error deleting the share'),\r\n\t\t\t\t\t{ type: 'error' }\r\n\t\t\t\t)\r\n\t\t\t\tthrow error\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update a share\r\n\t\t *\r\n\t\t * @param {number} id share id\r\n\t\t * @param {object} properties key-value object of the properties to update\r\n\t\t */\r\n\t\tasync updateShare(id, properties) {\r\n\t\t\ttry {\r\n\t\t\t\tconst request = await axios.put(shareUrl + `/${id}`, properties)\r\n\t\t\t\tif (!request?.data?.ocs) {\r\n\t\t\t\t\tthrow request\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn request.data.ocs.data\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error while updating share', error)\r\n\t\t\t\tif (error.response.status !== 400) {\r\n\t\t\t\t\tconst errorMessage = error?.response?.data?.ocs?.meta?.message\r\n\t\t\t\t\tOC.Notification.showTemporary(\r\n\t\t\t\t\t\terrorMessage ? t('files_sharing', 'Error updating the share: {errorMessage}', { errorMessage }) : t('files_sharing', 'Error updating the share'),\r\n\t\t\t\t\t\t{ type: 'error' }\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tconst message = error.response.data.ocs.meta.message\r\n\t\t\t\tthrow new Error(message)\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\r\n","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<div class=\"sharing-search\">\r\n\t\t<label for=\"sharing-search-input\">{{ t('files_sharing', 'Search for share recipients') }}</label>\r\n\t\t<NcMultiselect ref=\"multiselect\"\r\n\t\t\tid=\"sharing-search-input\"\r\n\t\t\tclass=\"sharing-search__input\"\r\n\t\t\t:clear-on-select=\"true\"\r\n\t\t\t:disabled=\"!canReshare\"\r\n\t\t\t:hide-selected=\"true\"\r\n\t\t\t:internal-search=\"false\"\r\n\t\t\t:loading=\"loading\"\r\n\t\t\t:options=\"options\"\r\n\t\t\t:placeholder=\"inputPlaceholder\"\r\n\t\t\t:preselect-first=\"true\"\r\n\t\t\t:preserve-search=\"true\"\r\n\t\t\t:searchable=\"true\"\r\n\t\t\t:user-select=\"true\"\r\n\t\t\topen-direction=\"below\"\r\n\t\t\tlabel=\"displayName\"\r\n\t\t\ttrack-by=\"id\"\r\n\t\t\t@search-change=\"asyncFind\"\r\n\t\t\t@select=\"addShare\">\r\n\t\t\t<template #noOptions>\r\n\t\t\t\t{{ t('files_sharing', 'No recommendations. Start typing.') }}\r\n\t\t\t</template>\r\n\t\t\t<template #noResult>\r\n\t\t\t\t{{ noResultText }}\r\n\t\t\t</template>\r\n\t\t</NcMultiselect>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { generateOcsUrl } from '@nextcloud/router'\r\nimport { getCurrentUser } from '@nextcloud/auth'\r\nimport axios from '@nextcloud/axios'\r\nimport debounce from 'debounce'\r\nimport NcMultiselect from '@nextcloud/vue/dist/Components/NcMultiselect'\r\n\r\nimport Config from '../services/ConfigService'\r\nimport GeneratePassword from '../utils/GeneratePassword'\r\nimport Share from '../models/Share'\r\nimport ShareRequests from '../mixins/ShareRequests'\r\nimport ShareTypes from '../mixins/ShareTypes'\r\n\r\nexport default {\r\n\tname: 'SharingInput',\r\n\r\n\tcomponents: {\r\n\t\tNcMultiselect,\r\n\t},\r\n\r\n\tmixins: [ShareTypes, ShareRequests],\r\n\r\n\tprops: {\r\n\t\tshares: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tlinkShares: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tfileInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\treshare: {\r\n\t\t\ttype: Share,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t\tcanReshare: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tconfig: new Config(),\r\n\t\t\tloading: false,\r\n\t\t\tquery: '',\r\n\t\t\trecommendations: [],\r\n\t\t\tShareSearch: OCA.Sharing.ShareSearch.state,\r\n\t\t\tsuggestions: [],\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t/**\r\n\t\t * Implement ShareSearch\r\n\t\t * allows external appas to inject new\r\n\t\t * results into the autocomplete dropdown\r\n\t\t * Used for the guests app\r\n\t\t *\r\n\t\t * @return {Array}\r\n\t\t */\r\n\t\texternalResults() {\r\n\t\t\treturn this.ShareSearch.results\r\n\t\t},\r\n\t\tinputPlaceholder() {\r\n\t\t\tconst allowRemoteSharing = this.config.isRemoteShareAllowed\r\n\r\n\t\t\tif (!this.canReshare) {\r\n\t\t\t\treturn t('files_sharing', 'Resharing is not allowed')\r\n\t\t\t}\r\n\t\t\t// We can always search with email addresses for users too\r\n\t\t\tif (!allowRemoteSharing) {\r\n\t\t\t\treturn t('files_sharing', 'Name or email …')\r\n\t\t\t}\r\n\r\n\t\t\treturn t('files_sharing', 'Name, email, or Federated Cloud ID …')\r\n\t\t},\r\n\r\n\t\tisValidQuery() {\r\n\t\t\treturn this.query && this.query.trim() !== '' && this.query.length > this.config.minSearchStringLength\r\n\t\t},\r\n\r\n\t\toptions() {\r\n\t\t\tif (this.isValidQuery) {\r\n\t\t\t\treturn this.suggestions\r\n\t\t\t}\r\n\t\t\treturn this.recommendations\r\n\t\t},\r\n\r\n\t\tnoResultText() {\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn t('files_sharing', 'Searching …')\r\n\t\t\t}\r\n\t\t\treturn t('files_sharing', 'No elements found.')\r\n\t\t},\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.getRecommendations()\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync asyncFind(query, id) {\r\n\t\t\t// save current query to check if we display\r\n\t\t\t// recommendations or search results\r\n\t\t\tthis.query = query.trim()\r\n\t\t\tif (this.isValidQuery) {\r\n\t\t\t\t// start loading now to have proper ux feedback\r\n\t\t\t\t// during the debounce\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tawait this.debounceGetSuggestions(query)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get suggestions\r\n\t\t *\r\n\t\t * @param {string} search the search query\r\n\t\t * @param {boolean} [lookup=false] search on lookup server\r\n\t\t */\r\n\t\tasync getSuggestions(search, lookup = false) {\r\n\t\t\tthis.loading = true\r\n\r\n\t\t\tif (OC.getCapabilities().files_sharing.sharee.query_lookup_default === true) {\r\n\t\t\t\tlookup = true\r\n\t\t\t}\r\n\r\n\t\t\tconst shareType = [\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_USER,\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_GROUP,\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_REMOTE,\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP,\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_CIRCLE,\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_ROOM,\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_GUEST,\r\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_DECK,\r\n\t\t\t]\r\n\r\n\t\t\tif (OC.getCapabilities().files_sharing.public.enabled === true) {\r\n\t\t\t\tshareType.push(this.SHARE_TYPES.SHARE_TYPE_EMAIL)\r\n\t\t\t}\r\n\r\n\t\t\tlet request = null\r\n\t\t\ttry {\r\n\t\t\t\trequest = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/sharees'), {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tformat: 'json',\r\n\t\t\t\t\t\titemType: this.fileInfo.type === 'dir' ? 'folder' : 'file',\r\n\t\t\t\t\t\tsearch,\r\n\t\t\t\t\t\tlookup,\r\n\t\t\t\t\t\tperPage: this.config.maxAutocompleteResults,\r\n\t\t\t\t\t\tshareType,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error fetching suggestions', error)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst data = request.data.ocs.data\r\n\t\t\tconst exact = request.data.ocs.data.exact\r\n\t\t\tdata.exact = [] // removing exact from general results\r\n\r\n\t\t\t// flatten array of arrays\r\n\t\t\tconst rawExactSuggestions = Object.values(exact).reduce((arr, elem) => arr.concat(elem), [])\r\n\t\t\tconst rawSuggestions = Object.values(data).reduce((arr, elem) => arr.concat(elem), [])\r\n\r\n\t\t\t// remove invalid data and format to user-select layout\r\n\t\t\tconst exactSuggestions = this.filterOutExistingShares(rawExactSuggestions)\r\n\t\t\t\t.map(share => this.formatForMultiselect(share))\r\n\t\t\t\t// sort by type so we can get user&groups first...\r\n\t\t\t\t.sort((a, b) => a.shareType - b.shareType)\r\n\t\t\tconst suggestions = this.filterOutExistingShares(rawSuggestions)\r\n\t\t\t\t.map(share => this.formatForMultiselect(share))\r\n\t\t\t\t// sort by type so we can get user&groups first...\r\n\t\t\t\t.sort((a, b) => a.shareType - b.shareType)\r\n\r\n\t\t\t// lookup clickable entry\r\n\t\t\t// show if enabled and not already requested\r\n\t\t\tconst lookupEntry = []\r\n\t\t\tif (data.lookupEnabled && !lookup) {\r\n\t\t\t\tlookupEntry.push({\r\n\t\t\t\t\tid: 'global-lookup',\r\n\t\t\t\t\tisNoUser: true,\r\n\t\t\t\t\tdisplayName: t('files_sharing', 'Search globally'),\r\n\t\t\t\t\tlookup: true,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\t// if there is a condition specified, filter it\r\n\t\t\tconst externalResults = this.externalResults.filter(result => !result.condition || result.condition(this))\r\n\r\n\t\t\tconst allSuggestions = exactSuggestions.concat(suggestions).concat(externalResults).concat(lookupEntry)\r\n\r\n\t\t\t// Count occurrences of display names in order to provide a distinguishable description if needed\r\n\t\t\tconst nameCounts = allSuggestions.reduce((nameCounts, result) => {\r\n\t\t\t\tif (!result.displayName) {\r\n\t\t\t\t\treturn nameCounts\r\n\t\t\t\t}\r\n\t\t\t\tif (!nameCounts[result.displayName]) {\r\n\t\t\t\t\tnameCounts[result.displayName] = 0\r\n\t\t\t\t}\r\n\t\t\t\tnameCounts[result.displayName]++\r\n\t\t\t\treturn nameCounts\r\n\t\t\t}, {})\r\n\r\n\t\t\tthis.suggestions = allSuggestions.map(item => {\r\n\t\t\t\t// Make sure that items with duplicate displayName get the shareWith applied as a description\r\n\t\t\t\tif (nameCounts[item.displayName] > 1 && !item.desc) {\r\n\t\t\t\t\treturn { ...item, desc: item.shareWithDisplayNameUnique }\r\n\t\t\t\t}\r\n\t\t\t\treturn item\r\n\t\t\t})\r\n\r\n\t\t\tthis.loading = false\r\n\t\t\tconsole.info('suggestions', this.suggestions)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Debounce getSuggestions\r\n\t\t *\r\n\t\t * @param {...*} args the arguments\r\n\t\t */\r\n\t\tdebounceGetSuggestions: debounce(function(...args) {\r\n\t\t\tthis.getSuggestions(...args)\r\n\t\t}, 300),\r\n\r\n\t\t/**\r\n\t\t * Get the sharing recommendations\r\n\t\t */\r\n\t\tasync getRecommendations() {\r\n\t\t\tthis.loading = true\r\n\r\n\t\t\tlet request = null\r\n\t\t\ttry {\r\n\t\t\t\trequest = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/sharees_recommended'), {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tformat: 'json',\r\n\t\t\t\t\t\titemType: this.fileInfo.type,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error fetching recommendations', error)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\t// Add external results from the OCA.Sharing.ShareSearch api\r\n\t\t\tconst externalResults = this.externalResults.filter(result => !result.condition || result.condition(this))\r\n\r\n\t\t\t// flatten array of arrays\r\n\t\t\tconst rawRecommendations = Object.values(request.data.ocs.data.exact)\r\n\t\t\t\t.reduce((arr, elem) => arr.concat(elem), [])\r\n\r\n\t\t\t// remove invalid data and format to user-select layout\r\n\t\t\tthis.recommendations = this.filterOutExistingShares(rawRecommendations)\r\n\t\t\t\t.map(share => this.formatForMultiselect(share))\r\n\t\t\t\t.concat(externalResults)\r\n\r\n\t\t\tthis.loading = false\r\n\t\t\tconsole.info('recommendations', this.recommendations)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Filter out existing shares from\r\n\t\t * the provided shares search results\r\n\t\t *\r\n\t\t * @param {object[]} shares the array of shares object\r\n\t\t * @return {object[]}\r\n\t\t */\r\n\t\tfilterOutExistingShares(shares) {\r\n\t\t\treturn shares.reduce((arr, share) => {\r\n\t\t\t\t// only check proper objects\r\n\t\t\t\tif (typeof share !== 'object') {\r\n\t\t\t\t\treturn arr\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (share.value.shareType === this.SHARE_TYPES.SHARE_TYPE_USER) {\r\n\t\t\t\t\t\t// filter out current user\r\n\t\t\t\t\t\tif (share.value.shareWith === getCurrentUser().uid) {\r\n\t\t\t\t\t\t\treturn arr\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// filter out the owner of the share\r\n\t\t\t\t\t\tif (this.reshare && share.value.shareWith === this.reshare.owner) {\r\n\t\t\t\t\t\t\treturn arr\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// filter out existing mail shares\r\n\t\t\t\t\tif (share.value.shareType === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\r\n\t\t\t\t\t\tconst emails = this.linkShares.map(elem => elem.shareWith)\r\n\t\t\t\t\t\tif (emails.indexOf(share.value.shareWith.trim()) !== -1) {\r\n\t\t\t\t\t\t\treturn arr\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else { // filter out existing shares\r\n\t\t\t\t\t\t// creating an object of uid => type\r\n\t\t\t\t\t\tconst sharesObj = this.shares.reduce((obj, elem) => {\r\n\t\t\t\t\t\t\tobj[elem.shareWith] = elem.type\r\n\t\t\t\t\t\t\treturn obj\r\n\t\t\t\t\t\t}, {})\r\n\r\n\t\t\t\t\t\t// if shareWith is the same and the share type too, ignore it\r\n\t\t\t\t\t\tconst key = share.value.shareWith.trim()\r\n\t\t\t\t\t\tif (key in sharesObj\r\n\t\t\t\t\t\t\t&& sharesObj[key] === share.value.shareType) {\r\n\t\t\t\t\t\t\treturn arr\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// ALL GOOD\r\n\t\t\t\t\t// let's add the suggestion\r\n\t\t\t\t\tarr.push(share)\r\n\t\t\t\t} catch {\r\n\t\t\t\t\treturn arr\r\n\t\t\t\t}\r\n\t\t\t\treturn arr\r\n\t\t\t}, [])\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get the icon based on the share type\r\n\t\t *\r\n\t\t * @param {number} type the share type\r\n\t\t * @return {string} the icon class\r\n\t\t */\r\n\t\tshareTypeToIcon(type) {\r\n\t\t\tswitch (type) {\r\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_GUEST:\r\n\t\t\t\t// default is a user, other icons are here to differentiate\r\n\t\t\t\t// themselves from it, so let's not display the user icon\r\n\t\t\t\t// case this.SHARE_TYPES.SHARE_TYPE_REMOTE:\r\n\t\t\t\t// case this.SHARE_TYPES.SHARE_TYPE_USER:\r\n\t\t\t\treturn 'icon-user'\r\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:\r\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_GROUP:\r\n\t\t\t\treturn 'icon-group'\r\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_EMAIL:\r\n\t\t\t\treturn 'icon-mail'\r\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_CIRCLE:\r\n\t\t\t\treturn 'icon-circle'\r\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_ROOM:\r\n\t\t\t\treturn 'icon-room'\r\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_DECK:\r\n\t\t\t\treturn 'icon-deck'\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Format shares for the multiselect options\r\n\t\t *\r\n\t\t * @param {object} result select entry item\r\n\t\t * @return {object}\r\n\t\t */\r\n\t\tformatForMultiselect(result) {\r\n\t\t\tlet subtitle\r\n\t\t\tif (result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_USER && this.config.shouldAlwaysShowUnique) {\r\n\t\t\t\tsubtitle = result.shareWithDisplayNameUnique ?? ''\r\n\t\t\t} else if ((result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_REMOTE\r\n\t\t\t\t\t|| result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP\r\n\t\t\t) && result.value.server) {\r\n\t\t\t\tsubtitle = t('files_sharing', 'on {server}', { server: result.value.server })\r\n\t\t\t} else if (result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\r\n\t\t\t\tsubtitle = result.value.shareWith\r\n\t\t\t} else {\r\n\t\t\t\tsubtitle = result.shareWithDescription ?? ''\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid: `${result.value.shareType}-${result.value.shareWith}`,\r\n\t\t\t\tshareWith: result.value.shareWith,\r\n\t\t\t\tshareType: result.value.shareType,\r\n\t\t\t\tuser: result.uuid || result.value.shareWith,\r\n\t\t\t\tisNoUser: result.value.shareType !== this.SHARE_TYPES.SHARE_TYPE_USER,\r\n\t\t\t\tdisplayName: result.name || result.label,\r\n\t\t\t\tsubtitle,\r\n\t\t\t\tshareWithDisplayNameUnique: result.shareWithDisplayNameUnique || '',\r\n\t\t\t\ticon: this.shareTypeToIcon(result.value.shareType),\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Process the new share request\r\n\t\t *\r\n\t\t * @param {object} value the multiselect option\r\n\t\t */\r\n\t\tasync addShare(value) {\r\n\t\t\tif (value.lookup) {\r\n\t\t\t\tawait this.getSuggestions(this.query, true)\r\n\r\n\t\t\t\t// focus the input again\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs.multiselect.$el.querySelector('.multiselect__input').focus()\r\n\t\t\t\t})\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\t// handle externalResults from OCA.Sharing.ShareSearch\r\n\t\t\tif (value.handler) {\r\n\t\t\t\tconst share = await value.handler(this)\r\n\t\t\t\tthis.$emit('add:share', new Share(share))\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tthis.loading = true\r\n\t\t\tconsole.debug('Adding a new share from the input for', value)\r\n\t\t\ttry {\r\n\t\t\t\tlet password = null\r\n\r\n\t\t\t\tif (this.config.enforcePasswordForPublicLink\r\n\t\t\t\t\t&& value.shareType === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\r\n\t\t\t\t\tpassword = await GeneratePassword()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst path = (this.fileInfo.path + '/' + this.fileInfo.name).replace('//', '/')\r\n\t\t\t\tconst share = await this.createShare({\r\n\t\t\t\t\tpath,\r\n\t\t\t\t\tshareType: value.shareType,\r\n\t\t\t\t\tshareWith: value.shareWith,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tpermissions: this.fileInfo.sharePermissions & OC.getCapabilities().files_sharing.default_permissions,\r\n\t\t\t\t\tattributes: JSON.stringify(this.fileInfo.shareAttributes),\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// If we had a password, we need to show it to the user as it was generated\r\n\t\t\t\tif (password) {\r\n\t\t\t\t\tshare.newPassword = password\r\n\t\t\t\t\t// Wait for the newly added share\r\n\t\t\t\t\tconst component = await new Promise(resolve => {\r\n\t\t\t\t\t\tthis.$emit('add:share', share, resolve)\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t// open the menu on the\r\n\t\t\t\t\t// freshly created share component\r\n\t\t\t\t\tcomponent.open = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Else we just add it normally\r\n\t\t\t\t\tthis.$emit('add:share', share)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// reset the search string when done\r\n\t\t\t\t// FIXME: https://github.com/shentao/vue-multiselect/issues/633\r\n\t\t\t\tif (this.$refs.multiselect?.$refs?.VueMultiselect?.search) {\r\n\t\t\t\t\tthis.$refs.multiselect.$refs.VueMultiselect.search = ''\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait this.getRecommendations()\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// focus back if any error\r\n\t\t\t\tconst input = this.$refs.multiselect.$el.querySelector('input')\r\n\t\t\t\tif (input) {\r\n\t\t\t\t\tinput.focus()\r\n\t\t\t\t}\r\n\t\t\t\tthis.query = value.shareWith\r\n\t\t\t\tconsole.error('Error while adding new share', error)\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.sharing-search {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tmargin-bottom: 4px;\r\n\r\n\tlabel[for=\"sharing-search-input\"] {\r\n\t\tmargin-bottom: 2px;\r\n\t}\r\n\r\n\t&__input {\r\n\t\twidth: 100%;\r\n\t\tmargin: 10px 0;\r\n\r\n\t\t// properly style the lookup entry\r\n\t\t.multiselect__option {\r\n\t\t\tspan[lookup] {\r\n\t\t\t\t.avatardiv {\r\n\t\t\t\t\tbackground-image: var(--icon-search-white);\r\n\t\t\t\t\tbackground-repeat: no-repeat;\r\n\t\t\t\t\tbackground-position: center;\r\n\t\t\t\t\tbackground-color: var(--color-text-maxcontrast) !important;\r\n\t\t\t\t\tdiv {\r\n\t\t\t\t\t\tdisplay: none;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInput.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInput.vue?vue&type=style&index=0&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInput.vue?vue&type=style&index=0&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingInput.vue?vue&type=template&id=39161a5c&\"\nimport script from \"./SharingInput.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingInput.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('39161a5c')) {\n      api.createRecord('39161a5c', component.options)\n    } else {\n      api.reload('39161a5c', component.options)\n    }\n    module.hot.accept(\"./SharingInput.vue?vue&type=template&id=39161a5c&\", function () {\n      api.rerender('39161a5c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/SharingInput.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"ul\",\n    { attrs: { id: \"sharing-inherited-shares\" } },\n    [\n      _c(\n        \"SharingEntrySimple\",\n        {\n          staticClass: \"sharing-entry__inherited\",\n          attrs: {\n            title: _vm.mainTitle,\n            subtitle: _vm.subTitle,\n            \"aria-expanded\": _vm.showInheritedShares,\n          },\n          scopedSlots: _vm._u([\n            {\n              key: \"avatar\",\n              fn: function () {\n                return [\n                  _c(\"div\", { staticClass: \"avatar-shared icon-more-white\" }),\n                ]\n              },\n              proxy: true,\n            },\n          ]),\n        },\n        [\n          _vm._v(\" \"),\n          _c(\n            \"NcActionButton\",\n            {\n              attrs: {\n                icon: _vm.showInheritedSharesIcon,\n                \"aria-label\": _vm.mainTitle,\n              },\n              on: {\n                click: function ($event) {\n                  $event.preventDefault()\n                  $event.stopPropagation()\n                  return _vm.toggleInheritedShares.apply(null, arguments)\n                },\n              },\n            },\n            [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.toggleTooltip) + \"\\n\\t\\t\")]\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _vm._l(_vm.shares, function (share) {\n        return _c(\"SharingEntryInherited\", {\n          key: share.id,\n          attrs: { \"file-info\": _vm.fileInfo, share: share },\n        })\n      }),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"SharingEntrySimple\",\n    {\n      key: _vm.share.id,\n      staticClass: \"sharing-entry__inherited\",\n      attrs: { title: _vm.share.shareWithDisplayName },\n      scopedSlots: _vm._u([\n        {\n          key: \"avatar\",\n          fn: function () {\n            return [\n              _c(\"NcAvatar\", {\n                staticClass: \"sharing-entry__avatar\",\n                attrs: {\n                  user: _vm.share.shareWith,\n                  \"display-name\": _vm.share.shareWithDisplayName,\n                  \"tooltip-message\": \"\",\n                },\n              }),\n            ]\n          },\n          proxy: true,\n        },\n      ]),\n    },\n    [\n      _vm._v(\" \"),\n      _c(\"NcActionText\", { attrs: { icon: \"icon-user\" } }, [\n        _vm._v(\n          \"\\n\\t\\t\" +\n            _vm._s(\n              _vm.t(\"files_sharing\", \"Added by {initiator}\", {\n                initiator: _vm.share.ownerDisplayName,\n              })\n            ) +\n            \"\\n\\t\"\n        ),\n      ]),\n      _vm._v(\" \"),\n      _vm.share.viaPath && _vm.share.viaFileid\n        ? _c(\n            \"NcActionLink\",\n            { attrs: { icon: \"icon-folder\", href: _vm.viaFileTargetUrl } },\n            [\n              _vm._v(\n                \"\\n\\t\\t\" +\n                  _vm._s(\n                    _vm.t(\"files_sharing\", \"Via “{folder}”\", {\n                      folder: _vm.viaFolderName,\n                    })\n                  ) +\n                  \"\\n\\t\"\n              ),\n            ]\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.share.canDelete\n        ? _c(\n            \"NcActionButton\",\n            {\n              attrs: { icon: \"icon-close\" },\n              on: {\n                click: function ($event) {\n                  $event.preventDefault()\n                  return _vm.onDelete.apply(null, arguments)\n                },\n              },\n            },\n            [\n              _vm._v(\n                \"\\n\\t\\t\" + _vm._s(_vm.t(\"files_sharing\", \"Unshare\")) + \"\\n\\t\"\n              ),\n            ]\n          )\n        : _vm._e(),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\r\n * @author Gary Kim <gary@garykim.dev>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Vincent Petry <vincent@nextcloud.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { getCurrentUser } from '@nextcloud/auth'\r\n// eslint-disable-next-line import/no-unresolved, node/no-missing-import\r\nimport PQueue from 'p-queue'\r\nimport debounce from 'debounce'\r\n\r\nimport Share from '../models/Share.js'\r\nimport SharesRequests from './ShareRequests.js'\r\nimport ShareTypes from './ShareTypes.js'\r\nimport Config from '../services/ConfigService.js'\r\n\r\nexport default {\r\n\tmixins: [SharesRequests, ShareTypes],\r\n\r\n\tprops: {\r\n\t\tfileInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tshare: {\r\n\t\t\ttype: Share,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t\tisUnique: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tconfig: new Config(),\r\n\r\n\t\t\t// errors helpers\r\n\t\t\terrors: {},\r\n\r\n\t\t\t// component status toggles\r\n\t\t\tloading: false,\r\n\t\t\tsaving: false,\r\n\t\t\topen: false,\r\n\r\n\t\t\t// concurrency management queue\r\n\t\t\t// we want one queue per share\r\n\t\t\tupdateQueue: new PQueue({ concurrency: 1 }),\r\n\r\n\t\t\t/**\r\n\t\t\t * ! This allow vue to make the Share class state reactive\r\n\t\t\t * ! do not remove it ot you'll lose all reactivity here\r\n\t\t\t */\r\n\t\t\treactiveState: this.share?.state,\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\r\n\t\t/**\r\n\t\t * Does the current share have a note\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\thasNote: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.note !== ''\r\n\t\t\t},\r\n\t\t\tset(enabled) {\r\n\t\t\t\tthis.share.note = enabled\r\n\t\t\t\t\t? null // enabled but user did not changed the content yet\r\n\t\t\t\t\t: '' // empty = no note = disabled\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tdateTomorrow() {\r\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + 1))\r\n\t\t},\r\n\r\n\t\t// Datepicker language\r\n\t\tlang() {\r\n\t\t\tconst weekdaysShort = window.dayNamesShort\r\n\t\t\t\t? window.dayNamesShort // provided by nextcloud\r\n\t\t\t\t: ['Sun.', 'Mon.', 'Tue.', 'Wed.', 'Thu.', 'Fri.', 'Sat.']\r\n\t\t\tconst monthsShort = window.monthNamesShort\r\n\t\t\t\t? window.monthNamesShort // provided by nextcloud\r\n\t\t\t\t: ['Jan.', 'Feb.', 'Mar.', 'Apr.', 'May.', 'Jun.', 'Jul.', 'Aug.', 'Sep.', 'Oct.', 'Nov.', 'Dec.']\r\n\t\t\tconst firstDayOfWeek = window.firstDay ? window.firstDay : 0\r\n\r\n\t\t\treturn {\r\n\t\t\t\tformatLocale: {\r\n\t\t\t\t\tfirstDayOfWeek,\r\n\t\t\t\t\tmonthsShort,\r\n\t\t\t\t\tweekdaysMin: weekdaysShort,\r\n\t\t\t\t\tweekdaysShort,\r\n\t\t\t\t},\r\n\t\t\t\tmonthFormat: 'MMM',\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tisShareOwner() {\r\n\t\t\treturn this.share && this.share.owner === getCurrentUser().uid\r\n\t\t},\r\n\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Check if a share is valid before\r\n\t\t * firing the request\r\n\t\t *\r\n\t\t * @param {Share} share the share to check\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcheckShare(share) {\r\n\t\t\tif (share.password) {\r\n\t\t\t\tif (typeof share.password !== 'string' || share.password.trim() === '') {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (share.expirationDate) {\r\n\t\t\t\tconst date = share.expirationDate\r\n\t\t\t\tif (!date.isValid()) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {string} date a date with YYYY-MM-DD format\r\n\t\t * @return {Date} date\r\n\t\t */\r\n\t\tparseDateString(date) {\r\n\t\t\tif (!date) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tconst regex = /([0-9]{4}-[0-9]{2}-[0-9]{2})/i\r\n\t\t\treturn new Date(date.match(regex)?.pop())\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {Date} date\r\n\t\t * @return {string} date a date with YYYY-MM-DD format\r\n\t\t */\r\n\t\tformatDateToString(date) {\r\n\t\t\t// Force utc time. Drop time information to be timezone-less\r\n\t\t\tconst utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()))\r\n\t\t\t// Format to YYYY-MM-DD\r\n\t\t\treturn utcDate.toISOString().split('T')[0]\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Save given value to expireDate and trigger queueUpdate\r\n\t\t *\r\n\t\t * @param {Date} date\r\n\t\t */\r\n\t\tonExpirationChange(date) {\r\n\t\t\tthis.share.expireDate = this.formatDateToString(date)\r\n\t\t\tthis.queueUpdate('expireDate')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Uncheck expire date\r\n\t\t * We need this method because @update:checked\r\n\t\t * is ran simultaneously as @uncheck, so\r\n\t\t * so we cannot ensure data is up-to-date\r\n\t\t */\r\n\t\tonExpirationDisable() {\r\n\t\t\tthis.share.expireDate = ''\r\n\t\t\tthis.queueUpdate('expireDate')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Note changed, let's save it to a different key\r\n\t\t *\r\n\t\t * @param {string} note the share note\r\n\t\t */\r\n\t\tonNoteChange(note) {\r\n\t\t\tthis.$set(this.share, 'newNote', note.trim())\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * When the note change, we trim, save and dispatch\r\n\t\t *\r\n\t\t */\r\n\t\tonNoteSubmit() {\r\n\t\t\tif (this.share.newNote) {\r\n\t\t\t\tthis.share.note = this.share.newNote\r\n\t\t\t\tthis.$delete(this.share, 'newNote')\r\n\t\t\t\tthis.queueUpdate('note')\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Delete share button handler\r\n\t\t */\r\n\t\tasync onDelete() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.open = false\r\n\t\t\t\tawait this.deleteShare(this.share.id)\r\n\t\t\t\tconsole.debug('Share deleted', this.share.id)\r\n\t\t\t\tthis.$emit('remove:share', this.share)\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// re-open menu if error\r\n\t\t\t\tthis.open = true\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Send an update of the share to the queue\r\n\t\t *\r\n\t\t * @param {Array<string>} propertyNames the properties to sync\r\n\t\t */\r\n\t\tqueueUpdate(...propertyNames) {\r\n\t\t\tif (propertyNames.length === 0) {\r\n\t\t\t\t// Nothing to update\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (this.share.id) {\r\n\t\t\t\tconst properties = {}\r\n\t\t\t\t// force value to string because that is what our\r\n\t\t\t\t// share api controller accepts\r\n\t\t\t\tpropertyNames.forEach(name => {\r\n\t\t\t\t\tif ((typeof this.share[name]) === 'object') {\r\n\t\t\t\t\t\tproperties[name] = JSON.stringify(this.share[name])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tproperties[name] = this.share[name].toString()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.updateQueue.add(async () => {\r\n\t\t\t\t\tthis.saving = true\r\n\t\t\t\t\tthis.errors = {}\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst updatedShare = await this.updateShare(this.share.id, properties)\r\n\r\n\t\t\t\t\t\tif (propertyNames.indexOf('password') >= 0) {\r\n\t\t\t\t\t\t\t// reset password state after sync\r\n\t\t\t\t\t\t\tthis.$delete(this.share, 'newPassword')\r\n\r\n\t\t\t\t\t\t\t// updates password expiration time after sync\r\n\t\t\t\t\t\t\tthis.share.passwordExpirationTime = updatedShare.password_expiration_time\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// clear any previous errors\r\n\t\t\t\t\t\tthis.$delete(this.errors, propertyNames[0])\r\n\r\n\t\t\t\t\t} catch ({ message }) {\r\n\t\t\t\t\t\tif (message && message !== '') {\r\n\t\t\t\t\t\t\tthis.onSyncError(propertyNames[0], message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tthis.saving = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\t// This share does not exists on the server yet\r\n\t\t\tconsole.debug('Updated local share', this.share)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Manage sync errors\r\n\t\t *\r\n\t\t * @param {string} property the errored property, e.g. 'password'\r\n\t\t * @param {string} message the error message\r\n\t\t */\r\n\t\tonSyncError(property, message) {\r\n\t\t\t// re-open menu if closed\r\n\t\t\tthis.open = true\r\n\t\t\tswitch (property) {\r\n\t\t\tcase 'password':\r\n\t\t\tcase 'pending':\r\n\t\t\tcase 'expireDate':\r\n\t\t\tcase 'label':\r\n\t\t\tcase 'note': {\r\n\t\t\t\t// show error\r\n\t\t\t\tthis.$set(this.errors, property, message)\r\n\r\n\t\t\t\tlet propertyEl = this.$refs[property]\r\n\t\t\t\tif (propertyEl) {\r\n\t\t\t\t\tif (propertyEl.$el) {\r\n\t\t\t\t\t\tpropertyEl = propertyEl.$el\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// focus if there is a focusable action element\r\n\t\t\t\t\tconst focusable = propertyEl.querySelector('.focusable')\r\n\t\t\t\t\tif (focusable) {\r\n\t\t\t\t\t\tfocusable.focus()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tcase 'sendPasswordByTalk': {\r\n\t\t\t\t// show error\r\n\t\t\t\tthis.$set(this.errors, property, message)\r\n\r\n\t\t\t\t// Restore previous state\r\n\t\t\t\tthis.share.sendPasswordByTalk = !this.share.sendPasswordByTalk\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Debounce queueUpdate to avoid requests spamming\r\n\t\t * more importantly for text data\r\n\t\t *\r\n\t\t * @param {string} property the property to sync\r\n\t\t */\r\n\t\tdebounceQueueUpdate: debounce(function(property) {\r\n\t\t\tthis.queueUpdate(property)\r\n\t\t}, 500),\r\n\t},\r\n}\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=script&lang=js&\"","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<SharingEntrySimple :key=\"share.id\"\r\n\t\tclass=\"sharing-entry__inherited\"\r\n\t\t:title=\"share.shareWithDisplayName\">\r\n\t\t<template #avatar>\r\n\t\t\t<NcAvatar :user=\"share.shareWith\"\r\n\t\t\t\t:display-name=\"share.shareWithDisplayName\"\r\n\t\t\t\tclass=\"sharing-entry__avatar\"\r\n\t\t\t\ttooltip-message=\"\" />\r\n\t\t</template>\r\n\t\t<NcActionText icon=\"icon-user\">\r\n\t\t\t{{ t('files_sharing', 'Added by {initiator}', { initiator: share.ownerDisplayName }) }}\r\n\t\t</NcActionText>\r\n\t\t<NcActionLink v-if=\"share.viaPath && share.viaFileid\"\r\n\t\t\ticon=\"icon-folder\"\r\n\t\t\t:href=\"viaFileTargetUrl\">\r\n\t\t\t{{ t('files_sharing', 'Via “{folder}”', {folder: viaFolderName} ) }}\r\n\t\t</NcActionLink>\r\n\t\t<NcActionButton v-if=\"share.canDelete\"\r\n\t\t\ticon=\"icon-close\"\r\n\t\t\t@click.prevent=\"onDelete\">\r\n\t\t\t{{ t('files_sharing', 'Unshare') }}\r\n\t\t</NcActionButton>\r\n\t</SharingEntrySimple>\r\n</template>\r\n\r\n<script>\r\nimport { generateUrl } from '@nextcloud/router'\r\nimport { basename } from '@nextcloud/paths'\r\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar'\r\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton'\r\nimport NcActionLink from '@nextcloud/vue/dist/Components/NcActionLink'\r\nimport NcActionText from '@nextcloud/vue/dist/Components/NcActionText'\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nimport Share from '../models/Share'\r\nimport SharesMixin from '../mixins/SharesMixin'\r\nimport SharingEntrySimple from '../components/SharingEntrySimple'\r\n\r\nexport default {\r\n\tname: 'SharingEntryInherited',\r\n\r\n\tcomponents: {\r\n\t\tNcActionButton,\r\n\t\tNcActionLink,\r\n\t\tNcActionText,\r\n\t\tNcAvatar,\r\n\t\tSharingEntrySimple,\r\n\t},\r\n\r\n\tmixins: [SharesMixin],\r\n\r\n\tprops: {\r\n\t\tshare: {\r\n\t\t\ttype: Share,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tviaFileTargetUrl() {\r\n\t\t\treturn generateUrl('/f/{fileid}', {\r\n\t\t\t\tfileid: this.share.viaFileid,\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tviaFolderName() {\r\n\t\t\treturn basename(this.share.viaPath)\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sharing-entry {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\theight: 44px;\r\n\t&__desc {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 8px;\r\n\t\tline-height: 1.2em;\r\n\t\tp {\r\n\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t}\r\n\t}\r\n\t&__actions {\r\n\t\tmargin-left: auto;\r\n\t}\r\n}\r\n</style>\r\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=style&index=0&id=06bd31b0&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=style&index=0&id=06bd31b0&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntryInherited.vue?vue&type=template&id=06bd31b0&scoped=true&\"\nimport script from \"./SharingEntryInherited.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingEntryInherited.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingEntryInherited.vue?vue&type=style&index=0&id=06bd31b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06bd31b0\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('06bd31b0')) {\n      api.createRecord('06bd31b0', component.options)\n    } else {\n      api.reload('06bd31b0', component.options)\n    }\n    module.hot.accept(\"./SharingEntryInherited.vue?vue&type=template&id=06bd31b0&scoped=true&\", function () {\n      api.rerender('06bd31b0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/SharingEntryInherited.vue\"\nexport default component.exports","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<ul id=\"sharing-inherited-shares\">\r\n\t\t<!-- Main collapsible entry -->\r\n\t\t<SharingEntrySimple class=\"sharing-entry__inherited\"\r\n\t\t\t:title=\"mainTitle\"\r\n\t\t\t:subtitle=\"subTitle\"\r\n\t\t\t:aria-expanded=\"showInheritedShares\">\r\n\t\t\t<template #avatar>\r\n\t\t\t\t<div class=\"avatar-shared icon-more-white\" />\r\n\t\t\t</template>\r\n\t\t\t<NcActionButton :icon=\"showInheritedSharesIcon\"\r\n\t\t\t\t:aria-label=\"mainTitle\"\r\n\t\t\t\t@click.prevent.stop=\"toggleInheritedShares\">\r\n\t\t\t\t{{ toggleTooltip }}\r\n\t\t\t</NcActionButton>\r\n\t\t</SharingEntrySimple>\r\n\r\n\t\t<!-- Inherited shares list -->\r\n\t\t<SharingEntryInherited v-for=\"share in shares\"\r\n\t\t\t:key=\"share.id\"\r\n\t\t\t:file-info=\"fileInfo\"\r\n\t\t\t:share=\"share\" />\r\n\t</ul>\r\n</template>\r\n\r\n<script>\r\nimport { generateOcsUrl } from '@nextcloud/router'\r\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton'\r\nimport axios from '@nextcloud/axios'\r\n\r\nimport Share from '../models/Share'\r\nimport SharingEntryInherited from '../components/SharingEntryInherited'\r\nimport SharingEntrySimple from '../components/SharingEntrySimple'\r\n\r\nexport default {\r\n\tname: 'SharingInherited',\r\n\r\n\tcomponents: {\r\n\t\tNcActionButton,\r\n\t\tSharingEntryInherited,\r\n\t\tSharingEntrySimple,\r\n\t},\r\n\r\n\tprops: {\r\n\t\tfileInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloaded: false,\r\n\t\t\tloading: false,\r\n\t\t\tshowInheritedShares: false,\r\n\t\t\tshares: [],\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tshowInheritedSharesIcon() {\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn 'icon-loading-small'\r\n\t\t\t}\r\n\t\t\tif (this.showInheritedShares) {\r\n\t\t\t\treturn 'icon-triangle-n'\r\n\t\t\t}\r\n\t\t\treturn 'icon-triangle-s'\r\n\t\t},\r\n\t\tmainTitle() {\r\n\t\t\treturn t('files_sharing', 'Others with access')\r\n\t\t},\r\n\t\tsubTitle() {\r\n\t\t\treturn (this.showInheritedShares && this.shares.length === 0)\r\n\t\t\t\t? t('files_sharing', 'No other users with access found')\r\n\t\t\t\t: ''\r\n\t\t},\r\n\t\ttoggleTooltip() {\r\n\t\t\treturn this.fileInfo.type === 'dir'\r\n\t\t\t\t? t('files_sharing', 'Toggle list of others with access to this directory')\r\n\t\t\t\t: t('files_sharing', 'Toggle list of others with access to this file')\r\n\t\t},\r\n\t\tfullPath() {\r\n\t\t\tconst path = `${this.fileInfo.path}/${this.fileInfo.name}`\r\n\t\t\treturn path.replace('//', '/')\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tfileInfo() {\r\n\t\t\tthis.resetState()\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Toggle the list view and fetch/reset the state\r\n\t\t */\r\n\t\ttoggleInheritedShares() {\r\n\t\t\tthis.showInheritedShares = !this.showInheritedShares\r\n\t\t\tif (this.showInheritedShares) {\r\n\t\t\t\tthis.fetchInheritedShares()\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetState()\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Fetch the Inherited Shares array\r\n\t\t */\r\n\t\tasync fetchInheritedShares() {\r\n\t\t\tthis.loading = true\r\n\t\t\ttry {\r\n\t\t\t\tconst url = generateOcsUrl('apps/files_sharing/api/v1/shares/inherited?format=json&path={path}', { path: this.fullPath })\r\n\t\t\t\tconst shares = await axios.get(url)\r\n\t\t\t\tthis.shares = shares.data.ocs.data\r\n\t\t\t\t\t.map(share => new Share(share))\r\n\t\t\t\t\t.sort((a, b) => b.createdTime - a.createdTime)\r\n\t\t\t\tconsole.info(this.shares)\r\n\t\t\t\tthis.loaded = true\r\n\t\t\t} catch (error) {\r\n\t\t\t\tOC.Notification.showTemporary(t('files_sharing', 'Unable to fetch inherited shares'), { type: 'error' })\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Reset current component state\r\n\t\t */\r\n\t\tresetState() {\r\n\t\t\tthis.loaded = false\r\n\t\t\tthis.loading = false\r\n\t\t\tthis.showInheritedShares = false\r\n\t\t\tthis.shares = []\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sharing-entry__inherited {\r\n\t.avatar-shared {\r\n\t\twidth: 32px;\r\n\t\theight: 32px;\r\n\t\tline-height: 32px;\r\n\t\tfont-size: 18px;\r\n\t\tbackground-color: var(--color-text-maxcontrast);\r\n\t\tborder-radius: 50%;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=style&index=0&id=3f1bda78&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=style&index=0&id=3f1bda78&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingInherited.vue?vue&type=template&id=3f1bda78&scoped=true&\"\nimport script from \"./SharingInherited.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingInherited.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingInherited.vue?vue&type=style&index=0&id=3f1bda78&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f1bda78\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3f1bda78')) {\n      api.createRecord('3f1bda78', component.options)\n    } else {\n      api.reload('3f1bda78', component.options)\n    }\n    module.hot.accept(\"./SharingInherited.vue?vue&type=template&id=3f1bda78&scoped=true&\", function () {\n      api.rerender('3f1bda78', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/views/SharingInherited.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.canLinkShare\n    ? _c(\n        \"ul\",\n        { staticClass: \"sharing-link-list\" },\n        [\n          !_vm.hasLinkShares && _vm.canReshare\n            ? _c(\"SharingEntryLink\", {\n                attrs: {\n                  \"can-reshare\": _vm.canReshare,\n                  \"file-info\": _vm.fileInfo,\n                },\n                on: { \"add:share\": _vm.addShare },\n              })\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm.hasShares\n            ? _vm._l(_vm.shares, function (share, index) {\n                return _c(\"SharingEntryLink\", {\n                  key: share.id,\n                  attrs: {\n                    \"can-reshare\": _vm.canReshare,\n                    share: _vm.shares[index],\n                    \"file-info\": _vm.fileInfo,\n                  },\n                  on: {\n                    \"update:share\": [\n                      function ($event) {\n                        return _vm.$set(_vm.shares, index, $event)\n                      },\n                      function ($event) {\n                        return _vm.awaitForShare.apply(void 0, arguments)\n                      },\n                    ],\n                    \"add:share\": function ($event) {\n                      return _vm.addShare.apply(void 0, arguments)\n                    },\n                    \"remove:share\": _vm.removeShare,\n                  },\n                })\n              })\n            : _vm._e(),\n        ],\n        2\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"li\",\n    {\n      staticClass: \"sharing-entry sharing-entry__link\",\n      class: { \"sharing-entry--share\": _vm.share },\n    },\n    [\n      _c(\"NcAvatar\", {\n        staticClass: \"sharing-entry__avatar\",\n        attrs: {\n          \"is-no-user\": true,\n          \"icon-class\": _vm.isEmailShareType\n            ? \"avatar-link-share icon-mail-white\"\n            : \"avatar-link-share icon-public-white\",\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"sharing-entry__desc\" }, [\n        _c(\n          \"span\",\n          { staticClass: \"sharing-entry__title\", attrs: { title: _vm.title } },\n          [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.title) + \"\\n\\t\\t\")]\n        ),\n        _vm._v(\" \"),\n        _vm.subtitle\n          ? _c(\"p\", [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.subtitle) + \"\\n\\t\\t\")])\n          : _vm._e(),\n      ]),\n      _vm._v(\" \"),\n      _vm.share && !_vm.isEmailShareType && _vm.share.token\n        ? _c(\n            \"NcActions\",\n            { ref: \"copyButton\", staticClass: \"sharing-entry__copy\" },\n            [\n              _c(\n                \"NcActionLink\",\n                {\n                  attrs: {\n                    href: _vm.shareLink,\n                    target: \"_blank\",\n                    \"aria-label\": _vm.t(\n                      \"files_sharing\",\n                      \"Copy public link to clipboard\"\n                    ),\n                    icon:\n                      _vm.copied && _vm.copySuccess\n                        ? \"icon-checkmark-color\"\n                        : \"icon-clippy\",\n                  },\n                  on: {\n                    click: function ($event) {\n                      $event.stopPropagation()\n                      $event.preventDefault()\n                      return _vm.copyLink.apply(null, arguments)\n                    },\n                  },\n                },\n                [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.clipboardTooltip) + \"\\n\\t\\t\")]\n              ),\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      !_vm.pending && (_vm.pendingPassword || _vm.pendingExpirationDate)\n        ? _c(\n            \"NcActions\",\n            {\n              staticClass: \"sharing-entry__actions\",\n              attrs: { \"menu-align\": \"right\", open: _vm.open },\n              on: {\n                \"update:open\": function ($event) {\n                  _vm.open = $event\n                },\n                close: _vm.onNewLinkShare,\n              },\n            },\n            [\n              _vm.errors.pending\n                ? _c(\n                    \"NcActionText\",\n                    {\n                      class: { error: _vm.errors.pending },\n                      attrs: { icon: \"icon-error\" },\n                    },\n                    [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.errors.pending) + \"\\n\\t\\t\")]\n                  )\n                : _c(\"NcActionText\", { attrs: { icon: \"icon-info\" } }, [\n                    _vm._v(\n                      \"\\n\\t\\t\\t\" +\n                        _vm._s(\n                          _vm.t(\n                            \"files_sharing\",\n                            \"Please enter the following required information before creating the share\"\n                          )\n                        ) +\n                        \"\\n\\t\\t\"\n                    ),\n                  ]),\n              _vm._v(\" \"),\n              _vm.pendingPassword\n                ? _c(\"NcActionText\", { attrs: { icon: \"icon-password\" } }, [\n                    _vm._v(\n                      \"\\n\\t\\t\\t\" +\n                        _vm._s(\n                          _vm.t(\n                            \"files_sharing\",\n                            \"Password protection (enforced)\"\n                          )\n                        ) +\n                        \"\\n\\t\\t\"\n                    ),\n                  ])\n                : _vm.config.enableLinkPasswordByDefault\n                ? _c(\n                    \"NcActionCheckbox\",\n                    {\n                      staticClass: \"share-link-password-checkbox\",\n                      attrs: {\n                        checked: _vm.isPasswordProtected,\n                        disabled:\n                          _vm.config.enforcePasswordForPublicLink || _vm.saving,\n                      },\n                      on: {\n                        \"update:checked\": function ($event) {\n                          _vm.isPasswordProtected = $event\n                        },\n                        uncheck: _vm.onPasswordDisable,\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n\\t\\t\\t\" +\n                          _vm._s(\n                            _vm.t(\"files_sharing\", \"Password protection\")\n                          ) +\n                          \"\\n\\t\\t\"\n                      ),\n                    ]\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.pendingPassword || _vm.share.password\n                ? _c(\n                    \"NcActionInput\",\n                    {\n                      directives: [\n                        {\n                          name: \"tooltip\",\n                          rawName: \"v-tooltip.auto\",\n                          value: {\n                            content: _vm.errors.password,\n                            show: _vm.errors.password,\n                            trigger: \"manual\",\n                            defaultContainer: \"#app-sidebar\",\n                          },\n                          expression:\n                            \"{\\n\\t\\t\\t\\tcontent: errors.password,\\n\\t\\t\\t\\tshow: errors.password,\\n\\t\\t\\t\\ttrigger: 'manual',\\n\\t\\t\\t\\tdefaultContainer: '#app-sidebar'\\n\\t\\t\\t}\",\n                          modifiers: { auto: true },\n                        },\n                      ],\n                      staticClass: \"share-link-password\",\n                      attrs: {\n                        value: _vm.share.password,\n                        disabled: _vm.saving,\n                        required:\n                          _vm.config.enableLinkPasswordByDefault ||\n                          _vm.config.enforcePasswordForPublicLink,\n                        minlength:\n                          _vm.isPasswordPolicyEnabled &&\n                          _vm.config.passwordPolicy.minLength,\n                        icon: \"\",\n                        autocomplete: \"new-password\",\n                      },\n                      on: {\n                        \"update:value\": function ($event) {\n                          return _vm.$set(_vm.share, \"password\", $event)\n                        },\n                        submit: _vm.onNewLinkShare,\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n\\t\\t\\t\" +\n                          _vm._s(_vm.t(\"files_sharing\", \"Enter a password\")) +\n                          \"\\n\\t\\t\"\n                      ),\n                    ]\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.pendingExpirationDate\n                ? _c(\n                    \"NcActionText\",\n                    { attrs: { icon: \"icon-calendar-dark\" } },\n                    [\n                      _vm._v(\n                        \"\\n\\t\\t\\t\" +\n                          _vm._s(\n                            _vm.t(\"files_sharing\", \"Expiration date (enforced)\")\n                          ) +\n                          \"\\n\\t\\t\"\n                      ),\n                    ]\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.pendingExpirationDate\n                ? _c(\n                    \"NcActionInput\",\n                    {\n                      staticClass: \"share-link-expire-date\",\n                      attrs: {\n                        disabled: _vm.saving,\n                        \"is-native-picker\": true,\n                        \"hide-label\": true,\n                        value: new Date(_vm.share.expireDate),\n                        type: \"date\",\n                        min: _vm.dateTomorrow,\n                        max: _vm.dateMaxEnforced,\n                      },\n                      on: { input: _vm.onExpirationChange },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n\\t\\t\\t\" +\n                          _vm._s(_vm.t(\"files_sharing\", \"Enter a date\")) +\n                          \"\\n\\t\\t\"\n                      ),\n                    ]\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _c(\n                \"NcActionButton\",\n                {\n                  attrs: { icon: \"icon-checkmark\" },\n                  on: {\n                    click: function ($event) {\n                      $event.preventDefault()\n                      $event.stopPropagation()\n                      return _vm.onNewLinkShare.apply(null, arguments)\n                    },\n                  },\n                },\n                [\n                  _vm._v(\n                    \"\\n\\t\\t\\t\" +\n                      _vm._s(_vm.t(\"files_sharing\", \"Create share\")) +\n                      \"\\n\\t\\t\"\n                  ),\n                ]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"NcActionButton\",\n                {\n                  attrs: { icon: \"icon-close\" },\n                  on: {\n                    click: function ($event) {\n                      $event.preventDefault()\n                      $event.stopPropagation()\n                      return _vm.onCancel.apply(null, arguments)\n                    },\n                  },\n                },\n                [\n                  _vm._v(\n                    \"\\n\\t\\t\\t\" +\n                      _vm._s(_vm.t(\"files_sharing\", \"Cancel\")) +\n                      \"\\n\\t\\t\"\n                  ),\n                ]\n              ),\n            ],\n            1\n          )\n        : !_vm.loading\n        ? _c(\n            \"NcActions\",\n            {\n              staticClass: \"sharing-entry__actions\",\n              attrs: { \"menu-align\": \"right\", open: _vm.open },\n              on: {\n                \"update:open\": function ($event) {\n                  _vm.open = $event\n                },\n                close: _vm.onMenuClose,\n              },\n            },\n            [\n              _vm.share\n                ? [\n                    _vm.share.canEdit && _vm.canReshare\n                      ? [\n                          _c(\n                            \"NcActionInput\",\n                            {\n                              directives: [\n                                {\n                                  name: \"tooltip\",\n                                  rawName: \"v-tooltip.auto\",\n                                  value: {\n                                    content: _vm.errors.label,\n                                    show: _vm.errors.label,\n                                    trigger: \"manual\",\n                                    defaultContainer: \".app-sidebar\",\n                                  },\n                                  expression:\n                                    \"{\\n\\t\\t\\t\\t\\t\\tcontent: errors.label,\\n\\t\\t\\t\\t\\t\\tshow: errors.label,\\n\\t\\t\\t\\t\\t\\ttrigger: 'manual',\\n\\t\\t\\t\\t\\t\\tdefaultContainer: '.app-sidebar'\\n\\t\\t\\t\\t\\t}\",\n                                  modifiers: { auto: true },\n                                },\n                              ],\n                              ref: \"label\",\n                              class: { error: _vm.errors.label },\n                              attrs: {\n                                disabled: _vm.saving,\n                                \"aria-label\": _vm.t(\n                                  \"files_sharing\",\n                                  \"Share label\"\n                                ),\n                                value:\n                                  _vm.share.newLabel !== undefined\n                                    ? _vm.share.newLabel\n                                    : _vm.share.label,\n                                icon: \"icon-edit\",\n                                maxlength: \"255\",\n                              },\n                              on: {\n                                \"update:value\": _vm.onLabelChange,\n                                submit: _vm.onLabelSubmit,\n                              },\n                            },\n                            [\n                              _vm._v(\n                                \"\\n\\t\\t\\t\\t\\t\" +\n                                  _vm._s(\n                                    _vm.t(\"files_sharing\", \"Share label\")\n                                  ) +\n                                  \"\\n\\t\\t\\t\\t\"\n                              ),\n                            ]\n                          ),\n                          _vm._v(\" \"),\n                          _c(\"SharePermissionsEditor\", {\n                            attrs: {\n                              \"can-reshare\": _vm.canReshare,\n                              share: _vm.share,\n                              \"file-info\": _vm.fileInfo,\n                            },\n                            on: {\n                              \"update:share\": function ($event) {\n                                _vm.share = $event\n                              },\n                            },\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"NcActionSeparator\"),\n                          _vm._v(\" \"),\n                          _c(\n                            \"NcActionCheckbox\",\n                            {\n                              attrs: {\n                                checked: _vm.share.hideDownload,\n                                disabled:\n                                  _vm.saving || _vm.canChangeHideDownload,\n                              },\n                              on: {\n                                \"update:checked\": function ($event) {\n                                  return _vm.$set(\n                                    _vm.share,\n                                    \"hideDownload\",\n                                    $event\n                                  )\n                                },\n                                change: function ($event) {\n                                  return _vm.queueUpdate(\"hideDownload\")\n                                },\n                              },\n                            },\n                            [\n                              _vm._v(\n                                \"\\n\\t\\t\\t\\t\\t\" +\n                                  _vm._s(\n                                    _vm.t(\"files_sharing\", \"Hide download\")\n                                  ) +\n                                  \"\\n\\t\\t\\t\\t\"\n                              ),\n                            ]\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"NcActionCheckbox\",\n                            {\n                              staticClass: \"share-link-password-checkbox\",\n                              attrs: {\n                                checked: _vm.isPasswordProtected,\n                                disabled:\n                                  _vm.config.enforcePasswordForPublicLink ||\n                                  _vm.saving,\n                              },\n                              on: {\n                                \"update:checked\": function ($event) {\n                                  _vm.isPasswordProtected = $event\n                                },\n                                uncheck: _vm.onPasswordDisable,\n                              },\n                            },\n                            [\n                              _vm._v(\n                                \"\\n\\t\\t\\t\\t\\t\" +\n                                  _vm._s(\n                                    _vm.config.enforcePasswordForPublicLink\n                                      ? _vm.t(\n                                          \"files_sharing\",\n                                          \"Password protection (enforced)\"\n                                        )\n                                      : _vm.t(\n                                          \"files_sharing\",\n                                          \"Password protect\"\n                                        )\n                                  ) +\n                                  \"\\n\\t\\t\\t\\t\"\n                              ),\n                            ]\n                          ),\n                          _vm._v(\" \"),\n                          _vm.isPasswordProtected\n                            ? _c(\n                                \"NcActionInput\",\n                                {\n                                  directives: [\n                                    {\n                                      name: \"tooltip\",\n                                      rawName: \"v-tooltip.auto\",\n                                      value: {\n                                        content: _vm.errors.password,\n                                        show: _vm.errors.password,\n                                        trigger: \"manual\",\n                                        defaultContainer: \"#app-sidebar\",\n                                      },\n                                      expression:\n                                        \"{\\n\\t\\t\\t\\t\\t\\tcontent: errors.password,\\n\\t\\t\\t\\t\\t\\tshow: errors.password,\\n\\t\\t\\t\\t\\t\\ttrigger: 'manual',\\n\\t\\t\\t\\t\\t\\tdefaultContainer: '#app-sidebar'\\n\\t\\t\\t\\t\\t}\",\n                                      modifiers: { auto: true },\n                                    },\n                                  ],\n                                  ref: \"password\",\n                                  staticClass: \"share-link-password\",\n                                  class: { error: _vm.errors.password },\n                                  attrs: {\n                                    disabled: _vm.saving,\n                                    required:\n                                      _vm.config.enforcePasswordForPublicLink,\n                                    value: _vm.hasUnsavedPassword\n                                      ? _vm.share.newPassword\n                                      : \"***************\",\n                                    icon: \"icon-password\",\n                                    autocomplete: \"new-password\",\n                                    type: _vm.hasUnsavedPassword\n                                      ? \"text\"\n                                      : \"password\",\n                                  },\n                                  on: {\n                                    \"update:value\": _vm.onPasswordChange,\n                                    submit: _vm.onPasswordSubmit,\n                                  },\n                                },\n                                [\n                                  _vm._v(\n                                    \"\\n\\t\\t\\t\\t\\t\" +\n                                      _vm._s(\n                                        _vm.t(\n                                          \"files_sharing\",\n                                          \"Enter a password\"\n                                        )\n                                      ) +\n                                      \"\\n\\t\\t\\t\\t\"\n                                  ),\n                                ]\n                              )\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          _vm.isEmailShareType && _vm.passwordExpirationTime\n                            ? _c(\n                                \"NcActionText\",\n                                { attrs: { icon: \"icon-info\" } },\n                                [\n                                  _vm._v(\n                                    \"\\n\\t\\t\\t\\t\\t\" +\n                                      _vm._s(\n                                        _vm.t(\n                                          \"files_sharing\",\n                                          \"Password expires {passwordExpirationTime}\",\n                                          {\n                                            passwordExpirationTime:\n                                              _vm.passwordExpirationTime,\n                                          }\n                                        )\n                                      ) +\n                                      \"\\n\\t\\t\\t\\t\"\n                                  ),\n                                ]\n                              )\n                            : _vm.isEmailShareType &&\n                              _vm.passwordExpirationTime !== null\n                            ? _c(\n                                \"NcActionText\",\n                                { attrs: { icon: \"icon-error\" } },\n                                [\n                                  _vm._v(\n                                    \"\\n\\t\\t\\t\\t\\t\" +\n                                      _vm._s(\n                                        _vm.t(\n                                          \"files_sharing\",\n                                          \"Password expired\"\n                                        )\n                                      ) +\n                                      \"\\n\\t\\t\\t\\t\"\n                                  ),\n                                ]\n                              )\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          _vm.isPasswordProtectedByTalkAvailable\n                            ? _c(\n                                \"NcActionCheckbox\",\n                                {\n                                  staticClass:\n                                    \"share-link-password-talk-checkbox\",\n                                  attrs: {\n                                    checked: _vm.isPasswordProtectedByTalk,\n                                    disabled:\n                                      !_vm.canTogglePasswordProtectedByTalkAvailable ||\n                                      _vm.saving,\n                                  },\n                                  on: {\n                                    \"update:checked\": function ($event) {\n                                      _vm.isPasswordProtectedByTalk = $event\n                                    },\n                                    change: _vm.onPasswordProtectedByTalkChange,\n                                  },\n                                },\n                                [\n                                  _vm._v(\n                                    \"\\n\\t\\t\\t\\t\\t\" +\n                                      _vm._s(\n                                        _vm.t(\n                                          \"files_sharing\",\n                                          \"Video verification\"\n                                        )\n                                      ) +\n                                      \"\\n\\t\\t\\t\\t\"\n                                  ),\n                                ]\n                              )\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          _c(\n                            \"NcActionCheckbox\",\n                            {\n                              staticClass: \"share-link-expire-date-checkbox\",\n                              attrs: {\n                                checked: _vm.hasExpirationDate,\n                                disabled:\n                                  _vm.config.isDefaultExpireDateEnforced ||\n                                  _vm.saving,\n                              },\n                              on: {\n                                \"update:checked\": function ($event) {\n                                  _vm.hasExpirationDate = $event\n                                },\n                                uncheck: _vm.onExpirationDisable,\n                              },\n                            },\n                            [\n                              _vm._v(\n                                \"\\n\\t\\t\\t\\t\\t\" +\n                                  _vm._s(\n                                    _vm.config.isDefaultExpireDateEnforced\n                                      ? _vm.t(\n                                          \"files_sharing\",\n                                          \"Expiration date (enforced)\"\n                                        )\n                                      : _vm.t(\n                                          \"files_sharing\",\n                                          \"Set expiration date\"\n                                        )\n                                  ) +\n                                  \"\\n\\t\\t\\t\\t\"\n                              ),\n                            ]\n                          ),\n                          _vm._v(\" \"),\n                          _vm.hasExpirationDate\n                            ? _c(\n                                \"NcActionInput\",\n                                {\n                                  ref: \"expireDate\",\n                                  staticClass: \"share-link-expire-date\",\n                                  class: { error: _vm.errors.expireDate },\n                                  attrs: {\n                                    \"is-native-picker\": true,\n                                    \"hide-label\": true,\n                                    disabled: _vm.saving,\n                                    value: new Date(_vm.share.expireDate),\n                                    type: \"date\",\n                                    min: _vm.dateTomorrow,\n                                    max: _vm.dateMaxEnforced,\n                                  },\n                                  on: { input: _vm.onExpirationChange },\n                                },\n                                [\n                                  _vm._v(\n                                    \"\\n\\t\\t\\t\\t\\t\" +\n                                      _vm._s(\n                                        _vm.t(\"files_sharing\", \"Enter a date\")\n                                      ) +\n                                      \"\\n\\t\\t\\t\\t\"\n                                  ),\n                                ]\n                              )\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          _c(\n                            \"NcActionCheckbox\",\n                            {\n                              attrs: {\n                                checked: _vm.hasNote,\n                                disabled: _vm.saving,\n                              },\n                              on: {\n                                \"update:checked\": function ($event) {\n                                  _vm.hasNote = $event\n                                },\n                                uncheck: function ($event) {\n                                  return _vm.queueUpdate(\"note\")\n                                },\n                              },\n                            },\n                            [\n                              _vm._v(\n                                \"\\n\\t\\t\\t\\t\\t\" +\n                                  _vm._s(\n                                    _vm.t(\"files_sharing\", \"Note to recipient\")\n                                  ) +\n                                  \"\\n\\t\\t\\t\\t\"\n                              ),\n                            ]\n                          ),\n                          _vm._v(\" \"),\n                          _vm.hasNote\n                            ? _c(\"NcActionTextEditable\", {\n                                directives: [\n                                  {\n                                    name: \"tooltip\",\n                                    rawName: \"v-tooltip.auto\",\n                                    value: {\n                                      content: _vm.errors.note,\n                                      show: _vm.errors.note,\n                                      trigger: \"manual\",\n                                      defaultContainer: \"#app-sidebar\",\n                                    },\n                                    expression:\n                                      \"{\\n\\t\\t\\t\\t\\t\\tcontent: errors.note,\\n\\t\\t\\t\\t\\t\\tshow: errors.note,\\n\\t\\t\\t\\t\\t\\ttrigger: 'manual',\\n\\t\\t\\t\\t\\t\\tdefaultContainer: '#app-sidebar'\\n\\t\\t\\t\\t\\t}\",\n                                    modifiers: { auto: true },\n                                  },\n                                ],\n                                ref: \"note\",\n                                class: { error: _vm.errors.note },\n                                attrs: {\n                                  disabled: _vm.saving,\n                                  placeholder: _vm.t(\n                                    \"files_sharing\",\n                                    \"Enter a note for the share recipient\"\n                                  ),\n                                  value: _vm.share.newNote || _vm.share.note,\n                                  icon: \"icon-edit\",\n                                },\n                                on: {\n                                  \"update:value\": _vm.onNoteChange,\n                                  submit: _vm.onNoteSubmit,\n                                },\n                              })\n                            : _vm._e(),\n                        ]\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _c(\"NcActionSeparator\"),\n                    _vm._v(\" \"),\n                    _vm._l(_vm.externalLinkActions, function (action) {\n                      return _c(\"ExternalShareAction\", {\n                        key: action.id,\n                        attrs: {\n                          id: action.id,\n                          action: action,\n                          \"file-info\": _vm.fileInfo,\n                          share: _vm.share,\n                        },\n                      })\n                    }),\n                    _vm._v(\" \"),\n                    _vm._l(\n                      _vm.externalLegacyLinkActions,\n                      function (ref, index) {\n                        var icon = ref.icon\n                        var url = ref.url\n                        var name = ref.name\n                        return _c(\n                          \"NcActionLink\",\n                          {\n                            key: index,\n                            attrs: {\n                              href: url(_vm.shareLink),\n                              icon: icon,\n                              target: \"_blank\",\n                            },\n                          },\n                          [_vm._v(\"\\n\\t\\t\\t\\t\" + _vm._s(name) + \"\\n\\t\\t\\t\")]\n                        )\n                      }\n                    ),\n                    _vm._v(\" \"),\n                    _vm.share.canDelete\n                      ? _c(\n                          \"NcActionButton\",\n                          {\n                            attrs: { icon: \"icon-close\", disabled: _vm.saving },\n                            on: {\n                              click: function ($event) {\n                                $event.preventDefault()\n                                return _vm.onDelete.apply(null, arguments)\n                              },\n                            },\n                          },\n                          [\n                            _vm._v(\n                              \"\\n\\t\\t\\t\\t\" +\n                                _vm._s(_vm.t(\"files_sharing\", \"Unshare\")) +\n                                \"\\n\\t\\t\\t\"\n                            ),\n                          ]\n                        )\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    !_vm.isEmailShareType && _vm.canReshare\n                      ? _c(\n                          \"NcActionButton\",\n                          {\n                            staticClass: \"new-share-link\",\n                            attrs: { icon: \"icon-add\" },\n                            on: {\n                              click: function ($event) {\n                                $event.preventDefault()\n                                $event.stopPropagation()\n                                return _vm.onNewLinkShare.apply(null, arguments)\n                              },\n                            },\n                          },\n                          [\n                            _vm._v(\n                              \"\\n\\t\\t\\t\\t\" +\n                                _vm._s(\n                                  _vm.t(\"files_sharing\", \"Add another link\")\n                                ) +\n                                \"\\n\\t\\t\\t\"\n                            ),\n                          ]\n                        )\n                      : _vm._e(),\n                  ]\n                : _vm.canReshare\n                ? _c(\n                    \"NcActionButton\",\n                    {\n                      staticClass: \"new-share-link\",\n                      attrs: {\n                        icon: _vm.loading ? \"icon-loading-small\" : \"icon-add\",\n                      },\n                      on: {\n                        click: function ($event) {\n                          $event.preventDefault()\n                          $event.stopPropagation()\n                          return _vm.onNewLinkShare.apply(null, arguments)\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n\\t\\t\\t\" +\n                          _vm._s(\n                            _vm.t(\"files_sharing\", \"Create a new share link\")\n                          ) +\n                          \"\\n\\t\\t\"\n                      ),\n                    ]\n                  )\n                : _vm._e(),\n            ],\n            2\n          )\n        : _c(\"div\", {\n            staticClass: \"icon-loading-small sharing-entry__loading\",\n          }),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    _vm.data.is,\n    _vm._g(\n      _vm._b({ tag: \"Component\" }, \"Component\", _vm.data, false),\n      _vm.action.handlers\n    ),\n    [_vm._v(\"\\n\\t\" + _vm._s(_vm.data.text) + \"\\n\")]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<!--\r\n  - @copyright Copyright (c) 2021 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<Component :is=\"data.is\"\r\n\t\tv-bind=\"data\"\r\n\t\tv-on=\"action.handlers\">\r\n\t\t{{ data.text }}\r\n\t</Component>\r\n</template>\r\n\r\n<script>\r\nimport Share from '../models/Share'\r\n\r\nexport default {\r\n\tname: 'ExternalShareAction',\r\n\r\n\tprops: {\r\n\t\tid: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\taction: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({}),\r\n\t\t},\r\n\t\tfileInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tshare: {\r\n\t\t\ttype: Share,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tdata() {\r\n\t\t\treturn this.action.data(this)\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExternalShareAction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExternalShareAction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExternalShareAction.vue?vue&type=template&id=27835356&\"\nimport script from \"./ExternalShareAction.vue?vue&type=script&lang=js&\"\nexport * from \"./ExternalShareAction.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('27835356')) {\n      api.createRecord('27835356', component.options)\n    } else {\n      api.reload('27835356', component.options)\n    }\n    module.hot.accept(\"./ExternalShareAction.vue?vue&type=template&id=27835356&\", function () {\n      api.rerender('27835356', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/ExternalShareAction.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"li\", [\n    _c(\n      \"ul\",\n      [\n        !_vm.isFolder\n          ? _c(\n              \"NcActionCheckbox\",\n              {\n                attrs: {\n                  checked: _vm.shareHasPermissions(\n                    _vm.atomicPermissions.UPDATE\n                  ),\n                  disabled: _vm.saving,\n                },\n                on: {\n                  \"update:checked\": function ($event) {\n                    return _vm.toggleSharePermissions(\n                      _vm.atomicPermissions.UPDATE\n                    )\n                  },\n                },\n              },\n              [\n                _vm._v(\n                  \"\\n\\t\\t\\t\" +\n                    _vm._s(_vm.t(\"files_sharing\", \"Allow editing\")) +\n                    \"\\n\\t\\t\"\n                ),\n              ]\n            )\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.isFolder &&\n        _vm.fileHasCreatePermission &&\n        _vm.config.isPublicUploadEnabled\n          ? [\n              !_vm.showCustomPermissionsForm\n                ? [\n                    _c(\n                      \"NcActionRadio\",\n                      {\n                        attrs: {\n                          checked: _vm.sharePermissionEqual(\n                            _vm.bundledPermissions.READ_ONLY\n                          ),\n                          value: _vm.bundledPermissions.READ_ONLY,\n                          name: _vm.randomFormName,\n                          disabled: _vm.saving,\n                        },\n                        on: {\n                          change: function ($event) {\n                            return _vm.setSharePermissions(\n                              _vm.bundledPermissions.READ_ONLY\n                            )\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\\t\" +\n                            _vm._s(_vm.t(\"files_sharing\", \"Read only\")) +\n                            \"\\n\\t\\t\\t\\t\"\n                        ),\n                      ]\n                    ),\n                    _vm._v(\" \"),\n                    _c(\n                      \"NcActionRadio\",\n                      {\n                        attrs: {\n                          checked: _vm.sharePermissionEqual(\n                            _vm.bundledPermissions.UPLOAD_AND_UPDATE\n                          ),\n                          value: _vm.bundledPermissions.UPLOAD_AND_UPDATE,\n                          disabled: _vm.saving,\n                          name: _vm.randomFormName,\n                        },\n                        on: {\n                          change: function ($event) {\n                            return _vm.setSharePermissions(\n                              _vm.bundledPermissions.UPLOAD_AND_UPDATE\n                            )\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\\t\" +\n                            _vm._s(\n                              _vm.t(\"files_sharing\", \"Allow upload and editing\")\n                            ) +\n                            \"\\n\\t\\t\\t\\t\"\n                        ),\n                      ]\n                    ),\n                    _vm._v(\" \"),\n                    _c(\n                      \"NcActionRadio\",\n                      {\n                        staticClass: \"sharing-entry__action--public-upload\",\n                        attrs: {\n                          checked: _vm.sharePermissionEqual(\n                            _vm.bundledPermissions.FILE_DROP\n                          ),\n                          value: _vm.bundledPermissions.FILE_DROP,\n                          disabled: _vm.saving,\n                          name: _vm.randomFormName,\n                        },\n                        on: {\n                          change: function ($event) {\n                            return _vm.setSharePermissions(\n                              _vm.bundledPermissions.FILE_DROP\n                            )\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\\t\" +\n                            _vm._s(\n                              _vm.t(\"files_sharing\", \"File drop (upload only)\")\n                            ) +\n                            \"\\n\\t\\t\\t\\t\"\n                        ),\n                      ]\n                    ),\n                    _vm._v(\" \"),\n                    _c(\n                      \"NcActionButton\",\n                      {\n                        attrs: {\n                          title: _vm.t(\"files_sharing\", \"Custom permissions\"),\n                        },\n                        on: {\n                          click: function ($event) {\n                            _vm.showCustomPermissionsForm = true\n                          },\n                        },\n                        scopedSlots: _vm._u(\n                          [\n                            {\n                              key: \"icon\",\n                              fn: function () {\n                                return [_c(\"Tune\")]\n                              },\n                              proxy: true,\n                            },\n                          ],\n                          null,\n                          false,\n                          961531849\n                        ),\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\\t\" +\n                            _vm._s(\n                              _vm.sharePermissionsIsBundle\n                                ? \"\"\n                                : _vm.sharePermissionsSummary\n                            ) +\n                            \"\\n\\t\\t\\t\\t\"\n                        ),\n                      ]\n                    ),\n                  ]\n                : _c(\n                    \"span\",\n                    { class: { error: !_vm.sharePermissionsSetIsValid } },\n                    [\n                      _c(\n                        \"NcActionCheckbox\",\n                        {\n                          attrs: {\n                            checked: _vm.shareHasPermissions(\n                              _vm.atomicPermissions.READ\n                            ),\n                            disabled:\n                              _vm.saving ||\n                              !_vm.canToggleSharePermissions(\n                                _vm.atomicPermissions.READ\n                              ),\n                          },\n                          on: {\n                            \"update:checked\": function ($event) {\n                              return _vm.toggleSharePermissions(\n                                _vm.atomicPermissions.READ\n                              )\n                            },\n                          },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n\\t\\t\\t\\t\\t\" +\n                              _vm._s(_vm.t(\"files_sharing\", \"Read\")) +\n                              \"\\n\\t\\t\\t\\t\"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"NcActionCheckbox\",\n                        {\n                          attrs: {\n                            checked: _vm.shareHasPermissions(\n                              _vm.atomicPermissions.CREATE\n                            ),\n                            disabled:\n                              _vm.saving ||\n                              !_vm.canToggleSharePermissions(\n                                _vm.atomicPermissions.CREATE\n                              ),\n                          },\n                          on: {\n                            \"update:checked\": function ($event) {\n                              return _vm.toggleSharePermissions(\n                                _vm.atomicPermissions.CREATE\n                              )\n                            },\n                          },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n\\t\\t\\t\\t\\t\" +\n                              _vm._s(_vm.t(\"files_sharing\", \"Upload\")) +\n                              \"\\n\\t\\t\\t\\t\"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"NcActionCheckbox\",\n                        {\n                          attrs: {\n                            checked: _vm.shareHasPermissions(\n                              _vm.atomicPermissions.UPDATE\n                            ),\n                            disabled:\n                              _vm.saving ||\n                              !_vm.canToggleSharePermissions(\n                                _vm.atomicPermissions.UPDATE\n                              ),\n                          },\n                          on: {\n                            \"update:checked\": function ($event) {\n                              return _vm.toggleSharePermissions(\n                                _vm.atomicPermissions.UPDATE\n                              )\n                            },\n                          },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n\\t\\t\\t\\t\\t\" +\n                              _vm._s(_vm.t(\"files_sharing\", \"Edit\")) +\n                              \"\\n\\t\\t\\t\\t\"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"NcActionCheckbox\",\n                        {\n                          attrs: {\n                            checked: _vm.shareHasPermissions(\n                              _vm.atomicPermissions.DELETE\n                            ),\n                            disabled:\n                              _vm.saving ||\n                              !_vm.canToggleSharePermissions(\n                                _vm.atomicPermissions.DELETE\n                              ),\n                          },\n                          on: {\n                            \"update:checked\": function ($event) {\n                              return _vm.toggleSharePermissions(\n                                _vm.atomicPermissions.DELETE\n                              )\n                            },\n                          },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n\\t\\t\\t\\t\\t\" +\n                              _vm._s(_vm.t(\"files_sharing\", \"Delete\")) +\n                              \"\\n\\t\\t\\t\\t\"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"NcActionButton\",\n                        {\n                          on: {\n                            click: function ($event) {\n                              _vm.showCustomPermissionsForm = false\n                            },\n                          },\n                          scopedSlots: _vm._u(\n                            [\n                              {\n                                key: \"icon\",\n                                fn: function () {\n                                  return [_c(\"ChevronLeft\")]\n                                },\n                                proxy: true,\n                              },\n                            ],\n                            null,\n                            false,\n                            1018742195\n                          ),\n                        },\n                        [\n                          _vm._v(\n                            \"\\n\\t\\t\\t\\t\\t\" +\n                              _vm._s(\n                                _vm.t(\"files_sharing\", \"Bundled permissions\")\n                              ) +\n                              \"\\n\\t\\t\\t\\t\"\n                          ),\n                        ]\n                      ),\n                    ],\n                    1\n                  ),\n            ]\n          : _vm._e(),\n      ],\n      2\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/**\r\n * @copyright 2022 Louis Chmn <louis@chmn.me>\r\n *\r\n * @author Louis Chmn <louis@chmn.me>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport const ATOMIC_PERMISSIONS = {\r\n\tNONE: 0,\r\n\tREAD: 1,\r\n\tUPDATE: 2,\r\n\tCREATE: 4,\r\n\tDELETE: 8,\r\n\tSHARE: 16,\r\n}\r\n\r\nexport const BUNDLED_PERMISSIONS = {\r\n\tREAD_ONLY: ATOMIC_PERMISSIONS.READ,\r\n\tUPLOAD_AND_UPDATE: ATOMIC_PERMISSIONS.READ | ATOMIC_PERMISSIONS.UPDATE | ATOMIC_PERMISSIONS.CREATE | ATOMIC_PERMISSIONS.DELETE,\r\n\tFILE_DROP: ATOMIC_PERMISSIONS.CREATE,\r\n\tALL: ATOMIC_PERMISSIONS.UPDATE | ATOMIC_PERMISSIONS.CREATE | ATOMIC_PERMISSIONS.READ | ATOMIC_PERMISSIONS.DELETE | ATOMIC_PERMISSIONS.SHARE,\r\n}\r\n\r\n/**\r\n * Return whether a given permissions set contains some permissions.\r\n *\r\n * @param {number} initialPermissionSet - the permissions set.\r\n * @param {number} permissionsToCheck - the permissions to check.\r\n * @return {boolean}\r\n */\r\nexport function hasPermissions(initialPermissionSet, permissionsToCheck) {\r\n\treturn initialPermissionSet !== ATOMIC_PERMISSIONS.NONE && (initialPermissionSet & permissionsToCheck) === permissionsToCheck\r\n}\r\n\r\n/**\r\n * Return whether a given permissions set is valid.\r\n *\r\n * @param {number} permissionsSet - the permissions set.\r\n *\r\n * @return {boolean}\r\n */\r\nexport function permissionsSetIsValid(permissionsSet) {\r\n\t// Must have at least READ or CREATE permission.\r\n\tif (!hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.READ) && !hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.CREATE)) {\r\n\t\treturn false\r\n\t}\r\n\r\n\t// Must have READ permission if have UPDATE or DELETE.\r\n\tif (!hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.READ) && (\r\n\t\thasPermissions(permissionsSet, ATOMIC_PERMISSIONS.UPDATE) || hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.DELETE)\r\n\t)) {\r\n\t\treturn false\r\n\t}\r\n\r\n\treturn true\r\n}\r\n\r\n/**\r\n * Add some permissions to an initial set of permissions.\r\n *\r\n * @param {number} initialPermissionSet - the initial permissions.\r\n * @param {number} permissionsToAdd - the permissions to add.\r\n *\r\n * @return {number}\r\n */\r\nexport function addPermissions(initialPermissionSet, permissionsToAdd) {\r\n\treturn initialPermissionSet | permissionsToAdd\r\n}\r\n\r\n/**\r\n * Remove some permissions from an initial set of permissions.\r\n *\r\n * @param {number} initialPermissionSet - the initial permissions.\r\n * @param {number} permissionsToSubtract - the permissions to remove.\r\n *\r\n * @return {number}\r\n */\r\nexport function subtractPermissions(initialPermissionSet, permissionsToSubtract) {\r\n\treturn initialPermissionSet & ~permissionsToSubtract\r\n}\r\n\r\n/**\r\n * Toggle some permissions from  an initial set of permissions.\r\n *\r\n * @param {number} initialPermissionSet - the permissions set.\r\n * @param {number} permissionsToToggle - the permissions to toggle.\r\n *\r\n * @return {number}\r\n */\r\nexport function togglePermissions(initialPermissionSet, permissionsToToggle) {\r\n\tif (hasPermissions(initialPermissionSet, permissionsToToggle)) {\r\n\t\treturn subtractPermissions(initialPermissionSet, permissionsToToggle)\r\n\t} else {\r\n\t\treturn addPermissions(initialPermissionSet, permissionsToToggle)\r\n\t}\r\n}\r\n\r\n/**\r\n * Return whether some given permissions can be toggled from a permission set.\r\n *\r\n * @param {number} permissionSet - the initial permissions set.\r\n * @param {number} permissionsToToggle - the permissions to toggle.\r\n *\r\n * @return {boolean}\r\n */\r\nexport function canTogglePermissions(permissionSet, permissionsToToggle) {\r\n\treturn permissionsSetIsValid(togglePermissions(permissionSet, permissionsToToggle))\r\n}\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharePermissionsEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharePermissionsEditor.vue?vue&type=script&lang=js&\"","<!--\r\n  - @copyright Copyright (c) 2022 Louis Chmn <louis@chmn.me>\r\n  -\r\n  - @author Louis Chmn <louis@chmn.me>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<li>\r\n\t\t<ul>\r\n\t\t\t<!-- file -->\r\n\t\t\t<NcActionCheckbox v-if=\"!isFolder\"\r\n\t\t\t\t:checked=\"shareHasPermissions(atomicPermissions.UPDATE)\"\r\n\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t@update:checked=\"toggleSharePermissions(atomicPermissions.UPDATE)\">\r\n\t\t\t\t{{ t('files_sharing', 'Allow editing') }}\r\n\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t<!-- folder -->\r\n\t\t\t<template v-if=\"isFolder && fileHasCreatePermission && config.isPublicUploadEnabled\">\r\n\t\t\t\t<template v-if=\"!showCustomPermissionsForm\">\r\n\t\t\t\t\t<NcActionRadio :checked=\"sharePermissionEqual(bundledPermissions.READ_ONLY)\"\r\n\t\t\t\t\t\t:value=\"bundledPermissions.READ_ONLY\"\r\n\t\t\t\t\t\t:name=\"randomFormName\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t@change=\"setSharePermissions(bundledPermissions.READ_ONLY)\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Read only') }}\r\n\t\t\t\t\t</NcActionRadio>\r\n\r\n\t\t\t\t\t<NcActionRadio :checked=\"sharePermissionEqual(bundledPermissions.UPLOAD_AND_UPDATE)\"\r\n\t\t\t\t\t\t:value=\"bundledPermissions.UPLOAD_AND_UPDATE\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t:name=\"randomFormName\"\r\n\t\t\t\t\t\t@change=\"setSharePermissions(bundledPermissions.UPLOAD_AND_UPDATE)\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Allow upload and editing') }}\r\n\t\t\t\t\t</NcActionRadio>\r\n\t\t\t\t\t<NcActionRadio :checked=\"sharePermissionEqual(bundledPermissions.FILE_DROP)\"\r\n\t\t\t\t\t\t:value=\"bundledPermissions.FILE_DROP\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t:name=\"randomFormName\"\r\n\t\t\t\t\t\tclass=\"sharing-entry__action--public-upload\"\r\n\t\t\t\t\t\t@change=\"setSharePermissions(bundledPermissions.FILE_DROP)\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'File drop (upload only)') }}\r\n\t\t\t\t\t</NcActionRadio>\r\n\r\n\t\t\t\t\t<!-- custom permissions button -->\r\n\t\t\t\t\t<NcActionButton :title=\"t('files_sharing', 'Custom permissions')\"\r\n\t\t\t\t\t\t@click=\"showCustomPermissionsForm = true\">\r\n\t\t\t\t\t\t<template #icon>\r\n\t\t\t\t\t\t\t<Tune />\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t{{ sharePermissionsIsBundle ? \"\" : sharePermissionsSummary }}\r\n\t\t\t\t\t</NcActionButton>\r\n\t\t\t\t</template>\r\n\r\n\t\t\t\t<!-- custom permissions -->\r\n\t\t\t\t<span v-else :class=\"{error: !sharePermissionsSetIsValid}\">\r\n\t\t\t\t\t<NcActionCheckbox :checked=\"shareHasPermissions(atomicPermissions.READ)\"\r\n\t\t\t\t\t\t:disabled=\"saving || !canToggleSharePermissions(atomicPermissions.READ)\"\r\n\t\t\t\t\t\t@update:checked=\"toggleSharePermissions(atomicPermissions.READ)\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Read') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t\t<NcActionCheckbox :checked=\"shareHasPermissions(atomicPermissions.CREATE)\"\r\n\t\t\t\t\t\t:disabled=\"saving || !canToggleSharePermissions(atomicPermissions.CREATE)\"\r\n\t\t\t\t\t\t@update:checked=\"toggleSharePermissions(atomicPermissions.CREATE)\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Upload') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t\t<NcActionCheckbox :checked=\"shareHasPermissions(atomicPermissions.UPDATE)\"\r\n\t\t\t\t\t\t:disabled=\"saving || !canToggleSharePermissions(atomicPermissions.UPDATE)\"\r\n\t\t\t\t\t\t@update:checked=\"toggleSharePermissions(atomicPermissions.UPDATE)\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Edit') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t\t<NcActionCheckbox :checked=\"shareHasPermissions(atomicPermissions.DELETE)\"\r\n\t\t\t\t\t\t:disabled=\"saving || !canToggleSharePermissions(atomicPermissions.DELETE)\"\r\n\t\t\t\t\t\t@update:checked=\"toggleSharePermissions(atomicPermissions.DELETE)\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Delete') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t\t<NcActionButton @click=\"showCustomPermissionsForm = false\">\r\n\t\t\t\t\t\t<template #icon>\r\n\t\t\t\t\t\t\t<ChevronLeft />\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Bundled permissions') }}\r\n\t\t\t\t\t</NcActionButton>\r\n\t\t\t\t</span>\r\n\t\t\t</template>\r\n\t\t</ul>\r\n\t</li>\r\n</template>\r\n\r\n<script>\r\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton'\r\nimport NcActionRadio from '@nextcloud/vue/dist/Components/NcActionRadio'\r\nimport NcActionCheckbox from '@nextcloud/vue/dist/Components/NcActionCheckbox'\r\n\r\nimport SharesMixin from '../mixins/SharesMixin'\r\nimport {\r\n\tATOMIC_PERMISSIONS,\r\n\tBUNDLED_PERMISSIONS,\r\n\thasPermissions,\r\n\tpermissionsSetIsValid,\r\n\ttogglePermissions,\r\n\tcanTogglePermissions,\r\n} from '../lib/SharePermissionsToolBox'\r\n\r\nimport Tune from 'vue-material-design-icons/Tune'\r\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft'\r\n\r\nexport default {\r\n\tname: 'SharePermissionsEditor',\r\n\r\n\tcomponents: {\r\n\t\tNcActionButton,\r\n\t\tNcActionCheckbox,\r\n\t\tNcActionRadio,\r\n\t\tTune,\r\n\t\tChevronLeft,\r\n\t},\r\n\r\n\tmixins: [SharesMixin],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trandomFormName: Math.random().toString(27).substring(2),\r\n\r\n\t\t\tshowCustomPermissionsForm: false,\r\n\r\n\t\t\tatomicPermissions: ATOMIC_PERMISSIONS,\r\n\t\t\tbundledPermissions: BUNDLED_PERMISSIONS,\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t/**\r\n\t\t * Return the summary of custom checked permissions.\r\n\t\t *\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tsharePermissionsSummary() {\r\n\t\t\treturn Object.values(this.atomicPermissions)\r\n\t\t\t\t.filter(permission => this.shareHasPermissions(permission))\r\n\t\t\t\t.map(permission => {\r\n\t\t\t\t\tswitch (permission) {\r\n\t\t\t\t\tcase this.atomicPermissions.CREATE:\r\n\t\t\t\t\t\treturn this.t('files_sharing', 'Upload')\r\n\t\t\t\t\tcase this.atomicPermissions.READ:\r\n\t\t\t\t\t\treturn this.t('files_sharing', 'Read')\r\n\t\t\t\t\tcase this.atomicPermissions.UPDATE:\r\n\t\t\t\t\t\treturn this.t('files_sharing', 'Edit')\r\n\t\t\t\t\tcase this.atomicPermissions.DELETE:\r\n\t\t\t\t\t\treturn this.t('files_sharing', 'Delete')\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn null\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.filter(permissionLabel => permissionLabel !== null)\r\n\t\t\t\t.join(', ')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Return whether the share's permission is a bundle.\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tsharePermissionsIsBundle() {\r\n\t\t\treturn Object.values(BUNDLED_PERMISSIONS)\r\n\t\t\t\t.map(bundle => this.sharePermissionEqual(bundle))\r\n\t\t\t\t.filter(isBundle => isBundle)\r\n\t\t\t\t.length > 0\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Return whether the share's permission is valid.\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tsharePermissionsSetIsValid() {\r\n\t\t\treturn permissionsSetIsValid(this.share.permissions)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is the current share a folder ?\r\n\t\t * TODO: move to a proper FileInfo model?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisFolder() {\r\n\t\t\treturn this.fileInfo.type === 'dir'\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Does the current file/folder have create permissions.\r\n\t\t * TODO: move to a proper FileInfo model?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tfileHasCreatePermission() {\r\n\t\t\treturn !!(this.fileInfo.permissions & ATOMIC_PERMISSIONS.CREATE)\r\n\t\t},\r\n\t},\r\n\r\n\tmounted() {\r\n\t\t// Show the Custom Permissions view on open if the permissions set is not a bundle.\r\n\t\tthis.showCustomPermissionsForm = !this.sharePermissionsIsBundle\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Return whether the share has the exact given permissions.\r\n\t\t *\r\n\t\t * @param {number} permissions - the permissions to check.\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tsharePermissionEqual(permissions) {\r\n\t\t\t// We use the share's permission without PERMISSION_SHARE as it is not relevant here.\r\n\t\t\treturn (this.share.permissions & ~ATOMIC_PERMISSIONS.SHARE) === permissions\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Return whether the share has the given permissions.\r\n\t\t *\r\n\t\t * @param {number} permissions - the permissions to check.\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tshareHasPermissions(permissions) {\r\n\t\t\treturn hasPermissions(this.share.permissions, permissions)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set the share permissions to the given permissions.\r\n\t\t *\r\n\t\t * @param {number} permissions - the permissions to set.\r\n\t\t *\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tsetSharePermissions(permissions) {\r\n\t\t\tthis.share.permissions = permissions\r\n\t\t\tthis.queueUpdate('permissions')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Return whether some given permissions can be toggled.\r\n\t\t *\r\n\t\t * @param {number} permissionsToToggle - the permissions to toggle.\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcanToggleSharePermissions(permissionsToToggle) {\r\n\t\t\treturn canTogglePermissions(this.share.permissions, permissionsToToggle)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Toggle a given permission.\r\n\t\t *\r\n\t\t * @param {number} permissions - the permissions to toggle.\r\n\t\t *\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\ttoggleSharePermissions(permissions) {\r\n\t\t\tthis.share.permissions = togglePermissions(this.share.permissions, permissions)\r\n\r\n\t\t\tif (!permissionsSetIsValid(this.share.permissions)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tthis.queueUpdate('permissions')\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.error {\r\n\t::v-deep .action-checkbox__label:before {\r\n\t\tborder: 1px solid var(--color-error);\r\n\t}\r\n}\r\n</style>\r\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharePermissionsEditor.vue?vue&type=style&index=0&id=7f000276&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharePermissionsEditor.vue?vue&type=style&index=0&id=7f000276&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharePermissionsEditor.vue?vue&type=template&id=7f000276&scoped=true&\"\nimport script from \"./SharePermissionsEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./SharePermissionsEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharePermissionsEditor.vue?vue&type=style&index=0&id=7f000276&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f000276\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7f000276')) {\n      api.createRecord('7f000276', component.options)\n    } else {\n      api.reload('7f000276', component.options)\n    }\n    module.hot.accept(\"./SharePermissionsEditor.vue?vue&type=template&id=7f000276&scoped=true&\", function () {\n      api.rerender('7f000276', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/SharePermissionsEditor.vue\"\nexport default component.exports","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<li :class=\"{'sharing-entry--share': share}\" class=\"sharing-entry sharing-entry__link\">\r\n\t\t<NcAvatar :is-no-user=\"true\"\r\n\t\t\t:icon-class=\"isEmailShareType ? 'avatar-link-share icon-mail-white' : 'avatar-link-share icon-public-white'\"\r\n\t\t\tclass=\"sharing-entry__avatar\" />\r\n\t\t<div class=\"sharing-entry__desc\">\r\n\t\t\t<span class=\"sharing-entry__title\" :title=\"title\">\r\n\t\t\t\t{{ title }}\r\n\t\t\t</span>\r\n\t\t\t<p v-if=\"subtitle\">\r\n\t\t\t\t{{ subtitle }}\r\n\t\t\t</p>\r\n\t\t</div>\r\n\r\n\t\t<!-- clipboard -->\r\n\t\t<NcActions v-if=\"share && !isEmailShareType && share.token\"\r\n\t\t\tref=\"copyButton\"\r\n\t\t\tclass=\"sharing-entry__copy\">\r\n\t\t\t<NcActionLink :href=\"shareLink\"\r\n\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t:aria-label=\"t('files_sharing', 'Copy public link to clipboard')\"\r\n\t\t\t\t:icon=\"copied && copySuccess ? 'icon-checkmark-color' : 'icon-clippy'\"\r\n\t\t\t\t@click.stop.prevent=\"copyLink\">\r\n\t\t\t\t{{ clipboardTooltip }}\r\n\t\t\t</NcActionLink>\r\n\t\t</NcActions>\r\n\r\n\t\t<!-- pending actions -->\r\n\t\t<NcActions v-if=\"!pending && (pendingPassword || pendingExpirationDate)\"\r\n\t\t\tclass=\"sharing-entry__actions\"\r\n\t\t\tmenu-align=\"right\"\r\n\t\t\t:open.sync=\"open\"\r\n\t\t\t@close=\"onNewLinkShare\">\r\n\t\t\t<!-- pending data menu -->\r\n\t\t\t<NcActionText v-if=\"errors.pending\"\r\n\t\t\t\ticon=\"icon-error\"\r\n\t\t\t\t:class=\"{ error: errors.pending}\">\r\n\t\t\t\t{{ errors.pending }}\r\n\t\t\t</NcActionText>\r\n\t\t\t<NcActionText v-else icon=\"icon-info\">\r\n\t\t\t\t{{ t('files_sharing', 'Please enter the following required information before creating the share') }}\r\n\t\t\t</NcActionText>\r\n\r\n\t\t\t<!-- password -->\r\n\t\t\t<NcActionText v-if=\"pendingPassword\" icon=\"icon-password\">\r\n\t\t\t\t{{ t('files_sharing', 'Password protection (enforced)') }}\r\n\t\t\t</NcActionText>\r\n\t\t\t<NcActionCheckbox v-else-if=\"config.enableLinkPasswordByDefault\"\r\n\t\t\t\t:checked.sync=\"isPasswordProtected\"\r\n\t\t\t\t:disabled=\"config.enforcePasswordForPublicLink || saving\"\r\n\t\t\t\tclass=\"share-link-password-checkbox\"\r\n\t\t\t\t@uncheck=\"onPasswordDisable\">\r\n\t\t\t\t{{ t('files_sharing', 'Password protection') }}\r\n\t\t\t</NcActionCheckbox>\r\n\t\t\t<NcActionInput v-if=\"pendingPassword || share.password\"\r\n\t\t\t\tv-tooltip.auto=\"{\r\n\t\t\t\t\tcontent: errors.password,\r\n\t\t\t\t\tshow: errors.password,\r\n\t\t\t\t\ttrigger: 'manual',\r\n\t\t\t\t\tdefaultContainer: '#app-sidebar'\r\n\t\t\t\t}\"\r\n\t\t\t\tclass=\"share-link-password\"\r\n\t\t\t\t:value.sync=\"share.password\"\r\n\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t:required=\"config.enableLinkPasswordByDefault || config.enforcePasswordForPublicLink\"\r\n\t\t\t\t:minlength=\"isPasswordPolicyEnabled && config.passwordPolicy.minLength\"\r\n\t\t\t\ticon=\"\"\r\n\t\t\t\tautocomplete=\"new-password\"\r\n\t\t\t\t@submit=\"onNewLinkShare\">\r\n\t\t\t\t{{ t('files_sharing', 'Enter a password') }}\r\n\t\t\t</NcActionInput>\r\n\r\n\t\t\t<!-- expiration date -->\r\n\t\t\t<NcActionText v-if=\"pendingExpirationDate\" icon=\"icon-calendar-dark\">\r\n\t\t\t\t{{ t('files_sharing', 'Expiration date (enforced)') }}\r\n\t\t\t</NcActionText>\r\n\t\t\t<NcActionInput v-if=\"pendingExpirationDate\"\r\n\t\t\t\tclass=\"share-link-expire-date\"\r\n\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t:is-native-picker=\"true\"\r\n\t\t\t\t:hide-label=\"true\"\r\n\t\t\t\t:value=\"new Date(share.expireDate)\"\r\n\t\t\t\ttype=\"date\"\r\n\t\t\t\t:min=\"dateTomorrow\"\r\n\t\t\t\t:max=\"dateMaxEnforced\"\r\n\t\t\t\t@input=\"onExpirationChange\">\r\n\t\t\t\t<!-- let's not submit when picked, the user\r\n\t\t\t\t\tmight want to still edit or copy the password -->\r\n\t\t\t\t{{ t('files_sharing', 'Enter a date') }}\r\n\t\t\t</NcActionInput>\r\n\r\n\t\t\t<NcActionButton icon=\"icon-checkmark\" @click.prevent.stop=\"onNewLinkShare\">\r\n\t\t\t\t{{ t('files_sharing', 'Create share') }}\r\n\t\t\t</NcActionButton>\r\n\t\t\t<NcActionButton icon=\"icon-close\" @click.prevent.stop=\"onCancel\">\r\n\t\t\t\t{{ t('files_sharing', 'Cancel') }}\r\n\t\t\t</NcActionButton>\r\n\t\t</NcActions>\r\n\r\n\t\t<!-- actions -->\r\n\t\t<NcActions v-else-if=\"!loading\"\r\n\t\t\tclass=\"sharing-entry__actions\"\r\n\t\t\tmenu-align=\"right\"\r\n\t\t\t:open.sync=\"open\"\r\n\t\t\t@close=\"onMenuClose\">\r\n\t\t\t<template v-if=\"share\">\r\n\t\t\t\t<template v-if=\"share.canEdit && canReshare\">\r\n\t\t\t\t\t<!-- Custom Label -->\r\n\t\t\t\t\t<NcActionInput ref=\"label\"\r\n\t\t\t\t\t\tv-tooltip.auto=\"{\r\n\t\t\t\t\t\t\tcontent: errors.label,\r\n\t\t\t\t\t\t\tshow: errors.label,\r\n\t\t\t\t\t\t\ttrigger: 'manual',\r\n\t\t\t\t\t\t\tdefaultContainer: '.app-sidebar'\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t:class=\"{ error: errors.label }\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t:aria-label=\"t('files_sharing', 'Share label')\"\r\n\t\t\t\t\t\t:value=\"share.newLabel !== undefined ? share.newLabel : share.label\"\r\n\t\t\t\t\t\ticon=\"icon-edit\"\r\n\t\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\t\t@update:value=\"onLabelChange\"\r\n\t\t\t\t\t\t@submit=\"onLabelSubmit\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Share label') }}\r\n\t\t\t\t\t</NcActionInput>\r\n\r\n\t\t\t\t\t<SharePermissionsEditor :can-reshare=\"canReshare\"\r\n\t\t\t\t\t\t:share.sync=\"share\"\r\n\t\t\t\t\t\t:file-info=\"fileInfo\" />\r\n\r\n\t\t\t\t\t<NcActionSeparator />\r\n\r\n\t\t\t\t\t<NcActionCheckbox :checked.sync=\"share.hideDownload\"\r\n\t\t\t\t\t\t:disabled=\"saving || canChangeHideDownload\"\r\n\t\t\t\t\t\t@change=\"queueUpdate('hideDownload')\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Hide download') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t\t<!-- password -->\r\n\t\t\t\t\t<NcActionCheckbox :checked.sync=\"isPasswordProtected\"\r\n\t\t\t\t\t\t:disabled=\"config.enforcePasswordForPublicLink || saving\"\r\n\t\t\t\t\t\tclass=\"share-link-password-checkbox\"\r\n\t\t\t\t\t\t@uncheck=\"onPasswordDisable\">\r\n\t\t\t\t\t\t{{ config.enforcePasswordForPublicLink\r\n\t\t\t\t\t\t\t? t('files_sharing', 'Password protection (enforced)')\r\n\t\t\t\t\t\t\t: t('files_sharing', 'Password protect') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t\t<NcActionInput v-if=\"isPasswordProtected\"\r\n\t\t\t\t\t\tref=\"password\"\r\n\t\t\t\t\t\tv-tooltip.auto=\"{\r\n\t\t\t\t\t\t\tcontent: errors.password,\r\n\t\t\t\t\t\t\tshow: errors.password,\r\n\t\t\t\t\t\t\ttrigger: 'manual',\r\n\t\t\t\t\t\t\tdefaultContainer: '#app-sidebar'\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\tclass=\"share-link-password\"\r\n\t\t\t\t\t\t:class=\"{ error: errors.password}\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t:required=\"config.enforcePasswordForPublicLink\"\r\n\t\t\t\t\t\t:value=\"hasUnsavedPassword ? share.newPassword : '***************'\"\r\n\t\t\t\t\t\ticon=\"icon-password\"\r\n\t\t\t\t\t\tautocomplete=\"new-password\"\r\n\t\t\t\t\t\t:type=\"hasUnsavedPassword ? 'text': 'password'\"\r\n\t\t\t\t\t\t@update:value=\"onPasswordChange\"\r\n\t\t\t\t\t\t@submit=\"onPasswordSubmit\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Enter a password') }}\r\n\t\t\t\t\t</NcActionInput>\r\n\t\t\t\t\t<NcActionText v-if=\"isEmailShareType && passwordExpirationTime\" icon=\"icon-info\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Password expires {passwordExpirationTime}', {passwordExpirationTime}) }}\r\n\t\t\t\t\t</NcActionText>\r\n\t\t\t\t\t<NcActionText v-else-if=\"isEmailShareType && passwordExpirationTime !== null\" icon=\"icon-error\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Password expired') }}\r\n\t\t\t\t\t</NcActionText>\r\n\r\n\t\t\t\t\t<!-- password protected by Talk -->\r\n\t\t\t\t\t<NcActionCheckbox v-if=\"isPasswordProtectedByTalkAvailable\"\r\n\t\t\t\t\t\t:checked.sync=\"isPasswordProtectedByTalk\"\r\n\t\t\t\t\t\t:disabled=\"!canTogglePasswordProtectedByTalkAvailable || saving\"\r\n\t\t\t\t\t\tclass=\"share-link-password-talk-checkbox\"\r\n\t\t\t\t\t\t@change=\"onPasswordProtectedByTalkChange\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Video verification') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t\t<!-- expiration date -->\r\n\t\t\t\t\t<NcActionCheckbox :checked.sync=\"hasExpirationDate\"\r\n\t\t\t\t\t\t:disabled=\"config.isDefaultExpireDateEnforced || saving\"\r\n\t\t\t\t\t\tclass=\"share-link-expire-date-checkbox\"\r\n\t\t\t\t\t\t@uncheck=\"onExpirationDisable\">\r\n\t\t\t\t\t\t{{ config.isDefaultExpireDateEnforced\r\n\t\t\t\t\t\t\t? t('files_sharing', 'Expiration date (enforced)')\r\n\t\t\t\t\t\t\t: t('files_sharing', 'Set expiration date') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t\t<NcActionInput v-if=\"hasExpirationDate\"\r\n\t\t\t\t\t\tref=\"expireDate\"\r\n\t\t\t\t\t\t:is-native-picker=\"true\"\r\n\t\t\t\t\t\t:hide-label=\"true\"\r\n\t\t\t\t\t\tclass=\"share-link-expire-date\"\r\n\t\t\t\t\t\t:class=\"{ error: errors.expireDate}\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t:value=\"new Date(share.expireDate)\"\r\n\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t:min=\"dateTomorrow\"\r\n\t\t\t\t\t\t:max=\"dateMaxEnforced\"\r\n\t\t\t\t\t\t@input=\"onExpirationChange\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Enter a date') }}\r\n\t\t\t\t\t</NcActionInput>\r\n\r\n\t\t\t\t\t<!-- note -->\r\n\t\t\t\t\t<NcActionCheckbox :checked.sync=\"hasNote\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t@uncheck=\"queueUpdate('note')\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Note to recipient') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t\t<NcActionTextEditable v-if=\"hasNote\"\r\n\t\t\t\t\t\tref=\"note\"\r\n\t\t\t\t\t\tv-tooltip.auto=\"{\r\n\t\t\t\t\t\t\tcontent: errors.note,\r\n\t\t\t\t\t\t\tshow: errors.note,\r\n\t\t\t\t\t\t\ttrigger: 'manual',\r\n\t\t\t\t\t\t\tdefaultContainer: '#app-sidebar'\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t:class=\"{ error: errors.note}\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t:placeholder=\"t('files_sharing', 'Enter a note for the share recipient')\"\r\n\t\t\t\t\t\t:value=\"share.newNote || share.note\"\r\n\t\t\t\t\t\ticon=\"icon-edit\"\r\n\t\t\t\t\t\t@update:value=\"onNoteChange\"\r\n\t\t\t\t\t\t@submit=\"onNoteSubmit\" />\r\n\t\t\t\t</template>\r\n\r\n\t\t\t\t<NcActionSeparator />\r\n\r\n\t\t\t\t<!-- external actions -->\r\n\t\t\t\t<ExternalShareAction v-for=\"action in externalLinkActions\"\r\n\t\t\t\t\t:id=\"action.id\"\r\n\t\t\t\t\t:key=\"action.id\"\r\n\t\t\t\t\t:action=\"action\"\r\n\t\t\t\t\t:file-info=\"fileInfo\"\r\n\t\t\t\t\t:share=\"share\" />\r\n\r\n\t\t\t\t<!-- external legacy sharing via url (social...) -->\r\n\t\t\t\t<NcActionLink v-for=\"({icon, url, name}, index) in externalLegacyLinkActions\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:href=\"url(shareLink)\"\r\n\t\t\t\t\t:icon=\"icon\"\r\n\t\t\t\t\ttarget=\"_blank\">\r\n\t\t\t\t\t{{ name }}\r\n\t\t\t\t</NcActionLink>\r\n\r\n\t\t\t\t<NcActionButton v-if=\"share.canDelete\"\r\n\t\t\t\t\ticon=\"icon-close\"\r\n\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t@click.prevent=\"onDelete\">\r\n\t\t\t\t\t{{ t('files_sharing', 'Unshare') }}\r\n\t\t\t\t</NcActionButton>\r\n\t\t\t\t<NcActionButton v-if=\"!isEmailShareType && canReshare\"\r\n\t\t\t\t\tclass=\"new-share-link\"\r\n\t\t\t\t\ticon=\"icon-add\"\r\n\t\t\t\t\t@click.prevent.stop=\"onNewLinkShare\">\r\n\t\t\t\t\t{{ t('files_sharing', 'Add another link') }}\r\n\t\t\t\t</NcActionButton>\r\n\t\t\t</template>\r\n\r\n\t\t\t<!-- Create new share -->\r\n\t\t\t<NcActionButton v-else-if=\"canReshare\"\r\n\t\t\t\tclass=\"new-share-link\"\r\n\t\t\t\t:icon=\"loading ? 'icon-loading-small' : 'icon-add'\"\r\n\t\t\t\t@click.prevent.stop=\"onNewLinkShare\">\r\n\t\t\t\t{{ t('files_sharing', 'Create a new share link') }}\r\n\t\t\t</NcActionButton>\r\n\t\t</NcActions>\r\n\r\n\t\t<!-- loading indicator to replace the menu -->\r\n\t\t<div v-else class=\"icon-loading-small sharing-entry__loading\" />\r\n\t</li>\r\n</template>\r\n\r\n<script>\r\nimport { generateUrl } from '@nextcloud/router'\r\nimport { showError } from '@nextcloud/dialogs'\r\nimport { Type as ShareTypes } from '@nextcloud/sharing'\r\nimport Vue from 'vue'\r\n\r\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton'\r\nimport NcActionCheckbox from '@nextcloud/vue/dist/Components/NcActionCheckbox'\r\nimport NcActionInput from '@nextcloud/vue/dist/Components/NcActionInput'\r\nimport NcActionLink from '@nextcloud/vue/dist/Components/NcActionLink'\r\nimport NcActionText from '@nextcloud/vue/dist/Components/NcActionText'\r\nimport NcActionSeparator from '@nextcloud/vue/dist/Components/NcActionSeparator'\r\nimport NcActionTextEditable from '@nextcloud/vue/dist/Components/NcActionTextEditable'\r\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions'\r\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar'\r\nimport Tooltip from '@nextcloud/vue/dist/Directives/Tooltip'\r\n\r\nimport ExternalShareAction from './ExternalShareAction.vue'\r\nimport SharePermissionsEditor from './SharePermissionsEditor.vue'\r\nimport GeneratePassword from '../utils/GeneratePassword.js'\r\nimport Share from '../models/Share.js'\r\nimport SharesMixin from '../mixins/SharesMixin.js'\r\n\r\nexport default {\r\n\tname: 'SharingEntryLink',\r\n\r\n\tcomponents: {\r\n\t\tNcActions,\r\n\t\tNcActionButton,\r\n\t\tNcActionCheckbox,\r\n\t\tNcActionInput,\r\n\t\tNcActionLink,\r\n\t\tNcActionText,\r\n\t\tNcActionTextEditable,\r\n\t\tNcActionSeparator,\r\n\t\tNcAvatar,\r\n\t\tExternalShareAction,\r\n\t\tSharePermissionsEditor,\r\n\t},\r\n\r\n\tdirectives: {\r\n\t\tTooltip,\r\n\t},\r\n\r\n\tmixins: [SharesMixin],\r\n\r\n\tprops: {\r\n\t\tcanReshare: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcopySuccess: true,\r\n\t\t\tcopied: false,\r\n\r\n\t\t\t// Are we waiting for password/expiration date\r\n\t\t\tpending: false,\r\n\r\n\t\t\tExternalLegacyLinkActions: OCA.Sharing.ExternalLinkActions.state,\r\n\t\t\tExternalShareActions: OCA.Sharing.ExternalShareActions.state,\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t/**\r\n\t\t * Link share label\r\n\t\t *\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\ttitle() {\r\n\t\t\t// if we have a valid existing share (not pending)\r\n\t\t\tif (this.share && this.share.id) {\r\n\t\t\t\tif (!this.isShareOwner && this.share.ownerDisplayName) {\r\n\t\t\t\t\tif (this.isEmailShareType) {\r\n\t\t\t\t\t\treturn t('files_sharing', '{shareWith} by {initiator}', {\r\n\t\t\t\t\t\t\tshareWith: this.share.shareWith,\r\n\t\t\t\t\t\t\tinitiator: this.share.ownerDisplayName,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn t('files_sharing', 'Shared via link by {initiator}', {\r\n\t\t\t\t\t\tinitiator: this.share.ownerDisplayName,\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (this.share.label && this.share.label.trim() !== '') {\r\n\t\t\t\t\tif (this.isEmailShareType) {\r\n\t\t\t\t\t\treturn t('files_sharing', 'Mail share ({label})', {\r\n\t\t\t\t\t\t\tlabel: this.share.label.trim(),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn t('files_sharing', 'Share link ({label})', {\r\n\t\t\t\t\t\tlabel: this.share.label.trim(),\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (this.isEmailShareType) {\r\n\t\t\t\t\treturn this.share.shareWith\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn t('files_sharing', 'Share link')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Show the email on a second line if a label is set for mail shares\r\n\t\t *\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tsubtitle() {\r\n\t\t\tif (this.isEmailShareType\r\n\t\t\t\t&& this.title !== this.share.shareWith) {\r\n\t\t\t\treturn this.share.shareWith\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Does the current share have an expiration date\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\thasExpirationDate: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.config.isDefaultExpireDateEnforced\r\n\t\t\t\t\t|| !!this.share.expireDate\r\n\t\t\t},\r\n\t\t\tset(enabled) {\r\n\t\t\t\tconst defaultExpirationDate = this.config.defaultExpirationDate\r\n\t\t\t\t\t|| new Date(new Date().setDate(new Date().getDate() + 1))\r\n\t\t\t\tthis.share.expireDate = enabled\r\n\t\t\t\t\t? this.formatDateToString(defaultExpirationDate)\r\n\t\t\t\t\t: ''\r\n\t\t\t\tconsole.debug('Expiration date status', enabled, this.share.expireDate)\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tdateMaxEnforced() {\r\n\t\t\tif (this.config.isDefaultExpireDateEnforced) {\r\n\t\t\t\treturn new Date(new Date().setDate(new Date().getDate() + this.config.defaultExpireDate))\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is the current share password protected ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisPasswordProtected: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.config.enforcePasswordForPublicLink\r\n\t\t\t\t\t|| !!this.share.password\r\n\t\t\t},\r\n\t\t\tasync set(enabled) {\r\n\t\t\t\t// TODO: directly save after generation to make sure the share is always protected\r\n\t\t\t\tVue.set(this.share, 'password', enabled ? await GeneratePassword() : '')\r\n\t\t\t\tVue.set(this.share, 'newPassword', this.share.password)\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tpasswordExpirationTime() {\r\n\t\t\tif (this.share.passwordExpirationTime === null) {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\r\n\t\t\tconst expirationTime = moment(this.share.passwordExpirationTime)\r\n\r\n\t\t\tif (expirationTime.diff(moment()) < 0) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\treturn expirationTime.fromNow()\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is Talk enabled?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisTalkEnabled() {\r\n\t\t\treturn OC.appswebroots.spreed !== undefined\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is it possible to protect the password by Talk?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisPasswordProtectedByTalkAvailable() {\r\n\t\t\treturn this.isPasswordProtected && this.isTalkEnabled\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is the current share password protected by Talk?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisPasswordProtectedByTalk: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.sendPasswordByTalk\r\n\t\t\t},\r\n\t\t\tasync set(enabled) {\r\n\t\t\t\tthis.share.sendPasswordByTalk = enabled\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is the current share an email share ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisEmailShareType() {\r\n\t\t\treturn this.share\r\n\t\t\t\t? this.share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL\r\n\t\t\t\t: false\r\n\t\t},\r\n\r\n\t\tcanTogglePasswordProtectedByTalkAvailable() {\r\n\t\t\tif (!this.isPasswordProtected) {\r\n\t\t\t\t// Makes no sense\r\n\t\t\t\treturn false\r\n\t\t\t} else if (this.isEmailShareType && !this.hasUnsavedPassword) {\r\n\t\t\t\t// For email shares we need a new password in order to enable or\r\n\t\t\t\t// disable\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\t// Anything else should be fine\r\n\t\t\treturn true\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Pending data.\r\n\t\t * If the share still doesn't have an id, it is not synced\r\n\t\t * Therefore this is still not valid and requires user input\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tpendingPassword() {\r\n\t\t\treturn this.config.enforcePasswordForPublicLink && this.share && !this.share.id\r\n\t\t},\r\n\t\tpendingExpirationDate() {\r\n\t\t\treturn this.config.isDefaultExpireDateEnforced && this.share && !this.share.id\r\n\t\t},\r\n\r\n\t\t// if newPassword exists, but is empty, it means\r\n\t\t// the user deleted the original password\r\n\t\thasUnsavedPassword() {\r\n\t\t\treturn this.share.newPassword !== undefined\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Return the public share link\r\n\t\t *\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tshareLink() {\r\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl('/s/') + this.share.token\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Clipboard v-tooltip message\r\n\t\t *\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tclipboardTooltip() {\r\n\t\t\tif (this.copied) {\r\n\t\t\t\treturn this.copySuccess\r\n\t\t\t\t\t? t('files_sharing', 'Link copied')\r\n\t\t\t\t\t: t('files_sharing', 'Cannot copy, please copy the link manually')\r\n\t\t\t}\r\n\t\t\treturn t('files_sharing', 'Copy to clipboard')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * External additionnai actions for the menu\r\n\t\t *\r\n\t\t * @deprecated use OCA.Sharing.ExternalShareActions\r\n\t\t * @return {Array}\r\n\t\t */\r\n\t\texternalLegacyLinkActions() {\r\n\t\t\treturn this.ExternalLegacyLinkActions.actions\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Additional actions for the menu\r\n\t\t *\r\n\t\t * @return {Array}\r\n\t\t */\r\n\t\texternalLinkActions() {\r\n\t\t\t// filter only the registered actions for said link\r\n\t\t\treturn this.ExternalShareActions.actions\r\n\t\t\t\t.filter(action => action.shareType.includes(ShareTypes.SHARE_TYPE_LINK)\r\n\t\t\t\t\t|| action.shareType.includes(ShareTypes.SHARE_TYPE_EMAIL))\r\n\t\t},\r\n\r\n\t\tisPasswordPolicyEnabled() {\r\n\t\t\treturn typeof this.config.passwordPolicy === 'object'\r\n\t\t},\r\n\r\n\t\tcanChangeHideDownload() {\r\n\t\t\tconst hasDisabledDownload = (shareAttribute) => shareAttribute.key === 'download' && shareAttribute.scope === 'permissions' && shareAttribute.enabled === false\r\n\r\n\t\t\treturn this.fileInfo.shareAttributes.some(hasDisabledDownload)\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Create a new share link and append it to the list\r\n\t\t */\r\n\t\tasync onNewLinkShare() {\r\n\t\t\t// do not run again if already loading\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst shareDefaults = {\r\n\t\t\t\tshare_type: ShareTypes.SHARE_TYPE_LINK,\r\n\t\t\t}\r\n\t\t\tif (this.config.isDefaultExpireDateEnforced) {\r\n\t\t\t\t// default is empty string if not set\r\n\t\t\t\t// expiration is the share object key, not expireDate\r\n\t\t\t\tshareDefaults.expiration = this.formatDateToString(this.config.defaultExpirationDate)\r\n\t\t\t}\r\n\t\t\tif (this.config.enableLinkPasswordByDefault) {\r\n\t\t\t\tshareDefaults.password = await GeneratePassword()\r\n\t\t\t}\r\n\r\n\t\t\t// do not push yet if we need a password or an expiration date: show pending menu\r\n\t\t\tif (this.config.enforcePasswordForPublicLink || this.config.isDefaultExpireDateEnforced) {\r\n\t\t\t\tthis.pending = true\r\n\r\n\t\t\t\t// if a share already exists, pushing it\r\n\t\t\t\tif (this.share && !this.share.id) {\r\n\t\t\t\t\t// if the share is valid, create it on the server\r\n\t\t\t\t\tif (this.checkShare(this.share)) {\r\n\t\t\t\t\t\tawait this.pushNewLinkShare(this.share, true)\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.open = true\r\n\t\t\t\t\t\tOC.Notification.showTemporary(t('files_sharing', 'Error, please enter proper password and/or expiration date'))\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ELSE, show the pending popovermenu\r\n\t\t\t\t// if password enforced, pre-fill with random one\r\n\t\t\t\tif (this.config.enforcePasswordForPublicLink) {\r\n\t\t\t\t\tshareDefaults.password = await GeneratePassword()\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create share & close menu\r\n\t\t\t\tconst share = new Share(shareDefaults)\r\n\t\t\t\tconst component = await new Promise(resolve => {\r\n\t\t\t\t\tthis.$emit('add:share', share, resolve)\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// open the menu on the\r\n\t\t\t\t// freshly created share component\r\n\t\t\t\tthis.open = false\r\n\t\t\t\tthis.pending = false\r\n\t\t\t\tcomponent.open = true\r\n\r\n\t\t\t// Nothing is enforced, creating share directly\r\n\t\t\t} else {\r\n\t\t\t\tconst share = new Share(shareDefaults)\r\n\t\t\t\tawait this.pushNewLinkShare(share)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Push a new link share to the server\r\n\t\t * And update or append to the list\r\n\t\t * accordingly\r\n\t\t *\r\n\t\t * @param {Share} share the new share\r\n\t\t * @param {boolean} [update=false] do we update the current share ?\r\n\t\t */\r\n\t\tasync pushNewLinkShare(share, update) {\r\n\t\t\ttry {\r\n\t\t\t\t// do nothing if we're already pending creation\r\n\t\t\t\tif (this.loading) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.errors = {}\r\n\r\n\t\t\t\tconst path = (this.fileInfo.path + '/' + this.fileInfo.name).replace('//', '/')\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\tpath,\r\n\t\t\t\t\tshareType: ShareTypes.SHARE_TYPE_LINK,\r\n\t\t\t\t\tpassword: share.password,\r\n\t\t\t\t\texpireDate: share.expireDate,\r\n\t\t\t\t\tattributes: JSON.stringify(this.fileInfo.shareAttributes),\r\n\t\t\t\t\t// we do not allow setting the publicUpload\r\n\t\t\t\t\t// before the share creation.\r\n\t\t\t\t\t// Todo: We also need to fix the createShare method in\r\n\t\t\t\t\t// lib/Controller/ShareAPIController.php to allow file drop\r\n\t\t\t\t\t// (currently not supported on create, only update)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.debug('Creating link share with options', options)\r\n\t\t\t\tconst newShare = await this.createShare(options)\r\n\r\n\t\t\t\tthis.open = false\r\n\t\t\t\tconsole.debug('Link share created', newShare)\r\n\r\n\t\t\t\t// if share already exists, copy link directly on next tick\r\n\t\t\t\tlet component\r\n\t\t\t\tif (update) {\r\n\t\t\t\t\tcomponent = await new Promise(resolve => {\r\n\t\t\t\t\t\tthis.$emit('update:share', newShare, resolve)\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// adding new share to the array and copying link to clipboard\r\n\t\t\t\t\t// using promise so that we can copy link in the same click function\r\n\t\t\t\t\t// and avoid firefox copy permissions issue\r\n\t\t\t\t\tcomponent = await new Promise(resolve => {\r\n\t\t\t\t\t\tthis.$emit('add:share', newShare, resolve)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Execute the copy link method\r\n\t\t\t\t// freshly created share component\r\n\t\t\t\t// ! somehow does not works on firefox !\r\n\t\t\t\tif (!this.config.enforcePasswordForPublicLink) {\r\n\t\t\t\t\t// Only copy the link when the password was not forced,\r\n\t\t\t\t\t// otherwise the user needs to copy/paste the password before finishing the share.\r\n\t\t\t\t\tcomponent.copyLink()\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (data) {\r\n\t\t\t\tconst message = data?.response?.data?.ocs?.meta?.message\r\n\t\t\t\tif (!message) {\r\n\t\t\t\t\tshowError(t('sharing', 'Error while creating the share'))\r\n\t\t\t\t\tconsole.error(data)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (message.match(/password/i)) {\r\n\t\t\t\t\tthis.onSyncError('password', message)\r\n\t\t\t\t} else if (message.match(/date/i)) {\r\n\t\t\t\t\tthis.onSyncError('expireDate', message)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.onSyncError('pending', message)\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Label changed, let's save it to a different key\r\n\t\t *\r\n\t\t * @param {string} label the share label\r\n\t\t */\r\n\t\tonLabelChange(label) {\r\n\t\t\tthis.$set(this.share, 'newLabel', label.trim())\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * When the note change, we trim, save and dispatch\r\n\t\t */\r\n\t\tonLabelSubmit() {\r\n\t\t\tif (typeof this.share.newLabel === 'string') {\r\n\t\t\t\tthis.share.label = this.share.newLabel\r\n\t\t\t\tthis.$delete(this.share, 'newLabel')\r\n\t\t\t\tthis.queueUpdate('label')\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync copyLink() {\r\n\t\t\ttry {\r\n\t\t\t\tawait this.$copyText(this.shareLink)\r\n\t\t\t\t// focus and show the tooltip\r\n\t\t\t\tthis.$refs.copyButton.$el.focus()\r\n\t\t\t\tthis.copySuccess = true\r\n\t\t\t\tthis.copied = true\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.copySuccess = false\r\n\t\t\t\tthis.copied = true\r\n\t\t\t\tconsole.error(error)\r\n\t\t\t} finally {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.copySuccess = false\r\n\t\t\t\t\tthis.copied = false\r\n\t\t\t\t}, 4000)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update newPassword values\r\n\t\t * of share. If password is set but not newPassword\r\n\t\t * then the user did not changed the password\r\n\t\t * If both co-exists, the password have changed and\r\n\t\t * we show it in plain text.\r\n\t\t * Then on submit (or menu close), we sync it.\r\n\t\t *\r\n\t\t * @param {string} password the changed password\r\n\t\t */\r\n\t\tonPasswordChange(password) {\r\n\t\t\tthis.$set(this.share, 'newPassword', password)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Uncheck password protection\r\n\t\t * We need this method because @update:checked\r\n\t\t * is ran simultaneously as @uncheck, so we\r\n\t\t * cannot ensure data is up-to-date\r\n\t\t */\r\n\t\tonPasswordDisable() {\r\n\t\t\tthis.share.password = ''\r\n\r\n\t\t\t// reset password state after sync\r\n\t\t\tthis.$delete(this.share, 'newPassword')\r\n\r\n\t\t\t// only update if valid share.\r\n\t\t\tif (this.share.id) {\r\n\t\t\t\tthis.queueUpdate('password')\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Menu have been closed or password has been submitted.\r\n\t\t * The only property that does not get\r\n\t\t * synced automatically is the password\r\n\t\t * So let's check if we have an unsaved\r\n\t\t * password.\r\n\t\t * expireDate is saved on datepicker pick\r\n\t\t * or close.\r\n\t\t */\r\n\t\tonPasswordSubmit() {\r\n\t\t\tif (this.hasUnsavedPassword) {\r\n\t\t\t\tthis.share.password = this.share.newPassword.trim()\r\n\t\t\t\tthis.queueUpdate('password')\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update the password along with \"sendPasswordByTalk\".\r\n\t\t *\r\n\t\t * If the password was modified the new password is sent; otherwise\r\n\t\t * updating a mail share would fail, as in that case it is required that\r\n\t\t * a new password is set when enabling or disabling\r\n\t\t * \"sendPasswordByTalk\".\r\n\t\t */\r\n\t\tonPasswordProtectedByTalkChange() {\r\n\t\t\tif (this.hasUnsavedPassword) {\r\n\t\t\t\tthis.share.password = this.share.newPassword.trim()\r\n\t\t\t}\r\n\r\n\t\t\tthis.queueUpdate('sendPasswordByTalk', 'password')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Save potential changed data on menu close\r\n\t\t */\r\n\t\tonMenuClose() {\r\n\t\t\tthis.onPasswordSubmit()\r\n\t\t\tthis.onNoteSubmit()\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Cancel the share creation\r\n\t\t * Used in the pending popover\r\n\t\t */\r\n\t\tonCancel() {\r\n\t\t\t// this.share already exists at this point,\r\n\t\t\t// but is incomplete as not pushed to server\r\n\t\t\t// YET. We can safely delete the share :)\r\n\t\t\tthis.$emit('remove:share', this.share)\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sharing-entry {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmin-height: 44px;\r\n\t&__desc {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 8px;\r\n\t\tline-height: 1.2em;\r\n\t\toverflow: hidden;\r\n\r\n\t\tp {\r\n\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t}\r\n\t}\r\n\t&__title {\r\n\t\ttext-overflow: ellipsis;\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t&:not(.sharing-entry--share) &__actions {\r\n\t\t.new-share-link {\r\n\t\t\tborder-top: 1px solid var(--color-border);\r\n\t\t}\r\n\t}\r\n\r\n\t::v-deep .avatar-link-share {\r\n\t\tbackground-color: var(--color-primary);\r\n\t}\r\n\r\n\t.sharing-entry__action--public-upload {\r\n\t\tborder-bottom: 1px solid var(--color-border);\r\n\t}\r\n\r\n\t&__loading {\r\n\t\twidth: 44px;\r\n\t\theight: 44px;\r\n\t\tmargin: 0;\r\n\t\tpadding: 14px;\r\n\t\tmargin-left: auto;\r\n\t}\r\n\r\n\t// put menus to the left\r\n\t// but only the first one\r\n\t.action-item {\r\n\t\tmargin-left: auto;\r\n\t\t~ .action-item,\r\n\t\t~ .sharing-entry__loading {\r\n\t\t\tmargin-left: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t.icon-checkmark-color {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=style&index=0&id=7a675594&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=style&index=0&id=7a675594&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntryLink.vue?vue&type=template&id=7a675594&scoped=true&\"\nimport script from \"./SharingEntryLink.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingEntryLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingEntryLink.vue?vue&type=style&index=0&id=7a675594&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a675594\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7a675594')) {\n      api.createRecord('7a675594', component.options)\n    } else {\n      api.reload('7a675594', component.options)\n    }\n    module.hot.accept(\"./SharingEntryLink.vue?vue&type=template&id=7a675594&scoped=true&\", function () {\n      api.rerender('7a675594', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/SharingEntryLink.vue\"\nexport default component.exports","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<ul v-if=\"canLinkShare\" class=\"sharing-link-list\">\r\n\t\t<!-- If no link shares, show the add link default entry -->\r\n\t\t<SharingEntryLink v-if=\"!hasLinkShares && canReshare\"\r\n\t\t\t:can-reshare=\"canReshare\"\r\n\t\t\t:file-info=\"fileInfo\"\r\n\t\t\t@add:share=\"addShare\" />\r\n\r\n\t\t<!-- Else we display the list -->\r\n\t\t<template v-if=\"hasShares\">\r\n\t\t\t<!-- using shares[index] to work with .sync -->\r\n\t\t\t<SharingEntryLink v-for=\"(share, index) in shares\"\r\n\t\t\t\t:key=\"share.id\"\r\n\t\t\t\t:can-reshare=\"canReshare\"\r\n\t\t\t\t:share.sync=\"shares[index]\"\r\n\t\t\t\t:file-info=\"fileInfo\"\r\n\t\t\t\t@add:share=\"addShare(...arguments)\"\r\n\t\t\t\t@update:share=\"awaitForShare(...arguments)\"\r\n\t\t\t\t@remove:share=\"removeShare\" />\r\n\t\t</template>\r\n\t</ul>\r\n</template>\r\n\r\n<script>\r\n// eslint-disable-next-line no-unused-vars\r\nimport Share from '../models/Share'\r\nimport ShareTypes from '../mixins/ShareTypes'\r\nimport SharingEntryLink from '../components/SharingEntryLink'\r\n\r\nexport default {\r\n\tname: 'SharingLinkList',\r\n\r\n\tcomponents: {\r\n\t\tSharingEntryLink,\r\n\t},\r\n\r\n\tmixins: [ShareTypes],\r\n\r\n\tprops: {\r\n\t\tfileInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tshares: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tcanReshare: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcanLinkShare: OC.getCapabilities().files_sharing.public.enabled,\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t/**\r\n\t\t * Do we have link shares?\r\n\t\t * Using this to still show the `new link share`\r\n\t\t * button regardless of mail shares\r\n\t\t *\r\n\t\t * @return {Array}\r\n\t\t */\r\n\t\thasLinkShares() {\r\n\t\t\treturn this.shares.filter(share => share.type === this.SHARE_TYPES.SHARE_TYPE_LINK).length > 0\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Do we have any link or email shares?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\thasShares() {\r\n\t\t\treturn this.shares.length > 0\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Add a new share into the link shares list\r\n\t\t * and return the newly created share component\r\n\t\t *\r\n\t\t * @param {Share} share the share to add to the array\r\n\t\t * @param {Function} resolve a function to run after the share is added and its component initialized\r\n\t\t */\r\n\t\taddShare(share, resolve) {\r\n\t\t\t// eslint-disable-next-line vue/no-mutating-props\r\n\t\t\tthis.shares.unshift(share)\r\n\t\t\tthis.awaitForShare(share, resolve)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Await for next tick and render after the list updated\r\n\t\t * Then resolve with the matched vue component of the\r\n\t\t * provided share object\r\n\t\t *\r\n\t\t * @param {Share} share newly created share\r\n\t\t * @param {Function} resolve a function to execute after\r\n\t\t */\r\n\t\tawaitForShare(share, resolve) {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tconst newShare = this.$children.find(component => component.share === share)\r\n\t\t\t\tif (newShare) {\r\n\t\t\t\t\tresolve(newShare)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Remove a share from the shares list\r\n\t\t *\r\n\t\t * @param {Share} share the share to remove\r\n\t\t */\r\n\t\tremoveShare(share) {\r\n\t\t\tconst index = this.shares.findIndex(item => item === share)\r\n\t\t\t// eslint-disable-next-line vue/no-mutating-props\r\n\t\t\tthis.shares.splice(index, 1)\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingLinkList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingLinkList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SharingLinkList.vue?vue&type=template&id=dd248c84&\"\nimport script from \"./SharingLinkList.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingLinkList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('dd248c84')) {\n      api.createRecord('dd248c84', component.options)\n    } else {\n      api.reload('dd248c84', component.options)\n    }\n    module.hot.accept(\"./SharingLinkList.vue?vue&type=template&id=dd248c84&\", function () {\n      api.rerender('dd248c84', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/views/SharingLinkList.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"ul\",\n    { staticClass: \"sharing-sharee-list\" },\n    _vm._l(_vm.shares, function (share) {\n      return _c(\"SharingEntry\", {\n        key: share.id,\n        attrs: {\n          \"file-info\": _vm.fileInfo,\n          share: share,\n          \"is-unique\": _vm.isUnique(share),\n        },\n        on: { \"remove:share\": _vm.removeShare },\n      })\n    }),\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"li\",\n    { staticClass: \"sharing-entry\" },\n    [\n      _c(\"NcAvatar\", {\n        staticClass: \"sharing-entry__avatar\",\n        attrs: {\n          \"is-no-user\": _vm.share.type !== _vm.SHARE_TYPES.SHARE_TYPE_USER,\n          user: _vm.share.shareWith,\n          \"display-name\": _vm.share.shareWithDisplayName,\n          \"tooltip-message\":\n            _vm.share.type === _vm.SHARE_TYPES.SHARE_TYPE_USER\n              ? _vm.share.shareWith\n              : \"\",\n          \"menu-position\": \"left\",\n          url: _vm.share.shareWithAvatar,\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\n        _vm.share.shareWithLink ? \"a\" : \"div\",\n        {\n          directives: [\n            {\n              name: \"tooltip\",\n              rawName: \"v-tooltip.auto\",\n              value: _vm.tooltip,\n              expression: \"tooltip\",\n              modifiers: { auto: true },\n            },\n          ],\n          tag: \"component\",\n          staticClass: \"sharing-entry__desc\",\n          attrs: { href: _vm.share.shareWithLink },\n        },\n        [\n          _c(\"span\", [\n            _vm._v(_vm._s(_vm.title)),\n            !_vm.isUnique\n              ? _c(\"span\", { staticClass: \"sharing-entry__desc-unique\" }, [\n                  _vm._v(\n                    \" (\" + _vm._s(_vm.share.shareWithDisplayNameUnique) + \")\"\n                  ),\n                ])\n              : _vm._e(),\n          ]),\n          _vm._v(\" \"),\n          _vm.hasStatus\n            ? _c(\"p\", [\n                _c(\"span\", [_vm._v(_vm._s(_vm.share.status.icon || \"\"))]),\n                _vm._v(\" \"),\n                _c(\"span\", [_vm._v(_vm._s(_vm.share.status.message || \"\"))]),\n              ])\n            : _vm._e(),\n        ]\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"NcActions\",\n        {\n          staticClass: \"sharing-entry__actions\",\n          attrs: { \"menu-align\": \"right\" },\n          on: { close: _vm.onMenuClose },\n        },\n        [\n          _vm.share.canEdit\n            ? [\n                _c(\n                  \"NcActionCheckbox\",\n                  {\n                    ref: \"canEdit\",\n                    attrs: {\n                      checked: _vm.canEdit,\n                      value: _vm.permissionsEdit,\n                      disabled: _vm.saving || !_vm.canSetEdit,\n                    },\n                    on: {\n                      \"update:checked\": function ($event) {\n                        _vm.canEdit = $event\n                      },\n                    },\n                  },\n                  [\n                    _vm._v(\n                      \"\\n\\t\\t\\t\\t\" +\n                        _vm._s(_vm.t(\"files_sharing\", \"Allow editing\")) +\n                        \"\\n\\t\\t\\t\"\n                    ),\n                  ]\n                ),\n                _vm._v(\" \"),\n                _vm.isFolder\n                  ? _c(\n                      \"NcActionCheckbox\",\n                      {\n                        ref: \"canCreate\",\n                        attrs: {\n                          checked: _vm.canCreate,\n                          value: _vm.permissionsCreate,\n                          disabled: _vm.saving || !_vm.canSetCreate,\n                        },\n                        on: {\n                          \"update:checked\": function ($event) {\n                            _vm.canCreate = $event\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\" +\n                            _vm._s(_vm.t(\"files_sharing\", \"Allow creating\")) +\n                            \"\\n\\t\\t\\t\"\n                        ),\n                      ]\n                    )\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _vm.isFolder\n                  ? _c(\n                      \"NcActionCheckbox\",\n                      {\n                        ref: \"canDelete\",\n                        attrs: {\n                          checked: _vm.canDelete,\n                          value: _vm.permissionsDelete,\n                          disabled: _vm.saving || !_vm.canSetDelete,\n                        },\n                        on: {\n                          \"update:checked\": function ($event) {\n                            _vm.canDelete = $event\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\" +\n                            _vm._s(_vm.t(\"files_sharing\", \"Allow deleting\")) +\n                            \"\\n\\t\\t\\t\"\n                        ),\n                      ]\n                    )\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _vm.config.isResharingAllowed\n                  ? _c(\n                      \"NcActionCheckbox\",\n                      {\n                        ref: \"canReshare\",\n                        attrs: {\n                          checked: _vm.canReshare,\n                          value: _vm.permissionsShare,\n                          disabled: _vm.saving || !_vm.canSetReshare,\n                        },\n                        on: {\n                          \"update:checked\": function ($event) {\n                            _vm.canReshare = $event\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\" +\n                            _vm._s(_vm.t(\"files_sharing\", \"Allow resharing\")) +\n                            \"\\n\\t\\t\\t\"\n                        ),\n                      ]\n                    )\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _vm.isSetDownloadButtonVisible\n                  ? _c(\n                      \"NcActionCheckbox\",\n                      {\n                        ref: \"canDownload\",\n                        attrs: {\n                          checked: _vm.canDownload,\n                          disabled: _vm.saving || !_vm.canSetDownload,\n                        },\n                        on: {\n                          \"update:checked\": function ($event) {\n                            _vm.canDownload = $event\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\" +\n                            _vm._s(_vm.allowDownloadText) +\n                            \"\\n\\t\\t\\t\"\n                        ),\n                      ]\n                    )\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _c(\n                  \"NcActionCheckbox\",\n                  {\n                    attrs: {\n                      checked: _vm.hasExpirationDate,\n                      disabled:\n                        _vm.config.isDefaultInternalExpireDateEnforced ||\n                        _vm.saving,\n                    },\n                    on: {\n                      \"update:checked\": function ($event) {\n                        _vm.hasExpirationDate = $event\n                      },\n                      uncheck: _vm.onExpirationDisable,\n                    },\n                  },\n                  [\n                    _vm._v(\n                      \"\\n\\t\\t\\t\\t\" +\n                        _vm._s(\n                          _vm.config.isDefaultInternalExpireDateEnforced\n                            ? _vm.t(\"files_sharing\", \"Expiration date enforced\")\n                            : _vm.t(\"files_sharing\", \"Set expiration date\")\n                        ) +\n                        \"\\n\\t\\t\\t\"\n                    ),\n                  ]\n                ),\n                _vm._v(\" \"),\n                _vm.hasExpirationDate\n                  ? _c(\n                      \"NcActionInput\",\n                      {\n                        ref: \"expireDate\",\n                        class: { error: _vm.errors.expireDate },\n                        attrs: {\n                          \"is-native-picker\": true,\n                          \"hide-label\": true,\n                          disabled: _vm.saving,\n                          value: new Date(_vm.share.expireDate),\n                          type: \"date\",\n                          min: _vm.dateTomorrow,\n                          max: _vm.dateMaxEnforced,\n                        },\n                        on: { input: _vm.onExpirationChange },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\" +\n                            _vm._s(_vm.t(\"files_sharing\", \"Enter a date\")) +\n                            \"\\n\\t\\t\\t\"\n                        ),\n                      ]\n                    )\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _vm.canHaveNote\n                  ? [\n                      _c(\n                        \"NcActionCheckbox\",\n                        {\n                          attrs: { checked: _vm.hasNote, disabled: _vm.saving },\n                          on: {\n                            \"update:checked\": function ($event) {\n                              _vm.hasNote = $event\n                            },\n                            uncheck: function ($event) {\n                              return _vm.queueUpdate(\"note\")\n                            },\n                          },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n\\t\\t\\t\\t\\t\" +\n                              _vm._s(\n                                _vm.t(\"files_sharing\", \"Note to recipient\")\n                              ) +\n                              \"\\n\\t\\t\\t\\t\"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _vm.hasNote\n                        ? _c(\"NcActionTextEditable\", {\n                            directives: [\n                              {\n                                name: \"tooltip\",\n                                rawName: \"v-tooltip.auto\",\n                                value: {\n                                  content: _vm.errors.note,\n                                  show: _vm.errors.note,\n                                  trigger: \"manual\",\n                                },\n                                expression:\n                                  \"{\\n\\t\\t\\t\\t\\t\\tcontent: errors.note,\\n\\t\\t\\t\\t\\t\\tshow: errors.note,\\n\\t\\t\\t\\t\\t\\ttrigger: 'manual'\\n\\t\\t\\t\\t\\t}\",\n                                modifiers: { auto: true },\n                              },\n                            ],\n                            ref: \"note\",\n                            class: { error: _vm.errors.note },\n                            attrs: {\n                              disabled: _vm.saving,\n                              value: _vm.share.newNote || _vm.share.note,\n                              icon: \"icon-edit\",\n                            },\n                            on: {\n                              \"update:value\": _vm.onNoteChange,\n                              submit: _vm.onNoteSubmit,\n                            },\n                          })\n                        : _vm._e(),\n                    ]\n                  : _vm._e(),\n              ]\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm.share.canDelete\n            ? _c(\n                \"NcActionButton\",\n                {\n                  attrs: { icon: \"icon-close\", disabled: _vm.saving },\n                  on: {\n                    click: function ($event) {\n                      $event.preventDefault()\n                      return _vm.onDelete.apply(null, arguments)\n                    },\n                  },\n                },\n                [\n                  _vm._v(\n                    \"\\n\\t\\t\\t\" +\n                      _vm._s(_vm.t(\"files_sharing\", \"Unshare\")) +\n                      \"\\n\\t\\t\"\n                  ),\n                ]\n              )\n            : _vm._e(),\n        ],\n        2\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<li class=\"sharing-entry\">\r\n\t\t<NcAvatar class=\"sharing-entry__avatar\"\r\n\t\t\t:is-no-user=\"share.type !== SHARE_TYPES.SHARE_TYPE_USER\"\r\n\t\t\t:user=\"share.shareWith\"\r\n\t\t\t:display-name=\"share.shareWithDisplayName\"\r\n\t\t\t:tooltip-message=\"share.type === SHARE_TYPES.SHARE_TYPE_USER ? share.shareWith : ''\"\r\n\t\t\t:menu-position=\"'left'\"\r\n\t\t\t:url=\"share.shareWithAvatar\" />\r\n\t\t<component :is=\"share.shareWithLink ? 'a' : 'div'\"\r\n\t\t\tv-tooltip.auto=\"tooltip\"\r\n\t\t\t:href=\"share.shareWithLink\"\r\n\t\t\tclass=\"sharing-entry__desc\">\r\n\t\t\t<span>{{ title }}<span v-if=\"!isUnique\" class=\"sharing-entry__desc-unique\"> ({{ share.shareWithDisplayNameUnique }})</span></span>\r\n\t\t\t<p v-if=\"hasStatus\">\r\n\t\t\t\t<span>{{ share.status.icon || '' }}</span>\r\n\t\t\t\t<span>{{ share.status.message || '' }}</span>\r\n\t\t\t</p>\r\n\t\t</component>\r\n\t\t<NcActions menu-align=\"right\"\r\n\t\t\tclass=\"sharing-entry__actions\"\r\n\t\t\t@close=\"onMenuClose\">\r\n\t\t\t<template v-if=\"share.canEdit\">\r\n\t\t\t\t<!-- edit permission -->\r\n\t\t\t\t<NcActionCheckbox ref=\"canEdit\"\r\n\t\t\t\t\t:checked.sync=\"canEdit\"\r\n\t\t\t\t\t:value=\"permissionsEdit\"\r\n\t\t\t\t\t:disabled=\"saving || !canSetEdit\">\r\n\t\t\t\t\t{{ t('files_sharing', 'Allow editing') }}\r\n\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t<!-- create permission -->\r\n\t\t\t\t<NcActionCheckbox v-if=\"isFolder\"\r\n\t\t\t\t\tref=\"canCreate\"\r\n\t\t\t\t\t:checked.sync=\"canCreate\"\r\n\t\t\t\t\t:value=\"permissionsCreate\"\r\n\t\t\t\t\t:disabled=\"saving || !canSetCreate\">\r\n\t\t\t\t\t{{ t('files_sharing', 'Allow creating') }}\r\n\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t<!-- delete permission -->\r\n\t\t\t\t<NcActionCheckbox v-if=\"isFolder\"\r\n\t\t\t\t\tref=\"canDelete\"\r\n\t\t\t\t\t:checked.sync=\"canDelete\"\r\n\t\t\t\t\t:value=\"permissionsDelete\"\r\n\t\t\t\t\t:disabled=\"saving || !canSetDelete\">\r\n\t\t\t\t\t{{ t('files_sharing', 'Allow deleting') }}\r\n\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t<!-- reshare permission -->\r\n\t\t\t\t<NcActionCheckbox v-if=\"config.isResharingAllowed\"\r\n\t\t\t\t\tref=\"canReshare\"\r\n\t\t\t\t\t:checked.sync=\"canReshare\"\r\n\t\t\t\t\t:value=\"permissionsShare\"\r\n\t\t\t\t\t:disabled=\"saving || !canSetReshare\">\r\n\t\t\t\t\t{{ t('files_sharing', 'Allow resharing') }}\r\n\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t<NcActionCheckbox v-if=\"isSetDownloadButtonVisible\"\r\n\t\t\t\t\tref=\"canDownload\"\r\n\t\t\t\t\t:checked.sync=\"canDownload\"\r\n\t\t\t\t\t:disabled=\"saving || !canSetDownload\">\r\n\t\t\t\t\t{{ allowDownloadText }}\r\n\t\t\t\t</NcActionCheckbox>\r\n\r\n\t\t\t\t<!-- expiration date -->\r\n\t\t\t\t<NcActionCheckbox :checked.sync=\"hasExpirationDate\"\r\n\t\t\t\t\t:disabled=\"config.isDefaultInternalExpireDateEnforced || saving\"\r\n\t\t\t\t\t@uncheck=\"onExpirationDisable\">\r\n\t\t\t\t\t{{ config.isDefaultInternalExpireDateEnforced\r\n\t\t\t\t\t\t? t('files_sharing', 'Expiration date enforced')\r\n\t\t\t\t\t\t: t('files_sharing', 'Set expiration date') }}\r\n\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t<NcActionInput v-if=\"hasExpirationDate\"\r\n\t\t\t\t\tref=\"expireDate\"\r\n\t\t\t\t\t:is-native-picker=\"true\"\r\n\t\t\t\t\t:hide-label=\"true\"\r\n\t\t\t\t\t:class=\"{ error: errors.expireDate}\"\r\n\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t:value=\"new Date(share.expireDate)\"\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t:min=\"dateTomorrow\"\r\n\t\t\t\t\t:max=\"dateMaxEnforced\"\r\n\t\t\t\t\t@input=\"onExpirationChange\">\r\n\t\t\t\t\t{{ t('files_sharing', 'Enter a date') }}\r\n\t\t\t\t</NcActionInput>\r\n\r\n\t\t\t\t<!-- note -->\r\n\t\t\t\t<template v-if=\"canHaveNote\">\r\n\t\t\t\t\t<NcActionCheckbox :checked.sync=\"hasNote\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t@uncheck=\"queueUpdate('note')\">\r\n\t\t\t\t\t\t{{ t('files_sharing', 'Note to recipient') }}\r\n\t\t\t\t\t</NcActionCheckbox>\r\n\t\t\t\t\t<NcActionTextEditable v-if=\"hasNote\"\r\n\t\t\t\t\t\tref=\"note\"\r\n\t\t\t\t\t\tv-tooltip.auto=\"{\r\n\t\t\t\t\t\t\tcontent: errors.note,\r\n\t\t\t\t\t\t\tshow: errors.note,\r\n\t\t\t\t\t\t\ttrigger: 'manual'\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t:class=\"{ error: errors.note}\"\r\n\t\t\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t\t\t:value=\"share.newNote || share.note\"\r\n\t\t\t\t\t\ticon=\"icon-edit\"\r\n\t\t\t\t\t\t@update:value=\"onNoteChange\"\r\n\t\t\t\t\t\t@submit=\"onNoteSubmit\" />\r\n\t\t\t\t</template>\r\n\t\t\t</template>\r\n\r\n\t\t\t<NcActionButton v-if=\"share.canDelete\"\r\n\t\t\t\ticon=\"icon-close\"\r\n\t\t\t\t:disabled=\"saving\"\r\n\t\t\t\t@click.prevent=\"onDelete\">\r\n\t\t\t\t{{ t('files_sharing', 'Unshare') }}\r\n\t\t\t</NcActionButton>\r\n\t\t</NcActions>\r\n\t</li>\r\n</template>\r\n\r\n<script>\r\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar'\r\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions'\r\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton'\r\nimport NcActionCheckbox from '@nextcloud/vue/dist/Components/NcActionCheckbox'\r\nimport NcActionInput from '@nextcloud/vue/dist/Components/NcActionInput'\r\nimport NcActionTextEditable from '@nextcloud/vue/dist/Components/NcActionTextEditable'\r\nimport Tooltip from '@nextcloud/vue/dist/Directives/Tooltip'\r\n\r\nimport SharesMixin from '../mixins/SharesMixin.js'\r\n\r\nexport default {\r\n\tname: 'SharingEntry',\r\n\r\n\tcomponents: {\r\n\t\tNcActions,\r\n\t\tNcActionButton,\r\n\t\tNcActionCheckbox,\r\n\t\tNcActionInput,\r\n\t\tNcActionTextEditable,\r\n\t\tNcAvatar,\r\n\t},\r\n\r\n\tdirectives: {\r\n\t\tTooltip,\r\n\t},\r\n\r\n\tmixins: [SharesMixin],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpermissionsEdit: OC.PERMISSION_UPDATE,\r\n\t\t\tpermissionsCreate: OC.PERMISSION_CREATE,\r\n\t\t\tpermissionsDelete: OC.PERMISSION_DELETE,\r\n\t\t\tpermissionsRead: OC.PERMISSION_READ,\r\n\t\t\tpermissionsShare: OC.PERMISSION_SHARE,\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\ttitle() {\r\n\t\t\tlet title = this.share.shareWithDisplayName\r\n\t\t\tif (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GROUP) {\r\n\t\t\t\ttitle += ` (${t('files_sharing', 'group')})`\r\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_ROOM) {\r\n\t\t\t\ttitle += ` (${t('files_sharing', 'conversation')})`\r\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE) {\r\n\t\t\t\ttitle += ` (${t('files_sharing', 'remote')})`\r\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP) {\r\n\t\t\t\ttitle += ` (${t('files_sharing', 'remote group')})`\r\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GUEST) {\r\n\t\t\t\ttitle += ` (${t('files_sharing', 'guest')})`\r\n\t\t\t}\r\n\t\t\treturn title\r\n\t\t},\r\n\r\n\t\ttooltip() {\r\n\t\t\tif (this.share.owner !== this.share.uidFileOwner) {\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\t// todo: strong or italic?\r\n\t\t\t\t\t// but the t function escape any html from the data :/\r\n\t\t\t\t\tuser: this.share.shareWithDisplayName,\r\n\t\t\t\t\towner: this.share.ownerDisplayName,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GROUP) {\r\n\t\t\t\t\treturn t('files_sharing', 'Shared with the group {user} by {owner}', data)\r\n\t\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_ROOM) {\r\n\t\t\t\t\treturn t('files_sharing', 'Shared with the conversation {user} by {owner}', data)\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn t('files_sharing', 'Shared with {user} by {owner}', data)\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t},\r\n\r\n\t\tcanHaveNote() {\r\n\t\t\treturn !this.isRemote\r\n\t\t},\r\n\r\n\t\tisRemote() {\r\n\t\t\treturn this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE\r\n\t\t\t\t|| this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharer set whether the sharee can edit the file ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcanSetEdit() {\r\n\t\t\t// If the owner revoked the permission after the resharer granted it\r\n\t\t\t// the share still has the permission, and the resharer is still\r\n\t\t\t// allowed to revoke it too (but not to grant it again).\r\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_UPDATE) || this.canEdit\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharer set whether the sharee can create the file ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcanSetCreate() {\r\n\t\t\t// If the owner revoked the permission after the resharer granted it\r\n\t\t\t// the share still has the permission, and the resharer is still\r\n\t\t\t// allowed to revoke it too (but not to grant it again).\r\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_CREATE) || this.canCreate\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharer set whether the sharee can delete the file ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcanSetDelete() {\r\n\t\t\t// If the owner revoked the permission after the resharer granted it\r\n\t\t\t// the share still has the permission, and the resharer is still\r\n\t\t\t// allowed to revoke it too (but not to grant it again).\r\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_DELETE) || this.canDelete\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharer set whether the sharee can reshare the file ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcanSetReshare() {\r\n\t\t\t// If the owner revoked the permission after the resharer granted it\r\n\t\t\t// the share still has the permission, and the resharer is still\r\n\t\t\t// allowed to revoke it too (but not to grant it again).\r\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_SHARE) || this.canReshare\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharer set whether the sharee can download the file ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcanSetDownload() {\r\n\t\t\t// If the owner revoked the permission after the resharer granted it\r\n\t\t\t// the share still has the permission, and the resharer is still\r\n\t\t\t// allowed to revoke it too (but not to grant it again).\r\n\t\t\treturn (this.fileInfo.canDownload() || this.canDownload)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharee edit the shared file ?\r\n\t\t */\r\n\t\tcanEdit: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.hasUpdatePermission\r\n\t\t\t},\r\n\t\t\tset(checked) {\r\n\t\t\t\tthis.updatePermissions({ isEditChecked: checked })\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharee create the shared file ?\r\n\t\t */\r\n\t\tcanCreate: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.hasCreatePermission\r\n\t\t\t},\r\n\t\t\tset(checked) {\r\n\t\t\t\tthis.updatePermissions({ isCreateChecked: checked })\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharee delete the shared file ?\r\n\t\t */\r\n\t\tcanDelete: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.hasDeletePermission\r\n\t\t\t},\r\n\t\t\tset(checked) {\r\n\t\t\t\tthis.updatePermissions({ isDeleteChecked: checked })\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharee reshare the file ?\r\n\t\t */\r\n\t\tcanReshare: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.hasSharePermission\r\n\t\t\t},\r\n\t\t\tset(checked) {\r\n\t\t\t\tthis.updatePermissions({ isReshareChecked: checked })\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Can the sharee download files or only view them ?\r\n\t\t */\r\n\t\tcanDownload: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.hasDownloadPermission\r\n\t\t\t},\r\n\t\t\tset(checked) {\r\n\t\t\t\tthis.updatePermissions({ isDownloadChecked: checked })\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is this share readable\r\n\t\t * Needed for some federated shares that might have been added from file drop links\r\n\t\t */\r\n\t\thasRead: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.share.hasReadPermission\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Is the current share a folder ?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisFolder() {\r\n\t\t\treturn this.fileInfo.type === 'dir'\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Does the current share have an expiration date\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\thasExpirationDate: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.config.isDefaultInternalExpireDateEnforced || !!this.share.expireDate\r\n\t\t\t},\r\n\t\t\tset(enabled) {\r\n\t\t\t\tconst defaultExpirationDate = this.config.defaultInternalExpirationDate\r\n\t\t\t\t\t|| new Date(new Date().setDate(new Date().getDate() + 1))\r\n\t\t\t\tthis.share.expireDate = enabled\r\n\t\t\t\t\t? this.formatDateToString(defaultExpirationDate)\r\n\t\t\t\t\t: ''\r\n\t\t\t\tconsole.debug('Expiration date status', enabled, this.share.expireDate)\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tdateMaxEnforced() {\r\n\t\t\tif (!this.isRemote && this.config.isDefaultInternalExpireDateEnforced) {\r\n\t\t\t\treturn new Date(new Date().setDate(new Date().getDate() + 1 + this.config.defaultInternalExpireDate))\r\n\t\t\t} else if (this.config.isDefaultRemoteExpireDateEnforced) {\r\n\t\t\t\treturn new Date(new Date().setDate(new Date().getDate() + 1 + this.config.defaultRemoteExpireDate))\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\thasStatus() {\r\n\t\t\tif (this.share.type !== this.SHARE_TYPES.SHARE_TYPE_USER) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\treturn (typeof this.share.status === 'object' && !Array.isArray(this.share.status))\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tallowDownloadText() {\r\n\t\t\treturn t('files_sharing', 'Allow download')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisSetDownloadButtonVisible() {\r\n\t\t\tconst allowedMimetypes = [\r\n\t\t\t\t// Office documents\r\n\t\t\t\t'application/msword',\r\n\t\t\t\t'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n\t\t\t\t'application/vnd.ms-powerpoint',\r\n\t\t\t\t'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n\t\t\t\t'application/vnd.ms-excel',\r\n\t\t\t\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n\t\t\t\t'application/vnd.oasis.opendocument.text',\r\n\t\t\t\t'application/vnd.oasis.opendocument.spreadsheet',\r\n\t\t\t\t'application/vnd.oasis.opendocument.presentation',\r\n\t\t\t]\r\n\r\n\t\t\treturn this.isFolder || allowedMimetypes.includes(this.fileInfo.mimetype)\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tupdatePermissions({\r\n\t\t\tisEditChecked = this.canEdit,\r\n\t\t\tisCreateChecked = this.canCreate,\r\n\t\t\tisDeleteChecked = this.canDelete,\r\n\t\t\tisReshareChecked = this.canReshare,\r\n\t\t\tisDownloadChecked = this.canDownload,\r\n\t\t} = {}) {\r\n\t\t\t// calc permissions if checked\r\n\t\t\tconst permissions = 0\r\n\t\t\t\t| (this.hasRead ? this.permissionsRead : 0)\r\n\t\t\t\t| (isCreateChecked ? this.permissionsCreate : 0)\r\n\t\t\t\t| (isDeleteChecked ? this.permissionsDelete : 0)\r\n\t\t\t\t| (isEditChecked ? this.permissionsEdit : 0)\r\n\t\t\t\t| (isReshareChecked ? this.permissionsShare : 0)\r\n\r\n\t\t\tthis.share.permissions = permissions\r\n\t\t\tif (this.share.hasDownloadPermission !== isDownloadChecked) {\r\n\t\t\t\tthis.share.hasDownloadPermission = isDownloadChecked\r\n\t\t\t}\r\n\t\t\tthis.queueUpdate('permissions', 'attributes')\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Save potential changed data on menu close\r\n\t\t */\r\n\t\tonMenuClose() {\r\n\t\t\tthis.onNoteSubmit()\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sharing-entry {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\theight: 44px;\r\n\t&__desc {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 8px;\r\n\t\tline-height: 1.2em;\r\n\t\tp {\r\n\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t}\r\n\t\t&-unique {\r\n\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t}\r\n\t}\r\n\t&__actions {\r\n\t\tmargin-left: auto;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=style&index=0&id=61240f7a&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=style&index=0&id=61240f7a&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntry.vue?vue&type=template&id=61240f7a&scoped=true&\"\nimport script from \"./SharingEntry.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingEntry.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingEntry.vue?vue&type=style&index=0&id=61240f7a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61240f7a\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('61240f7a')) {\n      api.createRecord('61240f7a', component.options)\n    } else {\n      api.reload('61240f7a', component.options)\n    }\n    module.hot.accept(\"./SharingEntry.vue?vue&type=template&id=61240f7a&scoped=true&\", function () {\n      api.rerender('61240f7a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/components/SharingEntry.vue\"\nexport default component.exports","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<ul class=\"sharing-sharee-list\">\r\n\t\t<SharingEntry v-for=\"share in shares\"\r\n\t\t\t:key=\"share.id\"\r\n\t\t\t:file-info=\"fileInfo\"\r\n\t\t\t:share=\"share\"\r\n\t\t\t:is-unique=\"isUnique(share)\"\r\n\t\t\t@remove:share=\"removeShare\" />\r\n\t</ul>\r\n</template>\r\n\r\n<script>\r\n// eslint-disable-next-line no-unused-vars\r\nimport Share from '../models/Share'\r\nimport SharingEntry from '../components/SharingEntry'\r\nimport ShareTypes from '../mixins/ShareTypes'\r\n\r\nexport default {\r\n\tname: 'SharingList',\r\n\r\n\tcomponents: {\r\n\t\tSharingEntry,\r\n\t},\r\n\r\n\tmixins: [ShareTypes],\r\n\r\n\tprops: {\r\n\t\tfileInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tshares: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\thasShares() {\r\n\t\t\treturn this.shares.length === 0\r\n\t\t},\r\n\t\tisUnique() {\r\n\t\t\treturn (share) => {\r\n\t\t\t\treturn [...this.shares].filter((item) => {\r\n\t\t\t\t\treturn share.type === this.SHARE_TYPES.SHARE_TYPE_USER && share.shareWithDisplayName === item.shareWithDisplayName\r\n\t\t\t\t}).length <= 1\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Remove a share from the shares list\r\n\t\t *\r\n\t\t * @param {Share} share the share to remove\r\n\t\t */\r\n\t\tremoveShare(share) {\r\n\t\t\tconst index = this.shares.findIndex(item => item === share)\r\n\t\t\t// eslint-disable-next-line vue/no-mutating-props\r\n\t\t\tthis.shares.splice(index, 1)\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SharingList.vue?vue&type=template&id=698e26a4&\"\nimport script from \"./SharingList.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('698e26a4')) {\n      api.createRecord('698e26a4', component.options)\n    } else {\n      api.reload('698e26a4', component.options)\n    }\n    module.hot.accept(\"./SharingList.vue?vue&type=template&id=698e26a4&\", function () {\n      api.rerender('698e26a4', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/views/SharingList.vue\"\nexport default component.exports","<!--\r\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n  -->\r\n\r\n<template>\r\n\t<div :class=\"{ 'icon-loading': loading }\">\r\n\t\t<!-- error message -->\r\n\t\t<div v-if=\"error\" class=\"emptycontent\" :class=\"{ emptyContentWithSections: sections.length > 0 }\">\r\n\t\t\t<div class=\"icon icon-error\" />\r\n\t\t\t<h2>{{ error }}</h2>\r\n\t\t</div>\r\n\r\n\t\t<!-- shares content -->\r\n\t\t<div v-else class=\"sharingTab__content\">\r\n\t\t\t<!-- shared with me information -->\r\n\t\t\t<SharingEntrySimple v-if=\"isSharedWithMe\" v-bind=\"sharedWithMe\" class=\"sharing-entry__reshare\">\r\n\t\t\t\t<template #avatar>\r\n\t\t\t\t\t<NcAvatar :user=\"sharedWithMe.user\"\r\n\t\t\t\t\t\t:display-name=\"sharedWithMe.displayName\"\r\n\t\t\t\t\t\tclass=\"sharing-entry__avatar\"\r\n\t\t\t\t\t\ttooltip-message=\"\" />\r\n\t\t\t\t</template>\r\n\t\t\t</SharingEntrySimple>\r\n\r\n\t\t\t<!-- add new share input -->\r\n\t\t\t<SharingInput v-if=\"!loading\"\r\n\t\t\t\t:can-reshare=\"canReshare\"\r\n\t\t\t\t:file-info=\"fileInfo\"\r\n\t\t\t\t:link-shares=\"linkShares\"\r\n\t\t\t\t:reshare=\"reshare\"\r\n\t\t\t\t:shares=\"shares\"\r\n\t\t\t\t@add:share=\"addShare\" />\r\n\r\n\t\t\t<!-- link shares list -->\r\n\t\t\t<SharingLinkList v-if=\"!loading\"\r\n\t\t\t\tref=\"linkShareList\"\r\n\t\t\t\t:can-reshare=\"canReshare\"\r\n\t\t\t\t:file-info=\"fileInfo\"\r\n\t\t\t\t:shares=\"linkShares\" />\r\n\r\n\t\t\t<!-- other shares list -->\r\n\t\t\t<SharingList v-if=\"!loading\"\r\n\t\t\t\tref=\"shareList\"\r\n\t\t\t\t:shares=\"shares\"\r\n\t\t\t\t:file-info=\"fileInfo\" />\r\n\r\n\t\t\t<!-- inherited shares -->\r\n\t\t\t<SharingInherited v-if=\"canReshare && !loading\" :file-info=\"fileInfo\" />\r\n\r\n\t\t\t<!-- internal link copy -->\r\n\t\t\t<SharingEntryInternal :file-info=\"fileInfo\" />\r\n\r\n\t\t\t<!-- projects -->\r\n\t\t\t<CollectionList v-if=\"projectsEnabled && fileInfo\"\r\n\t\t\t\t:id=\"`${fileInfo.id}`\"\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\t:name=\"fileInfo.name\" />\r\n\t\t</div>\r\n\r\n\t\t<!-- additional entries, use it with cautious -->\r\n\t\t<div v-for=\"(section, index) in sections\"\r\n\t\t\t:ref=\"'section-' + index\"\r\n\t\t\t:key=\"index\"\r\n\t\t\tclass=\"sharingTab__additionalContent\">\r\n\t\t\t<component :is=\"section($refs['section-'+index], fileInfo)\" :file-info=\"fileInfo\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { CollectionList } from 'nextcloud-vue-collections'\r\nimport { generateOcsUrl } from '@nextcloud/router'\r\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar'\r\nimport axios from '@nextcloud/axios'\r\nimport { loadState } from '@nextcloud/initial-state'\r\n\r\nimport Config from '../services/ConfigService'\r\nimport { shareWithTitle } from '../utils/SharedWithMe'\r\nimport Share from '../models/Share'\r\nimport ShareTypes from '../mixins/ShareTypes'\r\nimport SharingEntryInternal from '../components/SharingEntryInternal'\r\nimport SharingEntrySimple from '../components/SharingEntrySimple'\r\nimport SharingInput from '../components/SharingInput'\r\n\r\nimport SharingInherited from './SharingInherited'\r\nimport SharingLinkList from './SharingLinkList'\r\nimport SharingList from './SharingList'\r\n\r\nexport default {\r\n\tname: 'SharingTab',\r\n\r\n\tcomponents: {\r\n\t\tNcAvatar,\r\n\t\tCollectionList,\r\n\t\tSharingEntryInternal,\r\n\t\tSharingEntrySimple,\r\n\t\tSharingInherited,\r\n\t\tSharingInput,\r\n\t\tSharingLinkList,\r\n\t\tSharingList,\r\n\t},\r\n\r\n\tmixins: [ShareTypes],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tconfig: new Config(),\r\n\r\n\t\t\terror: '',\r\n\t\t\texpirationInterval: null,\r\n\t\t\tloading: true,\r\n\r\n\t\t\tfileInfo: null,\r\n\r\n\t\t\t// reshare Share object\r\n\t\t\treshare: null,\r\n\t\t\tsharedWithMe: {},\r\n\t\t\tshares: [],\r\n\t\t\tlinkShares: [],\r\n\r\n\t\t\tsections: OCA.Sharing.ShareTabSections.getSections(),\r\n\t\t\tprojectsEnabled: loadState('core', 'projects_enabled', false),\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t/**\r\n\t\t * Is this share shared with me?\r\n\t\t *\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tisSharedWithMe() {\r\n\t\t\treturn Object.keys(this.sharedWithMe).length > 0\r\n\t\t},\r\n\r\n\t\tcanReshare() {\r\n\t\t\treturn !!(this.fileInfo.permissions & OC.PERMISSION_SHARE)\r\n\t\t\t\t|| !!(this.reshare && this.reshare.hasSharePermission && this.config.isResharingAllowed)\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Update current fileInfo and fetch new data\r\n\t\t *\r\n\t\t * @param {object} fileInfo the current file FileInfo\r\n\t\t */\r\n\t\tasync update(fileInfo) {\r\n\t\t\tthis.fileInfo = fileInfo\r\n\t\t\tthis.resetState()\r\n\t\t\tthis.getShares()\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get the existing shares infos\r\n\t\t */\r\n\t\tasync getShares() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading = true\r\n\r\n\t\t\t\t// init params\r\n\t\t\t\tconst shareUrl = generateOcsUrl('apps/files_sharing/api/v1/shares')\r\n\t\t\t\tconst format = 'json'\r\n\t\t\t\t// TODO: replace with proper getFUllpath implementation of our own FileInfo model\r\n\t\t\t\tconst path = (this.fileInfo.path + '/' + this.fileInfo.name).replace('//', '/')\r\n\r\n\t\t\t\t// fetch shares\r\n\t\t\t\tconst fetchShares = axios.get(shareUrl, {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tformat,\r\n\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\treshares: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tconst fetchSharedWithMe = axios.get(shareUrl, {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tformat,\r\n\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\tshared_with_me: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// wait for data\r\n\t\t\t\tconst [shares, sharedWithMe] = await Promise.all([fetchShares, fetchSharedWithMe])\r\n\t\t\t\tthis.loading = false\r\n\r\n\t\t\t\t// process results\r\n\t\t\t\tthis.processSharedWithMe(sharedWithMe)\r\n\t\t\t\tthis.processShares(shares)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (error.response.data?.ocs?.meta?.message) {\r\n\t\t\t\t\tthis.error = error.response.data.ocs.meta.message\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.error = t('files_sharing', 'Unable to load the shares list')\r\n\t\t\t\t}\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tconsole.error('Error loading the shares list', error)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Reset the current view to its default state\r\n\t\t */\r\n\t\tresetState() {\r\n\t\t\tclearInterval(this.expirationInterval)\r\n\t\t\tthis.loading = true\r\n\t\t\tthis.error = ''\r\n\t\t\tthis.sharedWithMe = {}\r\n\t\t\tthis.shares = []\r\n\t\t\tthis.linkShares = []\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update sharedWithMe.subtitle with the appropriate\r\n\t\t * expiration time left\r\n\t\t *\r\n\t\t * @param {Share} share the sharedWith Share object\r\n\t\t */\r\n\t\tupdateExpirationSubtitle(share) {\r\n\t\t\tconst expiration = moment(share.expireDate).unix()\r\n\t\t\tthis.$set(this.sharedWithMe, 'subtitle', t('files_sharing', 'Expires {relativetime}', {\r\n\t\t\t\trelativetime: OC.Util.relativeModifiedDate(expiration * 1000),\r\n\t\t\t}))\r\n\r\n\t\t\t// share have expired\r\n\t\t\tif (moment().unix() > expiration) {\r\n\t\t\t\tclearInterval(this.expirationInterval)\r\n\t\t\t\t// TODO: clear ui if share is expired\r\n\t\t\t\tthis.$set(this.sharedWithMe, 'subtitle', t('files_sharing', 'this share just expired.'))\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Process the current shares data\r\n\t\t * and init shares[]\r\n\t\t *\r\n\t\t * @param {object} share the share ocs api request data\r\n\t\t * @param {object} share.data the request data\r\n\t\t */\r\n\t\tprocessShares({ data }) {\r\n\t\t\tif (data.ocs && data.ocs.data && data.ocs.data.length > 0) {\r\n\t\t\t\t// create Share objects and sort by newest\r\n\t\t\t\tconst shares = data.ocs.data\r\n\t\t\t\t\t.map(share => new Share(share))\r\n\t\t\t\t\t.sort((a, b) => b.createdTime - a.createdTime)\r\n\r\n\t\t\t\tthis.linkShares = shares.filter(share => share.type === this.SHARE_TYPES.SHARE_TYPE_LINK || share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL)\r\n\t\t\t\tthis.shares = shares.filter(share => share.type !== this.SHARE_TYPES.SHARE_TYPE_LINK && share.type !== this.SHARE_TYPES.SHARE_TYPE_EMAIL)\r\n\r\n\t\t\t\tconsole.debug('Processed', this.linkShares.length, 'link share(s)')\r\n\t\t\t\tconsole.debug('Processed', this.shares.length, 'share(s)')\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Process the sharedWithMe share data\r\n\t\t * and init sharedWithMe\r\n\t\t *\r\n\t\t * @param {object} share the share ocs api request data\r\n\t\t * @param {object} share.data the request data\r\n\t\t */\r\n\t\tprocessSharedWithMe({ data }) {\r\n\t\t\tif (data.ocs && data.ocs.data && data.ocs.data[0]) {\r\n\t\t\t\tconst share = new Share(data)\r\n\t\t\t\tconst title = shareWithTitle(share)\r\n\t\t\t\tconst displayName = share.ownerDisplayName\r\n\t\t\t\tconst user = share.owner\r\n\r\n\t\t\t\tthis.sharedWithMe = {\r\n\t\t\t\t\tdisplayName,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tuser,\r\n\t\t\t\t}\r\n\t\t\t\tthis.reshare = share\r\n\r\n\t\t\t\t// If we have an expiration date, use it as subtitle\r\n\t\t\t\t// Refresh the status every 10s and clear if expired\r\n\t\t\t\tif (share.expireDate && moment(share.expireDate).unix() > moment().unix()) {\r\n\t\t\t\t\t// first update\r\n\t\t\t\t\tthis.updateExpirationSubtitle(share)\r\n\t\t\t\t\t// interval update\r\n\t\t\t\t\tthis.expirationInterval = setInterval(this.updateExpirationSubtitle, 10000, share)\r\n\t\t\t\t}\r\n\t\t\t} else if (this.fileInfo && this.fileInfo.shareOwnerId !== undefined ? this.fileInfo.shareOwnerId !== OC.currentUser : false) {\r\n\t\t\t\t// Fallback to compare owner and current user.\r\n\t\t\t\tthis.sharedWithMe = {\r\n\t\t\t\t\tdisplayName: this.fileInfo.shareOwner,\r\n\t\t\t\t\ttitle: t(\r\n\t\t\t\t\t\t'files_sharing',\r\n\t\t\t\t\t\t'Shared with you by {owner}',\r\n\t\t\t\t\t\t{ owner: this.fileInfo.shareOwner },\r\n\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\t{ escape: false }\r\n\t\t\t\t\t),\r\n\t\t\t\t\tuser: this.fileInfo.shareOwnerId,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add a new share into the shares list\r\n\t\t * and return the newly created share component\r\n\t\t *\r\n\t\t * @param {Share} share the share to add to the array\r\n\t\t * @param {Function} [resolve] a function to run after the share is added and its component initialized\r\n\t\t */\r\n\t\taddShare(share, resolve = () => {}) {\r\n\t\t\t// only catching share type MAIL as link shares are added differently\r\n\t\t\t// meaning: not from the ShareInput\r\n\t\t\tif (share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\r\n\t\t\t\tthis.linkShares.unshift(share)\r\n\t\t\t} else {\r\n\t\t\t\tthis.shares.unshift(share)\r\n\t\t\t}\r\n\t\t\tthis.awaitForShare(share, resolve)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Await for next tick and render after the list updated\r\n\t\t * Then resolve with the matched vue component of the\r\n\t\t * provided share object\r\n\t\t *\r\n\t\t * @param {Share} share newly created share\r\n\t\t * @param {Function} resolve a function to execute after\r\n\t\t */\r\n\t\tawaitForShare(share, resolve) {\r\n\t\t\tlet listComponent = this.$refs.shareList\r\n\t\t\t// Only mail shares comes from the input, link shares\r\n\t\t\t// are managed internally in the SharingLinkList component\r\n\t\t\tif (share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\r\n\t\t\t\tlistComponent = this.$refs.linkShareList\r\n\t\t\t}\r\n\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tconst newShare = listComponent.$children.find(component => component.share === share)\r\n\t\t\t\tif (newShare) {\r\n\t\t\t\t\tresolve(newShare)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.emptyContentWithSections {\r\n\tmargin: 1rem auto;\r\n}\r\n\r\n.sharingTab {\r\n\t&__content {\r\n\t\tpadding: 0 6px;\r\n\t}\r\n\t&__additionalContent {\r\n\t\tmargin: 44px 0;\r\n\t}\r\n}\r\n</style>\r\n","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author Joas Schilling <coding@schilljs.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { Type as ShareTypes } from '@nextcloud/sharing'\r\n\r\nconst shareWithTitle = function(share) {\r\n\tif (share.type === ShareTypes.SHARE_TYPE_GROUP) {\r\n\t\treturn t(\r\n\t\t\t'files_sharing',\r\n\t\t\t'Shared with you and the group {group} by {owner}',\r\n\t\t\t{\r\n\t\t\t\tgroup: share.shareWithDisplayName,\r\n\t\t\t\towner: share.ownerDisplayName,\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\t{ escape: false }\r\n\t\t)\r\n\t} else if (share.type === ShareTypes.SHARE_TYPE_CIRCLE) {\r\n\t\treturn t(\r\n\t\t\t'files_sharing',\r\n\t\t\t'Shared with you and {circle} by {owner}',\r\n\t\t\t{\r\n\t\t\t\tcircle: share.shareWithDisplayName,\r\n\t\t\t\towner: share.ownerDisplayName,\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\t{ escape: false }\r\n\t\t)\r\n\t} else if (share.type === ShareTypes.SHARE_TYPE_ROOM) {\r\n\t\tif (share.shareWithDisplayName) {\r\n\t\t\treturn t(\r\n\t\t\t\t'files_sharing',\r\n\t\t\t\t'Shared with you and the conversation {conversation} by {owner}',\r\n\t\t\t\t{\r\n\t\t\t\t\tconversation: share.shareWithDisplayName,\r\n\t\t\t\t\towner: share.ownerDisplayName,\r\n\t\t\t\t},\r\n\t\t\t\tundefined,\r\n\t\t\t\t{ escape: false }\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn t(\r\n\t\t\t\t'files_sharing',\r\n\t\t\t\t'Shared with you in a conversation by {owner}',\r\n\t\t\t\t{\r\n\t\t\t\t\towner: share.ownerDisplayName,\r\n\t\t\t\t},\r\n\t\t\t\tundefined,\r\n\t\t\t\t{ escape: false }\r\n\t\t\t)\r\n\t\t}\r\n\t} else {\r\n\t\treturn t(\r\n\t\t\t'files_sharing',\r\n\t\t\t'Shared with you by {owner}',\r\n\t\t\t{ owner: share.ownerDisplayName },\r\n\t\t\tundefined,\r\n\t\t\t{ escape: false }\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport { shareWithTitle }\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=style&index=0&id=0f81577f&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=style&index=0&id=0f81577f&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingTab.vue?vue&type=template&id=0f81577f&scoped=true&\"\nimport script from \"./SharingTab.vue?vue&type=script&lang=js&\"\nexport * from \"./SharingTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SharingTab.vue?vue&type=style&index=0&id=0f81577f&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f81577f\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0f81577f')) {\n      api.createRecord('0f81577f', component.options)\n    } else {\n      api.reload('0f81577f', component.options)\n    }\n    module.hot.accept(\"./SharingTab.vue?vue&type=template&id=0f81577f&scoped=true&\", function () {\n      api.rerender('0f81577f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/views/SharingTab.vue\"\nexport default component.exports","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default class ShareSearch {\r\n\r\n\t_state\r\n\r\n\tconstructor() {\r\n\t\t// init empty state\r\n\t\tthis._state = {}\r\n\r\n\t\t// init default values\r\n\t\tthis._state.results = []\r\n\t\tconsole.debug('OCA.Sharing.ShareSearch initialized')\r\n\t}\r\n\r\n\t/**\r\n\t * Get the state\r\n\t *\r\n\t * @readonly\r\n\t * @memberof ShareSearch\r\n\t * @return {object} the data state\r\n\t */\r\n\tget state() {\r\n\t\treturn this._state\r\n\t}\r\n\r\n\t/**\r\n\t * Register a new result\r\n\t * Mostly used by the guests app.\r\n\t * We should consider deprecation and add results via php ?\r\n\t *\r\n\t * @param {object} result entry to append\r\n\t * @param {string} [result.user] entry user\r\n\t * @param {string} result.displayName entry first line\r\n\t * @param {string} [result.desc] entry second line\r\n\t * @param {string} [result.icon] entry icon\r\n\t * @param {Function} result.handler function to run on entry selection\r\n\t * @param {Function} [result.condition] condition to add entry or not\r\n\t * @return {boolean}\r\n\t */\r\n\taddNewResult(result) {\r\n\t\tif (result.displayName.trim() !== ''\r\n\t\t\t&& typeof result.handler === 'function') {\r\n\t\t\tthis._state.results.push(result)\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tconsole.error('Invalid search result provided', result)\r\n\t\treturn false\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default class ExternalLinkActions {\r\n\r\n\t_state\r\n\r\n\tconstructor() {\r\n\t\t// init empty state\r\n\t\tthis._state = {}\r\n\r\n\t\t// init default values\r\n\t\tthis._state.actions = []\r\n\t\tconsole.debug('OCA.Sharing.ExternalLinkActions initialized')\r\n\t}\r\n\r\n\t/**\r\n\t * Get the state\r\n\t *\r\n\t * @readonly\r\n\t * @memberof ExternalLinkActions\r\n\t * @return {object} the data state\r\n\t */\r\n\tget state() {\r\n\t\treturn this._state\r\n\t}\r\n\r\n\t/**\r\n\t * Register a new action for the link share\r\n\t * Mostly used by the social sharing app.\r\n\t *\r\n\t * @param {object} action new action component to register\r\n\t * @return {boolean}\r\n\t */\r\n\tregisterAction(action) {\r\n\t\tconsole.warn('OCA.Sharing.ExternalLinkActions is deprecated, use OCA.Sharing.ExternalShareAction instead')\r\n\r\n\t\tif (typeof action === 'object' && action.icon && action.name && action.url) {\r\n\t\t\tthis._state.actions.push(action)\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tconsole.error('Invalid action provided', action)\r\n\t\treturn false\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default class ExternalShareActions {\r\n\r\n\t_state\r\n\r\n\tconstructor() {\r\n\t\t// init empty state\r\n\t\tthis._state = {}\r\n\r\n\t\t// init default values\r\n\t\tthis._state.actions = []\r\n\t\tconsole.debug('OCA.Sharing.ExternalShareActions initialized')\r\n\t}\r\n\r\n\t/**\r\n\t * Get the state\r\n\t *\r\n\t * @readonly\r\n\t * @memberof ExternalLinkActions\r\n\t * @return {object} the data state\r\n\t */\r\n\tget state() {\r\n\t\treturn this._state\r\n\t}\r\n\r\n\t/**\r\n\t * Register a new option/entry for the a given share type\r\n\t *\r\n\t * @param {object} action new action component to register\r\n\t * @param {string} action.id unique action id\r\n\t * @param {Function} action.data data to bind the component to\r\n\t * @param {Array} action.shareType list of \\@nextcloud/sharing.Types.SHARE_XXX to be mounted on\r\n\t * @param {object} action.handlers list of listeners\r\n\t * @return {boolean}\r\n\t */\r\n\tregisterAction(action) {\r\n\t\t// Validate action\r\n\t\tif (typeof action !== 'object'\r\n\t\t\t|| typeof action.id !== 'string'\r\n\t\t\t|| typeof action.data !== 'function' // () => {disabled: true}\r\n\t\t\t|| !Array.isArray(action.shareType) // [\\@nextcloud/sharing.Types.SHARE_TYPE_LINK, ...]\r\n\t\t\t|| typeof action.handlers !== 'object' // {click: () => {}, ...}\r\n\t\t\t|| !Object.values(action.handlers).every(handler => typeof handler === 'function')) {\r\n\t\t\tconsole.error('Invalid action provided', action)\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\t// Check duplicates\r\n\t\tconst hasDuplicate = this._state.actions.findIndex(check => check.id === action.id) > -1\r\n\t\tif (hasDuplicate) {\r\n\t\t\tconsole.error(`An action with the same id ${action.id} already exists`, action)\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tthis._state.actions.push(action)\r\n\t\treturn true\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default class TabSections {\r\n\r\n\t_sections\r\n\r\n\tconstructor() {\r\n\t\tthis._sections = []\r\n\t}\r\n\r\n\t/**\r\n\t * @param {registerSectionCallback} section To be called to mount the section to the sharing sidebar\r\n\t */\r\n\tregisterSection(section) {\r\n\t\tthis._sections.push(section)\r\n\t}\r\n\r\n\tgetSections() {\r\n\t\treturn this._sections\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport Vue from 'vue'\r\nimport VueClipboard from 'vue-clipboard2'\r\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\r\n\r\nimport SharingTab from './views/SharingTab'\r\nimport ShareSearch from './services/ShareSearch'\r\nimport ExternalLinkActions from './services/ExternalLinkActions'\r\nimport ExternalShareActions from './services/ExternalShareActions'\r\nimport TabSections from './services/TabSections'\r\n\r\n// Init Sharing Tab Service\r\nif (!window.OCA.Sharing) {\r\n\twindow.OCA.Sharing = {}\r\n}\r\nObject.assign(window.OCA.Sharing, { ShareSearch: new ShareSearch() })\r\nObject.assign(window.OCA.Sharing, { ExternalLinkActions: new ExternalLinkActions() })\r\nObject.assign(window.OCA.Sharing, { ExternalShareActions: new ExternalShareActions() })\r\nObject.assign(window.OCA.Sharing, { ShareTabSections: new TabSections() })\r\n\r\nVue.prototype.t = t\r\nVue.prototype.n = n\r\nVue.use(VueClipboard)\r\n\r\n// Init Sharing tab component\r\nconst View = Vue.extend(SharingTab)\r\nlet TabInstance = null\r\n\r\nwindow.addEventListener('DOMContentLoaded', function() {\r\n\tif (OCA.Files && OCA.Files.Sidebar) {\r\n\t\tOCA.Files.Sidebar.registerTab(new OCA.Files.Sidebar.Tab({\r\n\t\t\tid: 'sharing',\r\n\t\t\tname: t('files_sharing', 'Sharing'),\r\n\t\t\ticon: 'icon-share',\r\n\r\n\t\t\tasync mount(el, fileInfo, context) {\r\n\t\t\t\tif (TabInstance) {\r\n\t\t\t\t\tTabInstance.$destroy()\r\n\t\t\t\t}\r\n\t\t\t\tTabInstance = new View({\r\n\t\t\t\t\t// Better integration with vue parent component\r\n\t\t\t\t\tparent: context,\r\n\t\t\t\t})\r\n\t\t\t\t// Only mount after we have all the info we need\r\n\t\t\t\tawait TabInstance.update(fileInfo)\r\n\t\t\t\tTabInstance.$mount(el)\r\n\t\t\t},\r\n\t\t\tupdate(fileInfo) {\r\n\t\t\t\tTabInstance.update(fileInfo)\r\n\t\t\t},\r\n\t\t\tdestroy() {\r\n\t\t\t\tTabInstance.$destroy()\r\n\t\t\t\tTabInstance = null\r\n\t\t\t},\r\n\t\t}))\r\n\t}\r\n})\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".error[data-v-7f000276]  .action-checkbox__label:before{border:1px solid var(--color-error)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharePermissionsEditor.vue\"],\"names\":[],\"mappings\":\"AAiSC,wDACC,mCAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.error {\\r\\n\\t::v-deep .action-checkbox__label:before {\\r\\n\\t\\tborder: 1px solid var(--color-error);\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-61240f7a]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-61240f7a]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em}.sharing-entry__desc p[data-v-61240f7a]{color:var(--color-text-maxcontrast)}.sharing-entry__desc-unique[data-v-61240f7a]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-61240f7a]{margin-left:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntry.vue\"],\"names\":[],\"mappings\":\"AAmdA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAED,6CACC,mCAAA,CAGF,yCACC,gBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.sharing-entry {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\theight: 44px;\\r\\n\\t&__desc {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t\\tpadding: 8px;\\r\\n\\t\\tline-height: 1.2em;\\r\\n\\t\\tp {\\r\\n\\t\\t\\tcolor: var(--color-text-maxcontrast);\\r\\n\\t\\t}\\r\\n\\t\\t&-unique {\\r\\n\\t\\t\\tcolor: var(--color-text-maxcontrast);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t&__actions {\\r\\n\\t\\tmargin-left: auto;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-06bd31b0]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-06bd31b0]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em}.sharing-entry__desc p[data-v-06bd31b0]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-06bd31b0]{margin-left:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntryInherited.vue\"],\"names\":[],\"mappings\":\"AAgGA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAGF,yCACC,gBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.sharing-entry {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\theight: 44px;\\r\\n\\t&__desc {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t\\tpadding: 8px;\\r\\n\\t\\tline-height: 1.2em;\\r\\n\\t\\tp {\\r\\n\\t\\t\\tcolor: var(--color-text-maxcontrast);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t&__actions {\\r\\n\\t\\tmargin-left: auto;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry__internal .avatar-external[data-v-f55cfc52]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}.sharing-entry__internal .icon-checkmark-color[data-v-f55cfc52]{opacity:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntryInternal.vue\"],\"names\":[],\"mappings\":\"AA2GC,2DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA,CAED,gEACC,SAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.sharing-entry__internal {\\r\\n\\t.avatar-external {\\r\\n\\t\\twidth: 32px;\\r\\n\\t\\theight: 32px;\\r\\n\\t\\tline-height: 32px;\\r\\n\\t\\tfont-size: 18px;\\r\\n\\t\\tbackground-color: var(--color-text-maxcontrast);\\r\\n\\t\\tborder-radius: 50%;\\r\\n\\t\\tflex-shrink: 0;\\r\\n\\t}\\r\\n\\t.icon-checkmark-color {\\r\\n\\t\\topacity: 1;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-7a675594]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-7a675594]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em;overflow:hidden}.sharing-entry__desc p[data-v-7a675594]{color:var(--color-text-maxcontrast)}.sharing-entry__title[data-v-7a675594]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.sharing-entry:not(.sharing-entry--share) .sharing-entry__actions .new-share-link[data-v-7a675594]{border-top:1px solid var(--color-border)}.sharing-entry[data-v-7a675594]  .avatar-link-share{background-color:var(--color-primary)}.sharing-entry .sharing-entry__action--public-upload[data-v-7a675594]{border-bottom:1px solid var(--color-border)}.sharing-entry__loading[data-v-7a675594]{width:44px;height:44px;margin:0;padding:14px;margin-left:auto}.sharing-entry .action-item[data-v-7a675594]{margin-left:auto}.sharing-entry .action-item~.action-item[data-v-7a675594],.sharing-entry .action-item~.sharing-entry__loading[data-v-7a675594]{margin-left:0}.sharing-entry .icon-checkmark-color[data-v-7a675594]{opacity:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntryLink.vue\"],\"names\":[],\"mappings\":\"AA62BA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CAEA,wCACC,mCAAA,CAGF,uCACC,sBAAA,CACA,eAAA,CACA,kBAAA,CAIA,mGACC,wCAAA,CAIF,oDACC,qCAAA,CAGD,sEACC,2CAAA,CAGD,yCACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,gBAAA,CAKD,6CACC,gBAAA,CACA,+HAEC,aAAA,CAIF,sDACC,SAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.sharing-entry {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tmin-height: 44px;\\r\\n\\t&__desc {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t\\tpadding: 8px;\\r\\n\\t\\tline-height: 1.2em;\\r\\n\\t\\toverflow: hidden;\\r\\n\\r\\n\\t\\tp {\\r\\n\\t\\t\\tcolor: var(--color-text-maxcontrast);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t&__title {\\r\\n\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\toverflow: hidden;\\r\\n\\t\\twhite-space: nowrap;\\r\\n\\t}\\r\\n\\r\\n\\t&:not(.sharing-entry--share) &__actions {\\r\\n\\t\\t.new-share-link {\\r\\n\\t\\t\\tborder-top: 1px solid var(--color-border);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t::v-deep .avatar-link-share {\\r\\n\\t\\tbackground-color: var(--color-primary);\\r\\n\\t}\\r\\n\\r\\n\\t.sharing-entry__action--public-upload {\\r\\n\\t\\tborder-bottom: 1px solid var(--color-border);\\r\\n\\t}\\r\\n\\r\\n\\t&__loading {\\r\\n\\t\\twidth: 44px;\\r\\n\\t\\theight: 44px;\\r\\n\\t\\tmargin: 0;\\r\\n\\t\\tpadding: 14px;\\r\\n\\t\\tmargin-left: auto;\\r\\n\\t}\\r\\n\\r\\n\\t// put menus to the left\\r\\n\\t// but only the first one\\r\\n\\t.action-item {\\r\\n\\t\\tmargin-left: auto;\\r\\n\\t\\t~ .action-item,\\r\\n\\t\\t~ .sharing-entry__loading {\\r\\n\\t\\t\\tmargin-left: 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t.icon-checkmark-color {\\r\\n\\t\\topacity: 1;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-354542cc]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-354542cc]{padding:8px;line-height:1.2em;position:relative;flex:1 1;min-width:0}.sharing-entry__desc p[data-v-354542cc]{color:var(--color-text-maxcontrast)}.sharing-entry__title[data-v-354542cc]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:inherit}.sharing-entry__actions[data-v-354542cc]{margin-left:auto !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntrySimple.vue\"],\"names\":[],\"mappings\":\"AA4FA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,QAAA,CACA,WAAA,CACA,wCACC,mCAAA,CAGF,uCACC,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CAED,yCACC,2BAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.sharing-entry {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tmin-height: 44px;\\r\\n\\t&__desc {\\r\\n\\t\\tpadding: 8px;\\r\\n\\t\\tline-height: 1.2em;\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tflex: 1 1;\\r\\n\\t\\tmin-width: 0;\\r\\n\\t\\tp {\\r\\n\\t\\t\\tcolor: var(--color-text-maxcontrast);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t&__title {\\r\\n\\t\\twhite-space: nowrap;\\r\\n\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\toverflow: hidden;\\r\\n\\t\\tmax-width: inherit;\\r\\n\\t}\\r\\n\\t&__actions {\\r\\n\\t\\tmargin-left: auto !important;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-search{display:flex;flex-direction:column;margin-bottom:4px}.sharing-search label[for=sharing-search-input]{margin-bottom:2px}.sharing-search__input{width:100%;margin:10px 0}.sharing-search__input .multiselect__option span[lookup] .avatardiv{background-image:var(--icon-search-white);background-repeat:no-repeat;background-position:center;background-color:var(--color-text-maxcontrast) !important}.sharing-search__input .multiselect__option span[lookup] .avatardiv div{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingInput.vue\"],\"names\":[],\"mappings\":\"AA+gBA,gBACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,gDACC,iBAAA,CAGD,uBACC,UAAA,CACA,aAAA,CAKE,oEACC,yCAAA,CACA,2BAAA,CACA,0BAAA,CACA,yDAAA,CACA,wEACC,YAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.sharing-search {\\r\\n\\tdisplay: flex;\\r\\n\\tflex-direction: column;\\r\\n\\tmargin-bottom: 4px;\\r\\n\\r\\n\\tlabel[for=\\\"sharing-search-input\\\"] {\\r\\n\\t\\tmargin-bottom: 2px;\\r\\n\\t}\\r\\n\\r\\n\\t&__input {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\tmargin: 10px 0;\\r\\n\\r\\n\\t\\t// properly style the lookup entry\\r\\n\\t\\t.multiselect__option {\\r\\n\\t\\t\\tspan[lookup] {\\r\\n\\t\\t\\t\\t.avatardiv {\\r\\n\\t\\t\\t\\t\\tbackground-image: var(--icon-search-white);\\r\\n\\t\\t\\t\\t\\tbackground-repeat: no-repeat;\\r\\n\\t\\t\\t\\t\\tbackground-position: center;\\r\\n\\t\\t\\t\\t\\tbackground-color: var(--color-text-maxcontrast) !important;\\r\\n\\t\\t\\t\\t\\tdiv {\\r\\n\\t\\t\\t\\t\\t\\tdisplay: none;\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry__inherited .avatar-shared[data-v-3f1bda78]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/views/SharingInherited.vue\"],\"names\":[],\"mappings\":\"AAgKC,0DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.sharing-entry__inherited {\\r\\n\\t.avatar-shared {\\r\\n\\t\\twidth: 32px;\\r\\n\\t\\theight: 32px;\\r\\n\\t\\tline-height: 32px;\\r\\n\\t\\tfont-size: 18px;\\r\\n\\t\\tbackground-color: var(--color-text-maxcontrast);\\r\\n\\t\\tborder-radius: 50%;\\r\\n\\t\\tflex-shrink: 0;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".emptyContentWithSections[data-v-0f81577f]{margin:1rem auto}.sharingTab__content[data-v-0f81577f]{padding:0 6px}.sharingTab__additionalContent[data-v-0f81577f]{margin:44px 0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/views/SharingTab.vue\"],\"names\":[],\"mappings\":\"AA2WA,2CACC,gBAAA,CAIA,sCACC,aAAA,CAED,gDACC,aAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.emptyContentWithSections {\\r\\n\\tmargin: 1rem auto;\\r\\n}\\r\\n\\r\\n.sharingTab {\\r\\n\\t&__content {\\r\\n\\t\\tpadding: 0 6px;\\r\\n\\t}\\r\\n\\t&__additionalContent {\\r\\n\\t\\tmargin: 44px 0;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 7870;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t7870: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7874], function() { return __webpack_require__(37326); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","render","_vm","this","_h","$createElement","_c","_self","class","loading","error","staticClass","emptyContentWithSections","sections","length","_v","_s","isSharedWithMe","_b","scopedSlots","_u","key","fn","attrs","user","sharedWithMe","displayName","proxy","_e","canReshare","fileInfo","linkShares","reshare","shares","on","addShare","ref","projectsEnabled","id","type","name","_l","section","index","refInFor","$refs","tag","_withStripped","Config","document","getElementsByClassName","dataset","allowPublicUpload","getElementById","value","OC","appConfig","core","federatedCloudShareDoc","isDefaultExpireDateEnabled","Date","setDate","getDate","defaultExpireDate","isDefaultInternalExpireDateEnabled","defaultInternalExpireDate","isDefaultRemoteExpireDateEnabled","defaultRemoteExpireDate","enforcePasswordForPublicLink","enableLinkPasswordByDefault","defaultExpireDateEnforced","defaultExpireDateEnabled","defaultInternalExpireDateEnforced","defaultRemoteExpireDateEnforced","defaultInternalExpireDateEnabled","defaultRemoteExpireDateEnabled","remoteShareAllowed","capabilities","getCapabilities","undefined","files_sharing","sharebymail","public","enabled","resharingAllowed","password","enforced","sharee","always_show_unique","allowGroupSharing","parseInt","config","password_policy","Share","ocsData","ocs","data","hide_download","mail_send","attributes","JSON","parse","e","console","warn","_share","share_type","permissions","uid_owner","displayname_owner","share_with","share_with_displayname","share_with_displayname_unique","share_with_link","share_with_avatar","uid_file_owner","displayname_file_owner","stime","expiration","date","token","note","label","state","password_expiration_time","passwordExpirationTime","send_password_by_talk","sendPasswordByTalk","path","item_type","mimetype","file_source","file_target","file_parent","PERMISSION_READ","PERMISSION_CREATE","PERMISSION_DELETE","PERMISSION_UPDATE","PERMISSION_SHARE","i","attr","scope","setAttribute","attrUpdate","push","can_edit","can_delete","via_fileid","via_path","parent","storage_id","storage","item_source","status","SHARE_TYPES","ShareTypes","title","t","subtitle","internalLinkSubtitle","href","internalLink","target","icon","copied","copySuccess","click","$event","preventDefault","copyLink","apply","arguments","clipboardTooltip","_t","directives","rawName","tooltip","expression","$slots","ariaExpandedValue","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","component","__file","for","disabled","placeholder","inputPlaceholder","searchable","asyncFind","select","noResultText","passwordSet","passwordPolicy","api","generate","axios","request","info","Array","fill","reduce","prev","curr","charAt","Math","floor","random","shareUrl","generateOcsUrl","methods","createShare","shareType","shareWith","publicUpload","expireDate","errorMessage","response","meta","message","Notification","showTemporary","deleteShare","updateShare","properties","Error","mainTitle","subTitle","showInheritedShares","showInheritedSharesIcon","stopPropagation","toggleInheritedShares","toggleTooltip","share","shareWithDisplayName","initiator","ownerDisplayName","viaPath","viaFileid","viaFileTargetUrl","folder","viaFolderName","canDelete","onDelete","mixins","SharesRequests","props","Object","default","required","isUnique","Boolean","errors","saving","open","updateQueue","PQueue","concurrency","reactiveState","computed","hasNote","get","set","dateTomorrow","lang","weekdaysShort","window","dayNamesShort","monthsShort","monthNamesShort","formatLocale","firstDayOfWeek","firstDay","weekdaysMin","monthFormat","isShareOwner","owner","getCurrentUser","uid","checkShare","trim","expirationDate","isValid","parseDateString","match","pop","formatDateToString","UTC","getFullYear","getMonth","toISOString","split","onExpirationChange","queueUpdate","onExpirationDisable","onNoteChange","$set","onNoteSubmit","newNote","$delete","debug","$emit","propertyNames","forEach","stringify","toString","add","updatedShare","indexOf","onSyncError","property","propertyEl","$el","focusable","querySelector","focus","debounceQueueUpdate","debounce","canLinkShare","hasLinkShares","hasShares","awaitForShare","removeShare","isEmailShareType","shareLink","pending","pendingPassword","pendingExpirationDate","close","onMenuClose","canEdit","content","show","trigger","defaultContainer","modifiers","auto","newLabel","maxlength","onLabelChange","submit","onLabelSubmit","checked","hideDownload","canChangeHideDownload","change","isPasswordProtected","uncheck","onPasswordDisable","hasUnsavedPassword","newPassword","autocomplete","onPasswordChange","onPasswordSubmit","isPasswordProtectedByTalkAvailable","isPasswordProtectedByTalk","canTogglePasswordProtectedByTalkAvailable","onPasswordProtectedByTalkChange","hasExpirationDate","isDefaultExpireDateEnforced","min","max","dateMaxEnforced","input","externalLinkActions","action","externalLegacyLinkActions","url","onNewLinkShare","minlength","isPasswordPolicyEnabled","minLength","onCancel","is","_g","handlers","text","isFolder","shareHasPermissions","atomicPermissions","UPDATE","toggleSharePermissions","fileHasCreatePermission","isPublicUploadEnabled","showCustomPermissionsForm","sharePermissionsSetIsValid","READ","canToggleSharePermissions","CREATE","DELETE","sharePermissionEqual","bundledPermissions","READ_ONLY","randomFormName","setSharePermissions","UPLOAD_AND_UPDATE","FILE_DROP","sharePermissionsIsBundle","sharePermissionsSummary","ATOMIC_PERMISSIONS","NONE","SHARE","BUNDLED_PERMISSIONS","ALL","hasPermissions","initialPermissionSet","permissionsToCheck","permissionsSetIsValid","permissionsSet","togglePermissions","permissionsToToggle","permissionsToSubtract","subtractPermissions","permissionsToAdd","addPermissions","permissionSet","SHARE_TYPE_USER","shareWithAvatar","shareWithLink","shareWithDisplayNameUnique","hasStatus","permissionsEdit","canSetEdit","canCreate","permissionsCreate","canSetCreate","permissionsDelete","canSetDelete","isResharingAllowed","permissionsShare","canSetReshare","isSetDownloadButtonVisible","canDownload","canSetDownload","allowDownloadText","isDefaultInternalExpireDateEnforced","canHaveNote","group","escape","circle","conversation","ShareSearch","_state","results","result","handler","ExternalLinkActions","actions","ExternalShareActions","isArray","values","every","findIndex","check","TabSections","_sections","OCA","Sharing","assign","ShareTabSections","Vue","n","VueClipboard","View","SharingTab","TabInstance","addEventListener","Files","Sidebar","registerTab","Tab","mount","el","context","$destroy","update","$mount","destroy","___CSS_LOADER_EXPORT___","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","call","m","amdD","amdO","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","keys","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","b","baseURI","self","location","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","bind","nc","__webpack_exports__"],"sourceRoot":""}