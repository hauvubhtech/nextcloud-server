{"version":3,"file":"core-files_client.js?v=366b5a754e04c503dcf6","mappings":";6BAAIA,mDCqCJ,SAAUC,EAAIC,GAeb,IAAIC,EAAS,SAATA,EAAkBC,GACrBC,KAAKC,MAAQF,EAAQG,KAC4B,MAA7CF,KAAKC,MAAME,OAAOH,KAAKC,MAAMG,OAAS,KACzCJ,KAAKC,MAAQD,KAAKC,MAAMI,OAAO,EAAGL,KAAKC,MAAMG,OAAS,IAGvD,IAAIE,EAAMR,EAAOS,cAAgB,MAC7BR,EAAQS,WACXF,EAAMR,EAAOW,eAAiB,OAG/BH,GAAOP,EAAQW,KAAOV,KAAKC,MAC3BD,KAAKW,MAAQZ,EAAQW,KACrBV,KAAKY,gBAAkBb,EAAQc,gBAAkB,CAChD,mBAAoB,iBACpB,aAAgBjB,EAAGkB,cAEpBd,KAAKe,SAAWT,EAEhB,IAAMU,EAAgB,CACrBC,QAASjB,KAAKe,SACdG,cAAe,CACd,OAAQ,IACR,yBAA0B,KAC1B,0BAA2B,KAC3B,4CAA6C,QAG3CnB,EAAQoB,WACXH,EAAcG,SAAWpB,EAAQoB,UAE9BpB,EAAQqB,WACXJ,EAAcI,SAAWrB,EAAQqB,UAElCpB,KAAKqB,QAAU,IAAIC,IAAIxB,OAAOkB,GAC9BhB,KAAKqB,QAAQE,YAAcC,EAAEC,KAAKzB,KAAK0B,aAAc1B,MACrDA,KAAK2B,iBAAmB,EACxB,EAED7B,EAAO8B,YAAc,yBACrB9B,EAAO+B,aAAe,0BACtB/B,EAAOgC,OAAS,OAChBhC,EAAOiC,OAAS,4CAEhBjC,EAAOkC,yBAA2B,IAAMlC,EAAOgC,OAAS,mBACxDhC,EAAOmC,iBAAmB,IAAMnC,EAAOgC,OAAS,WAChDhC,EAAOoC,wBAA0B,IAAMpC,EAAOgC,OAAS,kBACvDhC,EAAOqC,sBAAwB,IAAMrC,EAAOgC,OAAS,gBACrDhC,EAAOsC,yBAA2B,IAAMtC,EAAO8B,YAAc,UAC7D9B,EAAOuC,qBAAuB,IAAMvC,EAAO8B,YAAc,eACzD9B,EAAOwC,cAAgB,IAAMxC,EAAO8B,YAAc,QAClD9B,EAAOyC,0BAA4B,IAAMzC,EAAOgC,OAAS,oBACzDhC,EAAO0C,qBAAuB,IAAM1C,EAAOgC,OAAS,gBACpDhC,EAAO2C,2BAA6B,IAAM3C,EAAOiC,OAAS,qBAC1DjC,EAAO4C,0BAA4B,IAAM5C,EAAO+B,aAAe,oBAC/D/B,EAAO6C,+BAAiC,IAAM7C,EAAOgC,OAAS,yBAE9DhC,EAAOS,cAAgB,OACvBT,EAAOW,eAAiB,QAExBX,EAAO8C,qBAAuB,CAI7B,CAAC9C,EAAOgC,OAAQ,mBAIhB,CAAChC,EAAOgC,OAAQ,WAIhB,CAAChC,EAAOgC,OAAQ,kBAIhB,CAAChC,EAAOgC,OAAQ,gBAIhB,CAAChC,EAAO8B,YAAa,UAIrB,CAAC9B,EAAO8B,YAAa,eAKrB,CAAC9B,EAAO8B,YAAa,QAIrB,CAAC9B,EAAOgC,OAAQ,oBAChB,CAAChC,EAAOgC,OAAQ,yBAIhB,CAAChC,EAAO+B,aAAc,eAItB,CAAC/B,EAAO+B,aAAc,cAItB,CAAC/B,EAAO+B,aAAc,gBAItB,CAAC/B,EAAOiC,OAAQ,qBAIhB,CAACjC,EAAO+B,aAAc,qBAMvB/B,EAAO+C,UAAY,CAOlB5C,MAAO,KAOPoB,QAAS,KAOTM,iBAAkB,GAMlBD,aAAc,WACb,IAAMoB,EAAU9C,KAAKY,gBACfmC,EAAM,IAAIC,eACVC,EAAUF,EAAIG,KAWpB,OATAH,EAAIG,KAAO,WACV,IAAMC,EAASF,EAAQG,MAAMpD,KAAMqD,WAInC,OAHA7B,EAAE8B,KAAKR,GAAS,SAASS,EAAOC,GAC/BT,EAAIU,iBAAiBD,EAAKD,EAC1B,IACMJ,CACP,EAEDvD,EAAG8D,8BAA8BX,GAC1BA,CACP,EAUDY,UAAW,WACV,IAAIC,EAAO5D,KAAK6D,WAAWT,MAAMpD,KAAMqD,WAOvC,MANuC,MAAnCO,EAAKzD,OAAO,CAACyD,EAAKxD,OAAS,MAC9BwD,EAAOA,EAAKvD,OAAO,EAAGuD,EAAKxD,OAAS,IAEd,MAAnBwD,EAAKzD,OAAO,KACfyD,EAAOA,EAAKvD,OAAO,IAEbL,KAAKe,SAAW,IAAM6C,CAC7B,EAWDC,WAAY,WACX,IAEIC,EAFAF,EAAOhE,EAAGmE,UAAUX,MAAMpD,KAAMqD,WAC9BW,EAAWJ,EAAKK,MAAM,KAE5B,IAAKH,EAAI,EAAGA,EAAIE,EAAS5D,OAAQ0D,IAChCE,EAASF,GAAKI,mBAAmBF,EAASF,IAG3C,OADOE,EAASG,KAAK,IAErB,EASDC,cAAe,SAASC,GAGvB,IAFA,IAAMC,EAAaD,EAAcJ,MAAM,MACjCnB,EAAU,CAAC,EACRgB,EAAI,EAAGA,EAAIQ,EAAWlE,OAAQ0D,IAAK,CAC3C,IAAMS,EAASD,EAAWR,GAAGU,QAAQ,KACrC,KAAID,EAAS,GAAb,CAIA,IAAME,EAAaH,EAAWR,GAAGzD,OAAO,EAAGkE,GACrCG,EAAcJ,EAAWR,GAAGzD,OAAOkE,EAAS,GAE7CzB,EAAQ2B,KAEZ3B,EAAQ2B,GAAc,IAGvB3B,EAAQ2B,GAAYE,KAAKD,EAVxB,CAWD,CACD,OAAO5B,CACP,EASD8B,WAAY,SAASC,GACpB,MAAuB,MAAnBA,EAAK1E,OAAO,GACR0E,EAAKZ,MAAM,KAAK,GAEjBY,CACP,EASDC,eAAgB,SAASC,GACxB,IAAInB,EAAOoB,mBAAmBD,EAASE,MASvC,GARIrB,EAAKvD,OAAO,EAAGL,KAAKC,MAAMG,UAAYJ,KAAKC,QAC9C2D,EAAOA,EAAKvD,OAAOL,KAAKC,MAAMG,SAGM,MAAjCwD,EAAKzD,OAAOyD,EAAKxD,OAAS,KAC7BwD,EAAOA,EAAKvD,OAAO,EAAGuD,EAAKxD,OAAS,IAGJ,IAA7B2E,EAASG,SAAS9E,QAAgD,oBAAhC2E,EAASG,SAAS,GAAGC,OAC1D,OAAO,KAGR,IAAMC,EAAQL,EAASG,SAAS,GAAGG,WAE7BC,EAAO,CACZC,GAAIH,EAAMtF,EAAOsC,0BACjBwB,KAAMhE,EAAG4F,QAAQ5B,IAAS,IAC1B6B,KAAM7F,EAAG8F,SAAS9B,GAClB+B,MAAQ,IAAIC,KAAKR,EAAMtF,EAAOkC,2BAA4B6D,WAGrDC,EAAWV,EAAMtF,EAAOmC,kBACzBT,EAAEuE,YAAYD,KAClBR,EAAKT,KAAO7E,KAAK4E,WAAWkB,IAG7B,IAAIE,EAAWZ,EAAMtF,EAAOyC,2BACvBf,EAAEuE,YAAYC,KAClBV,EAAKW,KAAOC,SAASF,EAAU,KAGhCA,EAAWZ,EAAMtF,EAAOwC,eACnBd,EAAEuE,YAAYC,KAClBV,EAAKW,KAAOC,SAASF,EAAU,KAGhC,IAAMG,EAAiBf,EAAM,IAAMtF,EAAO+B,aAAe,gBACpDL,EAAEuE,YAAYI,GAGlBb,EAAKc,YAAa,EAFlBd,EAAKc,WAAgC,SAAnBD,EAKnB,IAAME,EAAkBjB,EAAM,IAAMtF,EAAO+B,aAAe,iBACrDL,EAAEuE,YAAYM,GAGlBf,EAAKgB,aAAc,EAFnBhB,EAAKgB,YAAkC,MAApBD,EAKpB,IAAME,EAAmBnB,EAAM,IAAMtF,EAAO8B,YAAc,aACrDJ,EAAEuE,YAAYQ,GAGlBjB,EAAKkB,cAAe,EAFpBlB,EAAKkB,aAAoC,MAArBD,EAKrB,IAAME,EAAcrB,EAAMtF,EAAOoC,yBAC5BV,EAAEuE,YAAYU,KAClBnB,EAAKoB,SAAWD,GAGjB,IAAME,EAAUvB,EAAMtF,EAAOqC,uBAC7B,IAAKmD,EAAKoB,UAAYC,EAAS,CAC9B,IAAMC,EAAWD,EAAQ,GACrBC,EAASC,eAAiB/G,EAAOgC,QAA8C,eAApC8E,EAASE,SAAS7C,MAAM,KAAK,KAC3EqB,EAAKoB,SAAW,uBAEjB,CAEDpB,EAAKyB,YAAcnH,EAAGoH,gBACtB,IAAMC,EAAiB7B,EAAMtF,EAAOuC,sBACpC,IAAKb,EAAEuE,YAAYkB,GAAiB,CACnC,IAAMC,EAAaD,GAAkB,GACrC3B,EAAK6B,UAAY,KACjB,IAAK,IAAIrD,EAAI,EAAGA,EAAIoD,EAAW9G,OAAQ0D,IAEtC,OADUoD,EAAW/G,OAAO2D,IAG5B,IAAK,IACL,IAAK,IACJwB,EAAKyB,aAAenH,EAAGwH,kBACvB,MACD,IAAK,IACJ9B,EAAKyB,aAAenH,EAAGyH,gBACvB,MACD,IAAK,IACL,IAAK,IACL,IAAK,IACJ/B,EAAKyB,aAAenH,EAAG0H,kBACvB,MACD,IAAK,IACJhC,EAAKyB,aAAenH,EAAG2H,kBACvB,MACD,IAAK,IACJjC,EAAKyB,aAAenH,EAAG4H,iBACvB,MACD,IAAK,IACClC,EAAK6B,YAET7B,EAAK6B,UAAY,YAElB,MACD,IAAK,IAEJ7B,EAAK6B,UAAY,SAInB,CAED,IAAMM,EAAuBrC,EAAMtF,EAAO2C,4BACrCjB,EAAEuE,YAAY0B,KAClBnC,EAAKoC,iBAAmBxB,SAASuB,IAGlC,IAAME,EAAsBvC,EAAMtF,EAAO4C,2BACzC,GAAKlB,EAAEuE,YAAY4B,GAQlBrC,EAAKsC,gBAAkB,QAPvB,IACCtC,EAAKsC,gBAAkBC,KAAKC,MAAMH,EAIlC,CAHC,MAAOI,GACRC,QAAQC,KAAK,yDAA2DN,EAAsB,KAC9FrC,EAAKsC,gBAAkB,EACvB,CAKF,IAAMM,EAAe9C,EAAM,IAAMtF,EAAO+B,aAAe,eAClDL,EAAEuE,YAAYmC,KAClB5C,EAAK6B,UAAYe,GAGlB,IAAMC,EAAsB/C,EAAM,IAAMtF,EAAOgC,OAAS,0BAUxD,OATKN,EAAEuE,YAAYoC,KAClB7C,EAAK6C,oBAAsBA,GAI5B3G,EAAE8B,KAAKtD,KAAK2B,kBAAkB,SAASyG,GACtC5G,EAAE6G,OAAO/C,EAAM8C,EAAerD,EAAUO,IAAS,CAAC,EAClD,IAEM,IAAIzF,EAASyF,EACpB,EAODgD,aAAc,SAASC,GACtB,IAAMC,EAAOxI,KACb,OAAOwB,EAAEiH,IAAIF,GAAW,SAASxD,GAChC,OAAOyD,EAAK1D,eAAeC,EAC3B,GACD,EASD2D,iBAAkB,SAASvD,GAC1B,OAAOA,GAAU,KAAOA,GAAU,GAClC,EAQDwD,mBAAoB,SAAS5D,GAC5B,IAAM5B,EAAS,CAAC,EACVyF,EAAM7D,EAAShC,IAAI8F,YACzB,GAAY,OAARD,EACH,OAAOzF,EAER,IAAM2F,EAAWF,EAAIG,uBAAuB,yBAA0B,WAChEC,EAAaJ,EAAIG,uBAAuB,yBAA0B,aAOxE,OANID,EAAS1I,SACZ+C,EAAO8F,QAAUH,EAAS,GAAGI,aAE1BF,EAAW5I,SACd+C,EAAOgG,UAAYH,EAAW,GAAGE,aAE3B/F,CACP,EAODiG,sBAAuB,WAMtB,OALKpJ,KAAKqJ,sBACTrJ,KAAKqJ,oBAAsB7H,EAAEiH,IAAI3I,EAAO8C,sBAAsB,SAAS0G,GACtE,MAAO,IAAMA,EAAQ,GAAK,IAAMA,EAAQ,EACxC,KAEKtJ,KAAKqJ,mBACZ,EAaDE,kBAAmB,SAAS3F,EAAM7D,GAC5B6D,IACJA,EAAO,IAER7D,EAAUA,GAAW,CAAC,EACtB,IAGIsF,EAHEmD,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UAyBzB,OAtBCrE,EADG7D,EAAEuE,YAAYhG,EAAQsF,YACZrF,KAAKoJ,wBAELrJ,EAAQsF,WAGtBrF,KAAKqB,QAAQsI,SACZ3J,KAAK2D,UAAUC,GACfyB,EACA,GACCuE,MAAK,SAASzG,GACf,GAAIqF,EAAKE,iBAAiBvF,EAAOgC,QAAS,CACzC,IAAM0E,EAAUrB,EAAKF,aAAanF,EAAO2G,MACpC/J,GAAYA,EAAQgK,eAExBF,EAAQG,QAETrK,EAASsK,QAAQ9G,EAAOgC,OAAQ0E,EAChC,MACA1G,EAAS3B,EAAE6G,OAAOlF,EAAQqF,EAAKG,mBAAmBxF,IAClDxD,EAASuK,OAAO/G,EAAOgC,OAAQhC,EAEhC,IACMuG,CACP,EAcDS,iBAAkB,SAASC,EAAQrK,GAClCA,EAAUA,GAAW,CAAC,EACtB,IAGIsF,EAHEmD,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UAQzB,GALCrE,EADG7D,EAAEuE,YAAYhG,EAAQsF,YACZrF,KAAKoJ,wBAELrJ,EAAQsF,YAGjB+E,IACCA,EAAOC,cAAgB7I,EAAEuE,YAAYqE,EAAOE,YAAcF,EAAOG,WACtE,KAAM,0BAIP,IACIC,EADAV,EAAO,oBAEX,IAAKU,KAAaxK,KAAKqB,QAAQH,cAC9B4I,GAAQ,UAAY9J,KAAKqB,QAAQH,cAAcsJ,GAAa,KAAOA,EAAY,IA2ChF,OAzCAV,GAAQ,MAGRA,GAAQ,QAAU9J,KAAKqB,QAAQH,cAAc,QAAU,WACvDM,EAAE8B,KAAK+B,GAAY,SAASoF,GAC3B,IAAMC,EAAWlC,EAAKnH,QAAQsJ,mBAAmBF,GACjDX,GAAQ,YAActB,EAAKnH,QAAQH,cAAcwJ,EAASF,WAAa,IAAME,EAASjF,KAAO,OAC7F,IAEDqE,GAAQ,SAAW9J,KAAKqB,QAAQH,cAAc,QAAU,WAGxD4I,GAAQ,0BACRtI,EAAE8B,KAAK8G,EAAOC,cAAc,SAASA,GACpCP,GAAQ,yBAA2Bc,IAAWP,GAAgB,mBAC9D,IACD7I,EAAE8B,KAAK8G,EAAOG,YAAY,SAASA,GAClCT,GAAQ,sBAAwBc,IAAWL,GAAc,gBACzD,IACGH,EAAOE,WACVR,GAAQ,yBAA2BM,EAAOE,SAAW,IAAM,KAAO,oBAEnER,GAAQ,2BAGRA,GAAQ,uBAER9J,KAAKqB,QAAQwJ,QACZ,SACA7K,KAAK2D,YACL,CAAC,EACDmG,GACCF,MAAK,SAASzG,GACf,GAAIqF,EAAKE,iBAAiBvF,EAAOgC,QAAS,CACzC,IAAM0E,EAAUrB,EAAKF,aAAanF,EAAO2G,MACzCnK,EAASsK,QAAQ9G,EAAOgC,OAAQ0E,EAChC,MACA1G,EAAS3B,EAAE6G,OAAOlF,EAAQqF,EAAKG,mBAAmBxF,IAClDxD,EAASuK,OAAO/G,EAAOgC,OAAQhC,EAEhC,IACMuG,CACP,EAUDoB,YAAa,SAASlH,EAAM7D,GACtB6D,IACJA,EAAO,IAER7D,EAAUA,GAAW,CAAC,EACtB,IAGIsF,EAHEmD,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UAuBzB,OApBCrE,EADG7D,EAAEuE,YAAYhG,EAAQsF,YACZrF,KAAKoJ,wBAELrJ,EAAQsF,WAItBrF,KAAKqB,QAAQsI,SACZ3J,KAAK2D,UAAUC,GACfyB,EACA,GACCuE,MACD,SAASzG,GACJqF,EAAKE,iBAAiBvF,EAAOgC,QAChCxF,EAASsK,QAAQ9G,EAAOgC,OAAQqD,EAAKF,aAAa,CAACnF,EAAO2G,OAAO,KAEjE3G,EAAS3B,EAAE6G,OAAOlF,EAAQqF,EAAKG,mBAAmBxF,IAClDxD,EAASuK,OAAO/G,EAAOgC,OAAQhC,GAEhC,IAEKuG,CACP,EASDqB,gBAAiB,SAASnH,GACzB,IAAKA,EACJ,KAAM,0BAEP,IAAM4E,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UAezB,OAbA1J,KAAKqB,QAAQwJ,QACZ,MACA7K,KAAK2D,UAAUC,IACdgG,MACD,SAASzG,GACJqF,EAAKE,iBAAiBvF,EAAOgC,QAChCxF,EAASsK,QAAQ9G,EAAOgC,OAAQhC,EAAO2G,OAEvC3G,EAAS3B,EAAE6G,OAAOlF,EAAQqF,EAAKG,mBAAmBxF,IAClDxD,EAASuK,OAAO/G,EAAOgC,OAAQhC,GAEhC,IAEKuG,CACP,EAaDsB,gBAAiB,SAASpH,EAAMkG,EAAM/J,GACrC,IAAK6D,EACJ,KAAM,0BAEP,IAAM4E,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UAEnB5G,EAAU,CAAC,EACb2D,EAAc,2BA2BlB,OA7BA1G,EAAUA,GAAW,CAAC,GAGV0G,cACXA,EAAc1G,EAAQ0G,aAGvB3D,EAAQ,gBAAkB2D,GAEtBjF,EAAEuE,YAAYhG,EAAQkL,YAAclL,EAAQkL,aAE/CnI,EAAQ,iBAAmB,KAG5B9C,KAAKqB,QAAQwJ,QACZ,MACA7K,KAAK2D,UAAUC,GACfd,EACAgH,GAAQ,IACPF,MACD,SAASzG,GACJqF,EAAKE,iBAAiBvF,EAAOgC,QAChCxF,EAASsK,QAAQ9G,EAAOgC,SAExBhC,EAAS3B,EAAE6G,OAAOlF,EAAQqF,EAAKG,mBAAmBxF,IAClDxD,EAASuK,OAAO/G,EAAOgC,OAAQhC,GAEhC,IAEKuG,CACP,EAEDwB,YAAa,SAASC,EAAQvH,GAC7B,IAAKA,EACJ,KAAM,0BAGP,IAAM4E,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UAezB,OAbA1J,KAAKqB,QAAQwJ,QACZM,EACAnL,KAAK2D,UAAUC,IACdgG,MACD,SAASzG,GACJqF,EAAKE,iBAAiBvF,EAAOgC,QAChCxF,EAASsK,QAAQ9G,EAAOgC,SAExBhC,EAAS3B,EAAE6G,OAAOlF,EAAQqF,EAAKG,mBAAmBxF,IAClDxD,EAASuK,OAAO/G,EAAOgC,OAAQhC,GAEhC,IAEKuG,CACP,EASD0B,gBAAiB,SAASxH,GACzB,OAAO5D,KAAKkL,YAAY,QAAStH,EACjC,EASDyH,OAAQ,SAASzH,GAChB,OAAO5D,KAAKkL,YAAY,SAAUtH,EAClC,EAaD0H,KAAM,SAAS1H,EAAM2H,EAAiBC,EAAgB1I,GACrD,IAAKc,EACJ,KAAM,0BAEP,IAAK2H,EACJ,KAAM,qCAGP,IAAM/C,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UAuBzB,OAtBA5G,EAAUtB,EAAE6G,OAAO,CAAC,EAAGvF,EAAS,CAC/B,YAAe9C,KAAK2D,UAAU4H,KAG1BC,IACJ1I,EAAQ2I,UAAY,KAGrBzL,KAAKqB,QAAQwJ,QACZ,OACA7K,KAAK2D,UAAUC,GACfd,GACC8G,MACD,SAASzG,GACJqF,EAAKE,iBAAiBvF,EAAOgC,QAChCxF,EAASsK,QAAQ9G,EAAOgC,SAExBhC,EAAS3B,EAAE6G,OAAOlF,EAAQqF,EAAKG,mBAAmBxF,IAClDxD,EAASuK,OAAO/G,EAAOgC,OAAQhC,GAEhC,IAEKuG,CACP,EAYDgC,KAAM,SAAS9H,EAAM2H,EAAiBC,GACrC,IAAK5H,EACJ,KAAM,0BAEP,IAAK2H,EACJ,KAAM,qCAGP,IAAM/C,EAAOxI,KACPL,EAAW6J,EAAEC,WACbC,EAAU/J,EAAS+J,UACnB5G,EAAU,CACf,YAAe9C,KAAK2D,UAAU4H,IAoB/B,OAjBKC,IACJ1I,EAAQ2I,UAAY,KAGrBzL,KAAKqB,QAAQwJ,QACZ,OACA7K,KAAK2D,UAAUC,GACfd,GACC8G,MACD,SAAS7E,GACJyD,EAAKE,iBAAiB3D,EAASI,QAClCxF,EAASsK,QAAQlF,EAASI,QAE1BxF,EAASuK,OAAOnF,EAASI,OAE1B,IAEKuE,CACP,EAODiC,kBAAmB,SAASvD,GAC3BpI,KAAK2B,iBAAiBgD,KAAKyD,EAC3B,EAQDwD,UAAW,WACV,OAAO5L,KAAKqB,OACZ,EAQDwK,YAAa,WACZ,OAAO7L,KAAKqB,QAAQF,QACpB,EAQD2K,YAAa,WACZ,OAAO9L,KAAKqB,QAAQD,QACpB,EAQD2K,WAAY,WACX,OAAO/L,KAAKqB,QAAQJ,OACpB,EAQD+K,QAAS,WACR,OAAOhM,KAAKW,KACZ,GAcGf,EAAGqM,QAMPrM,EAAGqM,MAAQ,CAAC,GAUbrM,EAAGqM,MAAML,UAAY,WACpB,GAAIhM,EAAGqM,MAAMC,eACZ,OAAOtM,EAAGqM,MAAMC,eAGjB,IAAMC,EAAS,IAAIvM,EAAGqM,MAAMnM,OAAO,CAClCY,KAAMd,EAAGoM,UACTI,KAAMxM,EAAGyM,UACTnM,KAAMN,EAAG0M,iBAAiB,OAAS,UAAY1M,EAAG2M,iBAAiBC,IACnEhM,SAA+B,UAArBZ,EAAG6M,gBAGd,OADA7M,EAAGqM,MAAMC,eAAiBC,EACnBA,CACP,EAEDvM,EAAGqM,MAAMnM,OAASA,CAp8BnB,EAq8BGF,GAAIA,GAAGqM,MAAMpM,YCz+BZ6M,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CACjDrH,GAAIqH,EACJK,QAAQ,EACRF,QAAS,CAAC,GAUX,OANAG,EAAoBN,GAAUO,KAAKH,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG3EK,EAAOC,QAAS,EAGTD,EAAOD,OACf,CAGAJ,EAAoBS,EAAIF,EC5BxBP,EAAoBU,KAAO,WAC1B,MAAM,IAAIC,MAAM,iCACjB,ECFAX,EAAoBY,KAAO,CAAC,EJAxB5N,EAAW,GACfgN,EAAoBa,EAAI,SAASrK,EAAQsK,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS/J,EAAI,EAAGA,EAAInE,EAASS,OAAQ0D,IAAK,CACrC2J,EAAW9N,EAASmE,GAAG,GACvB4J,EAAK/N,EAASmE,GAAG,GACjB6J,EAAWhO,EAASmE,GAAG,GAE3B,IAJA,IAGIgK,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASrN,OAAQ2N,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAaK,OAAOC,KAAKtB,EAAoBa,GAAGU,OAAM,SAAS1K,GAAO,OAAOmJ,EAAoBa,EAAEhK,GAAKiK,EAASM,GAAK,IAChKN,EAASU,OAAOJ,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbnO,EAASwO,OAAOrK,IAAK,GACrB,IAAIsK,EAAIV,SACEZ,IAANsB,IAAiBjL,EAASiL,EAC/B,CACD,CACA,OAAOjL,CArBP,CAJCwK,EAAWA,GAAY,EACvB,IAAI,IAAI7J,EAAInE,EAASS,OAAQ0D,EAAI,GAAKnE,EAASmE,EAAI,GAAG,GAAK6J,EAAU7J,IAAKnE,EAASmE,GAAKnE,EAASmE,EAAI,GACrGnE,EAASmE,GAAK,CAAC2J,EAAUC,EAAIC,EAwB/B,EK5BAhB,EAAoB0B,EAAI,SAASrB,GAChC,IAAIsB,EAAStB,GAAUA,EAAOuB,WAC7B,WAAa,OAAOvB,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAL,EAAoB6B,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CACR,ECNA3B,EAAoB6B,EAAI,SAASzB,EAAS2B,GACzC,IAAI,IAAIlL,KAAOkL,EACX/B,EAAoBgC,EAAED,EAAYlL,KAASmJ,EAAoBgC,EAAE5B,EAASvJ,IAC5EwK,OAAOY,eAAe7B,EAASvJ,EAAK,CAAEqL,YAAY,EAAMC,IAAKJ,EAAWlL,IAG3E,ECPAmJ,EAAoBoC,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOhP,MAAQ,IAAIiP,SAAS,cAAb,EAGhB,CAFE,MAAOlH,GACR,GAAsB,iBAAXmH,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBvC,EAAoBgC,EAAI,SAASQ,EAAK1E,GAAQ,OAAOuD,OAAOnL,UAAUuM,eAAejC,KAAKgC,EAAK1E,EAAO,ECCtGkC,EAAoByB,EAAI,SAASrB,GACX,oBAAXsC,QAA0BA,OAAOC,aAC1CtB,OAAOY,eAAe7B,EAASsC,OAAOC,YAAa,CAAE/L,MAAO,WAE7DyK,OAAOY,eAAe7B,EAAS,aAAc,CAAExJ,OAAO,GACvD,ECNAoJ,EAAoB4C,IAAM,SAASvC,GAGlC,OAFAA,EAAOwC,MAAQ,GACVxC,EAAOyC,WAAUzC,EAAOyC,SAAW,IACjCzC,CACR,ECJAL,EAAoBoB,EAAI,gBCAxBpB,EAAoB+C,EAAIC,SAASC,SAAWpH,KAAKqH,SAAS5K,KAK1D,IAAI6K,EAAkB,CACrB,KAAM,GAaPnD,EAAoBa,EAAEO,EAAI,SAASgC,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4B3K,GAC/D,IAKIsH,EAAUmD,EALVtC,EAAWnI,EAAK,GAChB4K,EAAc5K,EAAK,GACnB6K,EAAU7K,EAAK,GAGIxB,EAAI,EAC3B,GAAG2J,EAAS2C,MAAK,SAAS7K,GAAM,OAA+B,IAAxBuK,EAAgBvK,EAAW,IAAI,CACrE,IAAIqH,KAAYsD,EACZvD,EAAoBgC,EAAEuB,EAAatD,KACrCD,EAAoBS,EAAER,GAAYsD,EAAYtD,IAGhD,GAAGuD,EAAS,IAAIhN,EAASgN,EAAQxD,EAClC,CAEA,IADGsD,GAA4BA,EAA2B3K,GACrDxB,EAAI2J,EAASrN,OAAQ0D,IACzBiM,EAAUtC,EAAS3J,GAChB6I,EAAoBgC,EAAEmB,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOpD,EAAoBa,EAAErK,EAC9B,EAEIkN,EAAqB7H,KAA4B,sBAAIA,KAA4B,uBAAK,GAC1F6H,EAAmBC,QAAQN,EAAqBvO,KAAK,KAAM,IAC3D4O,EAAmB1L,KAAOqL,EAAqBvO,KAAK,KAAM4O,EAAmB1L,KAAKlD,KAAK4O,OClDvF1D,EAAoB4D,QAAKzD,ECGzB,IAAI0D,EAAsB7D,EAAoBa,OAAEV,EAAW,CAAC,OAAO,WAAa,OAAOH,EAAoB,KAAO,IAClH6D,EAAsB7D,EAAoBa,EAAEgD","sources":["webpack:///nextcloud/webpack\\runtime\\chunk loaded","webpack:///nextcloud/core\\src\\files\\client.js","webpack:///nextcloud/webpack\\bootstrap","webpack:///nextcloud/webpack\\runtime\\amd define","webpack:///nextcloud/webpack\\runtime\\amd options","webpack:///nextcloud/webpack\\runtime\\compat get default export","webpack:///nextcloud/webpack\\runtime\\define property getters","webpack:///nextcloud/webpack\\runtime\\global","webpack:///nextcloud/webpack\\runtime\\hasOwnProperty shorthand","webpack:///nextcloud/webpack\\runtime\\make namespace object","webpack:///nextcloud/webpack\\runtime\\node module decorator","webpack:///nextcloud/webpack\\runtime\\runtimeId","webpack:///nextcloud/webpack\\runtime\\jsonp chunk loading","webpack:///nextcloud/webpack\\runtime\\nonce","webpack:///nextcloud/webpack\\startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/**\r\n * Copyright (c) 2015\r\n *\r\n * @author Bjoern Schiessle <bjoern@schiessle.org>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Lukas Reschke <lukas@statuscode.ch>\r\n * @author Michael Jobst <mjobst+github@tecratech.de>\r\n * @author Robin Appelman <robin@icewind.nl>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n * @author Thomas Citharel <nextcloud@tcit.fr>\r\n * @author Tomasz Grobelny <tomasz@grobelny.net>\r\n * @author Vincent Petry <vincent@nextcloud.com>\r\n * @author Vinicius Cubas Brand <vinicius@eita.org.br>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\nimport escapeHTML from 'escape-html'\r\n\r\n/* global dav */\r\n\r\n(function(OC, FileInfo) {\r\n\t/**\r\n\t * @class OC.Files.Client\r\n\t * @classdesc Client to access files on the server\r\n\t *\r\n\t * @param {Object} options\r\n\t * @param {String} options.host host name\r\n\t * @param {number} [options.port] port\r\n\t * @param {boolean} [options.useHTTPS] whether to use https\r\n\t * @param {String} [options.root] root path\r\n\t * @param {String} [options.userName] user name\r\n\t * @param {String} [options.password] password\r\n\t *\r\n\t * @since 8.2\r\n\t */\r\n\tvar Client = function(options) {\r\n\t\tthis._root = options.root\r\n\t\tif (this._root.charAt(this._root.length - 1) === '/') {\r\n\t\t\tthis._root = this._root.substr(0, this._root.length - 1)\r\n\t\t}\r\n\r\n\t\tlet url = Client.PROTOCOL_HTTP + '://'\r\n\t\tif (options.useHTTPS) {\r\n\t\t\turl = Client.PROTOCOL_HTTPS + '://'\r\n\t\t}\r\n\r\n\t\turl += options.host + this._root\r\n\t\tthis._host = options.host\r\n\t\tthis._defaultHeaders = options.defaultHeaders || {\r\n\t\t\t'X-Requested-With': 'XMLHttpRequest',\r\n\t\t\t'requesttoken': OC.requestToken,\r\n\t\t}\r\n\t\tthis._baseUrl = url\r\n\r\n\t\tconst clientOptions = {\r\n\t\t\tbaseUrl: this._baseUrl,\r\n\t\t\txmlNamespaces: {\r\n\t\t\t\t'DAV:': 'd',\r\n\t\t\t\t'http://owncloud.org/ns': 'oc',\r\n\t\t\t\t'http://nextcloud.org/ns': 'nc',\r\n\t\t\t\t'http://open-collaboration-services.org/ns': 'ocs',\r\n\t\t\t},\r\n\t\t}\r\n\t\tif (options.userName) {\r\n\t\t\tclientOptions.userName = options.userName\r\n\t\t}\r\n\t\tif (options.password) {\r\n\t\t\tclientOptions.password = options.password\r\n\t\t}\r\n\t\tthis._client = new dav.Client(clientOptions)\r\n\t\tthis._client.xhrProvider = _.bind(this._xhrProvider, this)\r\n\t\tthis._fileInfoParsers = []\r\n\t}\r\n\r\n\tClient.NS_OWNCLOUD = 'http://owncloud.org/ns'\r\n\tClient.NS_NEXTCLOUD = 'http://nextcloud.org/ns'\r\n\tClient.NS_DAV = 'DAV:'\r\n\tClient.NS_OCS = 'http://open-collaboration-services.org/ns'\r\n\r\n\tClient.PROPERTY_GETLASTMODIFIED\t= '{' + Client.NS_DAV + '}getlastmodified'\r\n\tClient.PROPERTY_GETETAG\t= '{' + Client.NS_DAV + '}getetag'\r\n\tClient.PROPERTY_GETCONTENTTYPE\t= '{' + Client.NS_DAV + '}getcontenttype'\r\n\tClient.PROPERTY_RESOURCETYPE\t= '{' + Client.NS_DAV + '}resourcetype'\r\n\tClient.PROPERTY_INTERNAL_FILEID\t= '{' + Client.NS_OWNCLOUD + '}fileid'\r\n\tClient.PROPERTY_PERMISSIONS\t= '{' + Client.NS_OWNCLOUD + '}permissions'\r\n\tClient.PROPERTY_SIZE\t= '{' + Client.NS_OWNCLOUD + '}size'\r\n\tClient.PROPERTY_GETCONTENTLENGTH\t= '{' + Client.NS_DAV + '}getcontentlength'\r\n\tClient.PROPERTY_ISENCRYPTED\t= '{' + Client.NS_DAV + '}is-encrypted'\r\n\tClient.PROPERTY_SHARE_PERMISSIONS\t= '{' + Client.NS_OCS + '}share-permissions'\r\n\tClient.PROPERTY_SHARE_ATTRIBUTES\t= '{' + Client.NS_NEXTCLOUD + '}share-attributes'\r\n\tClient.PROPERTY_QUOTA_AVAILABLE_BYTES\t= '{' + Client.NS_DAV + '}quota-available-bytes'\r\n\r\n\tClient.PROTOCOL_HTTP\t= 'http'\r\n\tClient.PROTOCOL_HTTPS\t= 'https'\r\n\r\n\tClient._PROPFIND_PROPERTIES = [\r\n\t\t/**\r\n\t\t * Modified time\r\n\t\t */\r\n\t\t[Client.NS_DAV, 'getlastmodified'],\r\n\t\t/**\r\n\t\t * Etag\r\n\t\t */\r\n\t\t[Client.NS_DAV, 'getetag'],\r\n\t\t/**\r\n\t\t * Mime type\r\n\t\t */\r\n\t\t[Client.NS_DAV, 'getcontenttype'],\r\n\t\t/**\r\n\t\t * Resource type \"collection\" for folders, empty otherwise\r\n\t\t */\r\n\t\t[Client.NS_DAV, 'resourcetype'],\r\n\t\t/**\r\n\t\t * File id\r\n\t\t */\r\n\t\t[Client.NS_OWNCLOUD, 'fileid'],\r\n\t\t/**\r\n\t\t * Letter-coded permissions\r\n\t\t */\r\n\t\t[Client.NS_OWNCLOUD, 'permissions'],\r\n\t\t// [Client.NS_OWNCLOUD, 'downloadURL'],\r\n\t\t/**\r\n\t\t * Folder sizes\r\n\t\t */\r\n\t\t[Client.NS_OWNCLOUD, 'size'],\r\n\t\t/**\r\n\t\t * File sizes\r\n\t\t */\r\n\t\t[Client.NS_DAV, 'getcontentlength'],\r\n\t\t[Client.NS_DAV, 'quota-available-bytes'],\r\n\t\t/**\r\n\t\t * Preview availability\r\n\t\t */\r\n\t\t[Client.NS_NEXTCLOUD, 'has-preview'],\r\n\t\t/**\r\n\t\t * Mount type\r\n\t\t */\r\n\t\t[Client.NS_NEXTCLOUD, 'mount-type'],\r\n\t\t/**\r\n\t\t * Encryption state\r\n\t\t */\r\n\t\t[Client.NS_NEXTCLOUD, 'is-encrypted'],\r\n\t\t/**\r\n\t\t * Share permissions\r\n\t\t */\r\n\t\t[Client.NS_OCS, 'share-permissions'],\r\n\t\t/**\r\n\t\t * Share attributes\r\n\t\t */\r\n\t\t[Client.NS_NEXTCLOUD, 'share-attributes'],\r\n\t]\r\n\r\n\t/**\r\n\t * @memberof OC.Files\r\n\t */\r\n\tClient.prototype = {\r\n\r\n\t\t/**\r\n\t\t * Root path of the Webdav endpoint\r\n\t\t *\r\n\t\t * @type string\r\n\t\t */\r\n\t\t_root: null,\r\n\r\n\t\t/**\r\n\t\t * Client from the library\r\n\t\t *\r\n\t\t * @type dav.Client\r\n\t\t */\r\n\t\t_client: null,\r\n\r\n\t\t/**\r\n\t\t * Array of file info parsing functions.\r\n\t\t *\r\n\t\t * @type Array<OC.Files.Client~parseFileInfo>\r\n\t\t */\r\n\t\t_fileInfoParsers: [],\r\n\r\n\t\t/**\r\n\t\t * Returns the configured XHR provider for davclient\r\n\t\t * @returns {XMLHttpRequest}\r\n\t\t */\r\n\t\t_xhrProvider: function() {\r\n\t\t\tconst headers = this._defaultHeaders\r\n\t\t\tconst xhr = new XMLHttpRequest()\r\n\t\t\tconst oldOpen = xhr.open\r\n\t\t\t// override open() method to add headers\r\n\t\t\txhr.open = function() {\r\n\t\t\t\tconst result = oldOpen.apply(this, arguments)\r\n\t\t\t\t_.each(headers, function(value, key) {\r\n\t\t\t\t\txhr.setRequestHeader(key, value)\r\n\t\t\t\t})\r\n\t\t\t\treturn result\r\n\t\t\t}\r\n\r\n\t\t\tOC.registerXHRForErrorProcessing(xhr)\r\n\t\t\treturn xhr\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Prepends the base url to the given path sections\r\n\t\t *\r\n\t\t * @param {...String} path sections\r\n\t\t *\r\n\t\t * @returns {String} base url + joined path, any leading or trailing slash\r\n\t\t * will be kept\r\n\t\t */\r\n\t\t_buildUrl: function() {\r\n\t\t\tlet path = this._buildPath.apply(this, arguments)\r\n\t\t\tif (path.charAt([path.length - 1]) === '/') {\r\n\t\t\t\tpath = path.substr(0, path.length - 1)\r\n\t\t\t}\r\n\t\t\tif (path.charAt(0) === '/') {\r\n\t\t\t\tpath = path.substr(1)\r\n\t\t\t}\r\n\t\t\treturn this._baseUrl + '/' + path\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Append the path to the root and also encode path\r\n\t\t * sections\r\n\t\t *\r\n\t\t * @param {...String} path sections\r\n\t\t *\r\n\t\t * @returns {String} joined path, any leading or trailing slash\r\n\t\t * will be kept\r\n\t\t */\r\n\t\t_buildPath: function() {\r\n\t\t\tlet path = OC.joinPaths.apply(this, arguments)\r\n\t\t\tconst sections = path.split('/')\r\n\t\t\tlet i\r\n\t\t\tfor (i = 0; i < sections.length; i++) {\r\n\t\t\t\tsections[i] = encodeURIComponent(sections[i])\r\n\t\t\t}\r\n\t\t\tpath = sections.join('/')\r\n\t\t\treturn path\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Parse headers string into a map\r\n\t\t *\r\n\t\t * @param {string} headersString headers list as string\r\n\t\t *\r\n\t\t * @returns {Object.<String,Array>} map of header name to header contents\r\n\t\t */\r\n\t\t_parseHeaders: function(headersString) {\r\n\t\t\tconst headerRows = headersString.split('\\n')\r\n\t\t\tconst headers = {}\r\n\t\t\tfor (let i = 0; i < headerRows.length; i++) {\r\n\t\t\t\tconst sepPos = headerRows[i].indexOf(':')\r\n\t\t\t\tif (sepPos < 0) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst headerName = headerRows[i].substr(0, sepPos)\r\n\t\t\t\tconst headerValue = headerRows[i].substr(sepPos + 2)\r\n\r\n\t\t\t\tif (!headers[headerName]) {\r\n\t\t\t\t\t// make it an array\r\n\t\t\t\t\theaders[headerName] = []\r\n\t\t\t\t}\r\n\r\n\t\t\t\theaders[headerName].push(headerValue)\r\n\t\t\t}\r\n\t\t\treturn headers\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Parses the etag response which is in double quotes.\r\n\t\t *\r\n\t\t * @param {string} etag etag value in double quotes\r\n\t\t *\r\n\t\t * @returns {string} etag without double quotes\r\n\t\t */\r\n\t\t_parseEtag: function(etag) {\r\n\t\t\tif (etag.charAt(0) === '\"') {\r\n\t\t\t\treturn etag.split('\"')[1]\r\n\t\t\t}\r\n\t\t\treturn etag\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Parse Webdav result\r\n\t\t *\r\n\t\t * @param {Object} response XML object\r\n\t\t *\r\n\t\t * @returns {Array.<FileInfo>} array of file info\r\n\t\t */\r\n\t\t_parseFileInfo: function(response) {\r\n\t\t\tlet path = decodeURIComponent(response.href)\r\n\t\t\tif (path.substr(0, this._root.length) === this._root) {\r\n\t\t\t\tpath = path.substr(this._root.length)\r\n\t\t\t}\r\n\r\n\t\t\tif (path.charAt(path.length - 1) === '/') {\r\n\t\t\t\tpath = path.substr(0, path.length - 1)\r\n\t\t\t}\r\n\r\n\t\t\tif (response.propStat.length === 0 || response.propStat[0].status !== 'HTTP/1.1 200 OK') {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\r\n\t\t\tconst props = response.propStat[0].properties\r\n\r\n\t\t\tconst data = {\r\n\t\t\t\tid: props[Client.PROPERTY_INTERNAL_FILEID],\r\n\t\t\t\tpath: OC.dirname(path) || '/',\r\n\t\t\t\tname: OC.basename(path),\r\n\t\t\t\tmtime: (new Date(props[Client.PROPERTY_GETLASTMODIFIED])).getTime(),\r\n\t\t\t}\r\n\r\n\t\t\tconst etagProp = props[Client.PROPERTY_GETETAG]\r\n\t\t\tif (!_.isUndefined(etagProp)) {\r\n\t\t\t\tdata.etag = this._parseEtag(etagProp)\r\n\t\t\t}\r\n\r\n\t\t\tlet sizeProp = props[Client.PROPERTY_GETCONTENTLENGTH]\r\n\t\t\tif (!_.isUndefined(sizeProp)) {\r\n\t\t\t\tdata.size = parseInt(sizeProp, 10)\r\n\t\t\t}\r\n\r\n\t\t\tsizeProp = props[Client.PROPERTY_SIZE]\r\n\t\t\tif (!_.isUndefined(sizeProp)) {\r\n\t\t\t\tdata.size = parseInt(sizeProp, 10)\r\n\t\t\t}\r\n\r\n\t\t\tconst hasPreviewProp = props['{' + Client.NS_NEXTCLOUD + '}has-preview']\r\n\t\t\tif (!_.isUndefined(hasPreviewProp)) {\r\n\t\t\t\tdata.hasPreview = hasPreviewProp === 'true'\r\n\t\t\t} else {\r\n\t\t\t\tdata.hasPreview = true\r\n\t\t\t}\r\n\r\n\t\t\tconst isEncryptedProp = props['{' + Client.NS_NEXTCLOUD + '}is-encrypted']\r\n\t\t\tif (!_.isUndefined(isEncryptedProp)) {\r\n\t\t\t\tdata.isEncrypted = isEncryptedProp === '1'\r\n\t\t\t} else {\r\n\t\t\t\tdata.isEncrypted = false\r\n\t\t\t}\r\n\r\n\t\t\tconst isFavouritedProp = props['{' + Client.NS_OWNCLOUD + '}favorite']\r\n\t\t\tif (!_.isUndefined(isFavouritedProp)) {\r\n\t\t\t\tdata.isFavourited = isFavouritedProp === '1'\r\n\t\t\t} else {\r\n\t\t\t\tdata.isFavourited = false\r\n\t\t\t}\r\n\r\n\t\t\tconst contentType = props[Client.PROPERTY_GETCONTENTTYPE]\r\n\t\t\tif (!_.isUndefined(contentType)) {\r\n\t\t\t\tdata.mimetype = contentType\r\n\t\t\t}\r\n\r\n\t\t\tconst resType = props[Client.PROPERTY_RESOURCETYPE]\r\n\t\t\tif (!data.mimetype && resType) {\r\n\t\t\t\tconst xmlvalue = resType[0]\r\n\t\t\t\tif (xmlvalue.namespaceURI === Client.NS_DAV && xmlvalue.nodeName.split(':')[1] === 'collection') {\r\n\t\t\t\t\tdata.mimetype = 'httpd/unix-directory'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdata.permissions = OC.PERMISSION_NONE\r\n\t\t\tconst permissionProp = props[Client.PROPERTY_PERMISSIONS]\r\n\t\t\tif (!_.isUndefined(permissionProp)) {\r\n\t\t\t\tconst permString = permissionProp || ''\r\n\t\t\t\tdata.mountType = null\r\n\t\t\t\tfor (let i = 0; i < permString.length; i++) {\r\n\t\t\t\t\tconst c = permString.charAt(i)\r\n\t\t\t\t\tswitch (c) {\r\n\t\t\t\t\t// FIXME: twisted permissions\r\n\t\t\t\t\tcase 'C':\r\n\t\t\t\t\tcase 'K':\r\n\t\t\t\t\t\tdata.permissions |= OC.PERMISSION_CREATE\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'G':\r\n\t\t\t\t\t\tdata.permissions |= OC.PERMISSION_READ\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'W':\r\n\t\t\t\t\tcase 'N':\r\n\t\t\t\t\tcase 'V':\r\n\t\t\t\t\t\tdata.permissions |= OC.PERMISSION_UPDATE\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'D':\r\n\t\t\t\t\t\tdata.permissions |= OC.PERMISSION_DELETE\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'R':\r\n\t\t\t\t\t\tdata.permissions |= OC.PERMISSION_SHARE\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\tif (!data.mountType) {\r\n\t\t\t\t\t\t\t// TODO: how to identify external-root ?\r\n\t\t\t\t\t\t\tdata.mountType = 'external'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'S':\r\n\t\t\t\t\t\t// TODO: how to identify shared-root ?\r\n\t\t\t\t\t\tdata.mountType = 'shared'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst sharePermissionsProp = props[Client.PROPERTY_SHARE_PERMISSIONS]\r\n\t\t\tif (!_.isUndefined(sharePermissionsProp)) {\r\n\t\t\t\tdata.sharePermissions = parseInt(sharePermissionsProp)\r\n\t\t\t}\r\n\r\n\t\t\tconst shareAttributesProp = props[Client.PROPERTY_SHARE_ATTRIBUTES]\r\n\t\t\tif (!_.isUndefined(shareAttributesProp)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdata.shareAttributes = JSON.parse(shareAttributesProp)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.warn('Could not parse share attributes returned by server: \"' + shareAttributesProp + '\"')\r\n\t\t\t\t\tdata.shareAttributes = [];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdata.shareAttributes = [];\r\n\t\t\t}\r\n\r\n\t\t\tconst mounTypeProp = props['{' + Client.NS_NEXTCLOUD + '}mount-type']\r\n\t\t\tif (!_.isUndefined(mounTypeProp)) {\r\n\t\t\t\tdata.mountType = mounTypeProp\r\n\t\t\t}\r\n\r\n\t\t\tconst quotaAvailableBytes = props['{' + Client.NS_DAV + '}quota-available-bytes']\r\n\t\t\tif (!_.isUndefined(quotaAvailableBytes)) {\r\n\t\t\t\tdata.quotaAvailableBytes = quotaAvailableBytes\r\n\t\t\t}\r\n\r\n\t\t\t// extend the parsed data using the custom parsers\r\n\t\t\t_.each(this._fileInfoParsers, function(parserFunction) {\r\n\t\t\t\t_.extend(data, parserFunction(response, data) || {})\r\n\t\t\t})\r\n\r\n\t\t\treturn new FileInfo(data)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Parse Webdav multistatus\r\n\t\t *\r\n\t\t * @param {Array} responses\r\n\t\t */\r\n\t\t_parseResult: function(responses) {\r\n\t\t\tconst self = this\r\n\t\t\treturn _.map(responses, function(response) {\r\n\t\t\t\treturn self._parseFileInfo(response)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns whether the given status code means success\r\n\t\t *\r\n\t\t * @param {number} status status code\r\n\t\t *\r\n\t\t * @returns true if status code is between 200 and 299 included\r\n\t\t */\r\n\t\t_isSuccessStatus: function(status) {\r\n\t\t\treturn status >= 200 && status <= 299\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Parse the Sabre exception out of the given response, if any\r\n\t\t *\r\n\t\t * @param {Object} response object\r\n\t\t * @returns {Object} array of parsed message and exception (only the first one)\r\n\t\t */\r\n\t\t_getSabreException: function(response) {\r\n\t\t\tconst result = {}\r\n\t\t\tconst xml = response.xhr.responseXML\r\n\t\t\tif (xml === null) {\r\n\t\t\t\treturn result\r\n\t\t\t}\r\n\t\t\tconst messages = xml.getElementsByTagNameNS('http://sabredav.org/ns', 'message')\r\n\t\t\tconst exceptions = xml.getElementsByTagNameNS('http://sabredav.org/ns', 'exception')\r\n\t\t\tif (messages.length) {\r\n\t\t\t\tresult.message = messages[0].textContent\r\n\t\t\t}\r\n\t\t\tif (exceptions.length) {\r\n\t\t\t\tresult.exception = exceptions[0].textContent\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the default PROPFIND properties to use during a call.\r\n\t\t *\r\n\t\t * @returns {Array.<Object>} array of properties\r\n\t\t */\r\n\t\tgetPropfindProperties: function() {\r\n\t\t\tif (!this._propfindProperties) {\r\n\t\t\t\tthis._propfindProperties = _.map(Client._PROPFIND_PROPERTIES, function(propDef) {\r\n\t\t\t\t\treturn '{' + propDef[0] + '}' + propDef[1]\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn this._propfindProperties\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Lists the contents of a directory\r\n\t\t *\r\n\t\t * @param {String} path path to retrieve\r\n\t\t * @param {Object} [options] options\r\n\t\t * @param {boolean} [options.includeParent=false] set to true to keep\r\n\t\t * the parent folder in the result list\r\n\t\t * @param {Array} [options.properties] list of Webdav properties to retrieve\r\n\t\t *\r\n\t\t * @returns {Promise} promise\r\n\t\t */\r\n\t\tgetFolderContents: function(path, options) {\r\n\t\t\tif (!path) {\r\n\t\t\t\tpath = ''\r\n\t\t\t}\r\n\t\t\toptions = options || {}\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\t\t\tlet properties\r\n\t\t\tif (_.isUndefined(options.properties)) {\r\n\t\t\t\tproperties = this.getPropfindProperties()\r\n\t\t\t} else {\r\n\t\t\t\tproperties = options.properties\r\n\t\t\t}\r\n\r\n\t\t\tthis._client.propFind(\r\n\t\t\t\tthis._buildUrl(path),\r\n\t\t\t\tproperties,\r\n\t\t\t\t1\r\n\t\t\t).then(function(result) {\r\n\t\t\t\tif (self._isSuccessStatus(result.status)) {\r\n\t\t\t\t\tconst results = self._parseResult(result.body)\r\n\t\t\t\t\tif (!options || !options.includeParent) {\r\n\t\t\t\t\t\t// remove root dir, the first entry\r\n\t\t\t\t\t\tresults.shift()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdeferred.resolve(result.status, results)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = _.extend(result, self._getSabreException(result))\r\n\t\t\t\t\tdeferred.reject(result.status, result)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Fetches a flat list of files filtered by a given filter criteria.\r\n\t\t * (currently system tags and circles are supported)\r\n\t\t *\r\n\t\t * @param {Object} filter filter criteria\r\n\t\t * @param {Object} [filter.systemTagIds] list of system tag ids to filter by\r\n\t\t * @param {boolean} [filter.favorite] set it to filter by favorites\r\n\t\t * @param {Object} [options] options\r\n\t\t * @param {Array} [options.properties] list of Webdav properties to retrieve\r\n\t\t *\r\n\t\t * @returns {Promise} promise\r\n\t\t */\r\n\t\tgetFilteredFiles: function(filter, options) {\r\n\t\t\toptions = options || {}\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\t\t\tlet properties\r\n\t\t\tif (_.isUndefined(options.properties)) {\r\n\t\t\t\tproperties = this.getPropfindProperties()\r\n\t\t\t} else {\r\n\t\t\t\tproperties = options.properties\r\n\t\t\t}\r\n\r\n\t\t\tif (!filter\r\n\t\t\t\t|| (!filter.systemTagIds && _.isUndefined(filter.favorite) && !filter.circlesIds)) {\r\n\t\t\t\tthrow 'Missing filter argument'\r\n\t\t\t}\r\n\r\n\t\t\t// root element with namespaces\r\n\t\t\tlet body = '<oc:filter-files '\r\n\t\t\tlet namespace\r\n\t\t\tfor (namespace in this._client.xmlNamespaces) {\r\n\t\t\t\tbody += ' xmlns:' + this._client.xmlNamespaces[namespace] + '=\"' + namespace + '\"'\r\n\t\t\t}\r\n\t\t\tbody += '>\\n'\r\n\r\n\t\t\t// properties query\r\n\t\t\tbody += '    <' + this._client.xmlNamespaces['DAV:'] + ':prop>\\n'\r\n\t\t\t_.each(properties, function(prop) {\r\n\t\t\t\tconst property = self._client.parseClarkNotation(prop)\r\n\t\t\t\tbody += '        <' + self._client.xmlNamespaces[property.namespace] + ':' + property.name + ' />\\n'\r\n\t\t\t})\r\n\r\n\t\t\tbody += '    </' + this._client.xmlNamespaces['DAV:'] + ':prop>\\n'\r\n\r\n\t\t\t// rules block\r\n\t\t\tbody +=\t'    <oc:filter-rules>\\n'\r\n\t\t\t_.each(filter.systemTagIds, function(systemTagIds) {\r\n\t\t\t\tbody += '        <oc:systemtag>' + escapeHTML(systemTagIds) + '</oc:systemtag>\\n'\r\n\t\t\t})\r\n\t\t\t_.each(filter.circlesIds, function(circlesIds) {\r\n\t\t\t\tbody += '        <oc:circle>' + escapeHTML(circlesIds) + '</oc:circle>\\n'\r\n\t\t\t})\r\n\t\t\tif (filter.favorite) {\r\n\t\t\t\tbody += '        <oc:favorite>' + (filter.favorite ? '1' : '0') + '</oc:favorite>\\n'\r\n\t\t\t}\r\n\t\t\tbody += '    </oc:filter-rules>\\n'\r\n\r\n\t\t\t// end of root\r\n\t\t\tbody += '</oc:filter-files>\\n'\r\n\r\n\t\t\tthis._client.request(\r\n\t\t\t\t'REPORT',\r\n\t\t\t\tthis._buildUrl(),\r\n\t\t\t\t{},\r\n\t\t\t\tbody\r\n\t\t\t).then(function(result) {\r\n\t\t\t\tif (self._isSuccessStatus(result.status)) {\r\n\t\t\t\t\tconst results = self._parseResult(result.body)\r\n\t\t\t\t\tdeferred.resolve(result.status, results)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = _.extend(result, self._getSabreException(result))\r\n\t\t\t\t\tdeferred.reject(result.status, result)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the file info of a given path.\r\n\t\t *\r\n\t\t * @param {String} path path\r\n\t\t * @param {Array} [options.properties] list of Webdav properties to retrieve\r\n\t\t *\r\n\t\t * @returns {Promise} promise\r\n\t\t */\r\n\t\tgetFileInfo: function(path, options) {\r\n\t\t\tif (!path) {\r\n\t\t\t\tpath = ''\r\n\t\t\t}\r\n\t\t\toptions = options || {}\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\t\t\tlet properties\r\n\t\t\tif (_.isUndefined(options.properties)) {\r\n\t\t\t\tproperties = this.getPropfindProperties()\r\n\t\t\t} else {\r\n\t\t\t\tproperties = options.properties\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: headers\r\n\t\t\tthis._client.propFind(\r\n\t\t\t\tthis._buildUrl(path),\r\n\t\t\t\tproperties,\r\n\t\t\t\t0\r\n\t\t\t).then(\r\n\t\t\t\tfunction(result) {\r\n\t\t\t\t\tif (self._isSuccessStatus(result.status)) {\r\n\t\t\t\t\t\tdeferred.resolve(result.status, self._parseResult([result.body])[0])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = _.extend(result, self._getSabreException(result))\r\n\t\t\t\t\t\tdeferred.reject(result.status, result)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the contents of the given file.\r\n\t\t *\r\n\t\t * @param {String} path path to file\r\n\t\t *\r\n\t\t * @returns {Promise}\r\n\t\t */\r\n\t\tgetFileContents: function(path) {\r\n\t\t\tif (!path) {\r\n\t\t\t\tthrow 'Missing argument \"path\"'\r\n\t\t\t}\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\r\n\t\t\tthis._client.request(\r\n\t\t\t\t'GET',\r\n\t\t\t\tthis._buildUrl(path)\r\n\t\t\t).then(\r\n\t\t\t\tfunction(result) {\r\n\t\t\t\t\tif (self._isSuccessStatus(result.status)) {\r\n\t\t\t\t\t\tdeferred.resolve(result.status, result.body)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = _.extend(result, self._getSabreException(result))\r\n\t\t\t\t\t\tdeferred.reject(result.status, result)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Puts the given data into the given file.\r\n\t\t *\r\n\t\t * @param {String} path path to file\r\n\t\t * @param {String} body file body\r\n\t\t * @param {Object} [options]\r\n\t\t * @param {String} [options.contentType='text/plain'] content type\r\n\t\t * @param {boolean} [options.overwrite=true] whether to overwrite an existing file\r\n\t\t *\r\n\t\t * @returns {Promise}\r\n\t\t */\r\n\t\tputFileContents: function(path, body, options) {\r\n\t\t\tif (!path) {\r\n\t\t\t\tthrow 'Missing argument \"path\"'\r\n\t\t\t}\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\t\t\toptions = options || {}\r\n\t\t\tconst headers = {}\r\n\t\t\tlet contentType = 'text/plain;charset=utf-8'\r\n\t\t\tif (options.contentType) {\r\n\t\t\t\tcontentType = options.contentType\r\n\t\t\t}\r\n\r\n\t\t\theaders['Content-Type'] = contentType\r\n\r\n\t\t\tif (_.isUndefined(options.overwrite) || options.overwrite) {\r\n\t\t\t\t// will trigger 412 precondition failed if a file already exists\r\n\t\t\t\theaders['If-None-Match'] = '*'\r\n\t\t\t}\r\n\r\n\t\t\tthis._client.request(\r\n\t\t\t\t'PUT',\r\n\t\t\t\tthis._buildUrl(path),\r\n\t\t\t\theaders,\r\n\t\t\t\tbody || ''\r\n\t\t\t).then(\r\n\t\t\t\tfunction(result) {\r\n\t\t\t\t\tif (self._isSuccessStatus(result.status)) {\r\n\t\t\t\t\t\tdeferred.resolve(result.status)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = _.extend(result, self._getSabreException(result))\r\n\t\t\t\t\t\tdeferred.reject(result.status, result)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t_simpleCall: function(method, path) {\r\n\t\t\tif (!path) {\r\n\t\t\t\tthrow 'Missing argument \"path\"'\r\n\t\t\t}\r\n\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\r\n\t\t\tthis._client.request(\r\n\t\t\t\tmethod,\r\n\t\t\t\tthis._buildUrl(path)\r\n\t\t\t).then(\r\n\t\t\t\tfunction(result) {\r\n\t\t\t\t\tif (self._isSuccessStatus(result.status)) {\r\n\t\t\t\t\t\tdeferred.resolve(result.status)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = _.extend(result, self._getSabreException(result))\r\n\t\t\t\t\t\tdeferred.reject(result.status, result)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Creates a directory\r\n\t\t *\r\n\t\t * @param {String} path path to create\r\n\t\t *\r\n\t\t * @returns {Promise}\r\n\t\t */\r\n\t\tcreateDirectory: function(path) {\r\n\t\t\treturn this._simpleCall('MKCOL', path)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Deletes a file or directory\r\n\t\t *\r\n\t\t * @param {String} path path to delete\r\n\t\t *\r\n\t\t * @returns {Promise}\r\n\t\t */\r\n\t\tremove: function(path) {\r\n\t\t\treturn this._simpleCall('DELETE', path)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Moves path to another path\r\n\t\t *\r\n\t\t * @param {String} path path to move\r\n\t\t * @param {String} destinationPath destination path\r\n\t\t * @param {boolean} [allowOverwrite=false] true to allow overwriting,\r\n\t\t * false otherwise\r\n\t\t * @param {Object} [headers=null] additional headers\r\n\t\t *\r\n\t\t * @returns {Promise} promise\r\n\t\t */\r\n\t\tmove: function(path, destinationPath, allowOverwrite, headers) {\r\n\t\t\tif (!path) {\r\n\t\t\t\tthrow 'Missing argument \"path\"'\r\n\t\t\t}\r\n\t\t\tif (!destinationPath) {\r\n\t\t\t\tthrow 'Missing argument \"destinationPath\"'\r\n\t\t\t}\r\n\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\t\t\theaders = _.extend({}, headers, {\r\n\t\t\t\t'Destination': this._buildUrl(destinationPath),\r\n\t\t\t})\r\n\r\n\t\t\tif (!allowOverwrite) {\r\n\t\t\t\theaders.Overwrite = 'F'\r\n\t\t\t}\r\n\r\n\t\t\tthis._client.request(\r\n\t\t\t\t'MOVE',\r\n\t\t\t\tthis._buildUrl(path),\r\n\t\t\t\theaders\r\n\t\t\t).then(\r\n\t\t\t\tfunction(result) {\r\n\t\t\t\t\tif (self._isSuccessStatus(result.status)) {\r\n\t\t\t\t\t\tdeferred.resolve(result.status)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = _.extend(result, self._getSabreException(result))\r\n\t\t\t\t\t\tdeferred.reject(result.status, result)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Copies path to another path\r\n\t\t *\r\n\t\t * @param {String} path path to copy\r\n\t\t * @param {String} destinationPath destination path\r\n\t\t * @param {boolean} [allowOverwrite=false] true to allow overwriting,\r\n\t\t * false otherwise\r\n\t\t *\r\n\t\t * @returns {Promise} promise\r\n\t\t */\r\n\t\tcopy: function(path, destinationPath, allowOverwrite) {\r\n\t\t\tif (!path) {\r\n\t\t\t\tthrow 'Missing argument \"path\"'\r\n\t\t\t}\r\n\t\t\tif (!destinationPath) {\r\n\t\t\t\tthrow 'Missing argument \"destinationPath\"'\r\n\t\t\t}\r\n\r\n\t\t\tconst self = this\r\n\t\t\tconst deferred = $.Deferred()\r\n\t\t\tconst promise = deferred.promise()\r\n\t\t\tconst headers = {\r\n\t\t\t\t'Destination': this._buildUrl(destinationPath),\r\n\t\t\t}\r\n\r\n\t\t\tif (!allowOverwrite) {\r\n\t\t\t\theaders.Overwrite = 'F'\r\n\t\t\t}\r\n\r\n\t\t\tthis._client.request(\r\n\t\t\t\t'COPY',\r\n\t\t\t\tthis._buildUrl(path),\r\n\t\t\t\theaders\r\n\t\t\t).then(\r\n\t\t\t\tfunction(response) {\r\n\t\t\t\t\tif (self._isSuccessStatus(response.status)) {\r\n\t\t\t\t\t\tdeferred.resolve(response.status)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdeferred.reject(response.status)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn promise\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add a file info parser function\r\n\t\t *\r\n\t\t * @param {OC.Files.Client~parseFileInfo} parserFunction\r\n\t\t */\r\n\t\taddFileInfoParser: function(parserFunction) {\r\n\t\t\tthis._fileInfoParsers.push(parserFunction)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the dav.Client instance used internally\r\n\t\t *\r\n\t\t * @since 11.0.0\r\n\t\t * @returns {dav.Client}\r\n\t\t */\r\n\t\tgetClient: function() {\r\n\t\t\treturn this._client\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the user name\r\n\t\t *\r\n\t\t * @since 11.0.0\r\n\t\t * @returns {String} userName\r\n\t\t */\r\n\t\tgetUserName: function() {\r\n\t\t\treturn this._client.userName\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the password\r\n\t\t *\r\n\t\t * @since 11.0.0\r\n\t\t * @returns {String} password\r\n\t\t */\r\n\t\tgetPassword: function() {\r\n\t\t\treturn this._client.password\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the base URL\r\n\t\t *\r\n\t\t * @since 11.0.0\r\n\t\t * @returns {String} base URL\r\n\t\t */\r\n\t\tgetBaseUrl: function() {\r\n\t\t\treturn this._client.baseUrl\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the host\r\n\t\t *\r\n\t\t * @since 13.0.0\r\n\t\t * @returns {String} base URL\r\n\t\t */\r\n\t\tgetHost: function() {\r\n\t\t\treturn this._host\r\n\t\t},\r\n\t}\r\n\r\n\t/**\r\n\t * File info parser function\r\n\t *\r\n\t * This function receives a list of Webdav properties as input and\r\n\t * should return a hash array of parsed properties, if applicable.\r\n\t *\r\n\t * @callback OC.Files.Client~parseFileInfo\r\n\t * @param {Object} XML Webdav properties\r\n     * @return {Array} array of parsed property values\r\n\t */\r\n\r\n\tif (!OC.Files) {\r\n\t\t/**\r\n\t\t * @namespace OC.Files\r\n\t\t *\r\n\t\t * @since 8.2\r\n\t\t */\r\n\t\tOC.Files = {}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the default instance of the files client\r\n\t *\r\n\t * @returns {OC.Files.Client} default client\r\n\t *\r\n\t * @since 8.2\r\n\t */\r\n\tOC.Files.getClient = function() {\r\n\t\tif (OC.Files._defaultClient) {\r\n\t\t\treturn OC.Files._defaultClient\r\n\t\t}\r\n\r\n\t\tconst client = new OC.Files.Client({\r\n\t\t\thost: OC.getHost(),\r\n\t\t\tport: OC.getPort(),\r\n\t\t\troot: OC.linkToRemoteBase('dav') + '/files/' + OC.getCurrentUser().uid,\r\n\t\t\tuseHTTPS: OC.getProtocol() === 'https',\r\n\t\t})\r\n\t\tOC.Files._defaultClient = client\r\n\t\treturn client\r\n\t}\r\n\r\n\tOC.Files.Client = Client\r\n})(OC, OC.Files.FileInfo)\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 5578;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t5578: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7874], function() { return __webpack_require__(7913); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","OC","FileInfo","Client","options","this","_root","root","charAt","length","substr","url","PROTOCOL_HTTP","useHTTPS","PROTOCOL_HTTPS","host","_host","_defaultHeaders","defaultHeaders","requestToken","_baseUrl","clientOptions","baseUrl","xmlNamespaces","userName","password","_client","dav","xhrProvider","_","bind","_xhrProvider","_fileInfoParsers","NS_OWNCLOUD","NS_NEXTCLOUD","NS_DAV","NS_OCS","PROPERTY_GETLASTMODIFIED","PROPERTY_GETETAG","PROPERTY_GETCONTENTTYPE","PROPERTY_RESOURCETYPE","PROPERTY_INTERNAL_FILEID","PROPERTY_PERMISSIONS","PROPERTY_SIZE","PROPERTY_GETCONTENTLENGTH","PROPERTY_ISENCRYPTED","PROPERTY_SHARE_PERMISSIONS","PROPERTY_SHARE_ATTRIBUTES","PROPERTY_QUOTA_AVAILABLE_BYTES","_PROPFIND_PROPERTIES","prototype","headers","xhr","XMLHttpRequest","oldOpen","open","result","apply","arguments","each","value","key","setRequestHeader","registerXHRForErrorProcessing","_buildUrl","path","_buildPath","i","joinPaths","sections","split","encodeURIComponent","join","_parseHeaders","headersString","headerRows","sepPos","indexOf","headerName","headerValue","push","_parseEtag","etag","_parseFileInfo","response","decodeURIComponent","href","propStat","status","props","properties","data","id","dirname","name","basename","mtime","Date","getTime","etagProp","isUndefined","sizeProp","size","parseInt","hasPreviewProp","hasPreview","isEncryptedProp","isEncrypted","isFavouritedProp","isFavourited","contentType","mimetype","resType","xmlvalue","namespaceURI","nodeName","permissions","PERMISSION_NONE","permissionProp","permString","mountType","PERMISSION_CREATE","PERMISSION_READ","PERMISSION_UPDATE","PERMISSION_DELETE","PERMISSION_SHARE","sharePermissionsProp","sharePermissions","shareAttributesProp","shareAttributes","JSON","parse","e","console","warn","mounTypeProp","quotaAvailableBytes","parserFunction","extend","_parseResult","responses","self","map","_isSuccessStatus","_getSabreException","xml","responseXML","messages","getElementsByTagNameNS","exceptions","message","textContent","exception","getPropfindProperties","_propfindProperties","propDef","getFolderContents","$","Deferred","promise","propFind","then","results","body","includeParent","shift","resolve","reject","getFilteredFiles","filter","systemTagIds","favorite","circlesIds","namespace","prop","property","parseClarkNotation","escapeHTML","request","getFileInfo","getFileContents","putFileContents","overwrite","_simpleCall","method","createDirectory","remove","move","destinationPath","allowOverwrite","Overwrite","copy","addFileInfoParser","getClient","getUserName","getPassword","getBaseUrl","getHost","Files","_defaultClient","client","port","getPort","linkToRemoteBase","getCurrentUser","uid","getProtocol","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","call","m","amdD","Error","amdO","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","window","obj","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","b","document","baseURI","location","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","forEach","nc","__webpack_exports__"],"sourceRoot":""}