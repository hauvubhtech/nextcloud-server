/*! For license information please see dav-settings-personal-availability.js.LICENSE.txt */
!function(){var n,e={82496:function(n,e,r){"use strict";var a=r(20144),i=r(9944),o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("NcSettingsSection",{attrs:{title:n.$t("dav","Availability"),description:n.$t("dav","If you configure your working hours, other users will see when you are out of office when they book a meeting.")}},[e("div",{staticClass:"time-zone"},[e("strong",[n._v("\n\t\t\t"+n._s(n.$t("dav","Time zone:"))+"\n\t\t")]),n._v(" "),e("span",{staticClass:"time-zone-text"},[e("NcTimezonePicker",{model:{value:n.timezone,callback:function(t){n.timezone=t},expression:"timezone"}})],1)]),n._v(" "),e("CalendarAvailability",{attrs:{slots:n.slots,loading:n.loading,"l10n-to":n.$t("dav","to"),"l10n-delete-slot":n.$t("dav","Delete slot"),"l10n-empty-day":n.$t("dav","No working hours set"),"l10n-add-slot":n.$t("dav","Add slot"),"l10n-monday":n.$t("dav","Monday"),"l10n-tuesday":n.$t("dav","Tuesday"),"l10n-wednesday":n.$t("dav","Wednesday"),"l10n-thursday":n.$t("dav","Thursday"),"l10n-friday":n.$t("dav","Friday"),"l10n-saturday":n.$t("dav","Saturday"),"l10n-sunday":n.$t("dav","Sunday")},on:{"update:slots":function(t){n.slots=t}}}),n._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:n.automated},on:{"update:checked":function(t){n.automated=t}}},[n._v("\n\t\t"+n._s(n.$t("dav",'Automatically set user status to "Do not disturb" outside of availability to mute all notifications.'))+"\n\t")]),n._v(" "),e("NcButton",{attrs:{disabled:n.loading||n.saving,type:"primary"},on:{click:n.save}},[n._v("\n\t\t"+n._s(n.$t("dav","Save"))+"\n\t")])],1)};o._withStripped=!0;var l=r(51796),s=r(16453),d=r(26932),u=r(81063),c=r(4820),p=r(56580),f=r.n(p),A=r(79753),v=r(22200),m=f()((function(n){return c.default.defaults.headers["X-Requested-With"]="XMLHttpRequest",u.getPatcher().patch("request",c.default),u.createClient((0,A.generateRemoteUrl)("dav/".concat(n,"/").concat((0,v.getCurrentUser)().uid)))})),y=(0,r(17499).IY)().setApp("dav").detectUser().build(),b=r(7582);function x(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function g(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?x(Object(e),!0).forEach((function(t){C(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):x(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function C(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function h(n){return function(n){if(Array.isArray(n))return w(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return w(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?w(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function k(n,t,e,r,a,i,o){try{var l=n[i](o),s=l.value}catch(n){return void e(n)}l.done?t(s):Promise.resolve(s).then(r,a)}function O(n){return function(){var t=this,e=arguments;return new Promise((function(r,a){var i=n.apply(t,e);function o(n){k(i,r,a,o,l,"next",n)}function l(n){k(i,r,a,o,l,"throw",n)}o(void 0)}))}}function S(){return B.apply(this,arguments)}function B(){return(B=O(regeneratorRuntime.mark((function n(){var t,e,r,a,i,o,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=m("calendars"),n.next=3,a.customRequest("inbox",{method:"PROPFIND",data:'<?xml version="1.0"?>\n\t\t\t<x0:propfind xmlns:x0="DAV:">\n\t\t\t  <x0:prop>\n\t\t\t\t<x1:calendar-availability xmlns:x1="urn:ietf:params:xml:ns:caldav"/>\n\t\t\t  </x0:prop>\n\t\t\t</x0:propfind>'});case 3:return i=n.sent,n.next=6,(0,b.parseXML)(i.data);case 6:if(o=n.sent){n.next=9;break}return n.abrupt("return",void 0);case 9:if(s=null==o||null===(t=o.multistatus)||void 0===t||null===(e=t.response[0])||void 0===e||null===(r=e.propstat)||void 0===r?void 0:r.prop["calendar-availability"]){n.next=12;break}return n.abrupt("return",void 0);case 12:return n.abrupt("return",(0,l.Xg)(s));case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function P(n,t){return _.apply(this,arguments)}function _(){return(_=O(regeneratorRuntime.mark((function n(t,e){var r,a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=h(Object.keys(t).flatMap((function(n){return t[n].map((function(t){return g(g({},t),{},{day:n})}))}))),a=(0,l.ST)(r,e),y.debug("New availability ical created",{vavailability:a}),i=m("calendars"),n.next=6,i.customRequest("inbox",{method:"PROPPATCH",data:'<?xml version="1.0"?>\n\t\t\t<x0:propertyupdate xmlns:x0="DAV:">\n\t\t\t  <x0:set>\n\t\t\t\t<x0:prop>\n\t\t\t\t  <x1:calendar-availability xmlns:x1="urn:ietf:params:xml:ns:caldav">'.concat(a,"</x1:calendar-availability>\n\t\t\t\t</x0:prop>\n\t\t\t  </x0:set>\n\t\t\t</x0:propertyupdate>")});case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function j(n,t,e,r,a,i,o){try{var l=n[i](o),s=l.value}catch(n){return void e(n)}l.done?t(s):Promise.resolve(s).then(r,a)}function D(n){return function(){var t=this,e=arguments;return new Promise((function(r,a){var i=n.apply(t,e);function o(n){j(i,r,a,o,l,"next",n)}function l(n){j(i,r,a,o,l,"throw",n)}o(void 0)}))}}function R(){return E.apply(this,arguments)}function E(){return(E=D(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.default.post((0,A.generateOcsUrl)("/apps/provisioning_api/api/v1/config/users/{appId}/{configKey}",{appId:"dav",configKey:"user_status_automation"}),{configValue:"yes"});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function $(){return T.apply(this,arguments)}function T(){return(T=D(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.default.delete((0,A.generateOcsUrl)("/apps/provisioning_api/api/v1/config/users/{appId}/{configKey}",{appId:"dav",configKey:"user_status_automation"}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var z=r(55586),I=r.n(z),U=r(10861),N=r.n(U),M=r(20571),F=r.n(M),q=r(13299),Z=r.n(q),W=r(31144),Y=r.n(W);function H(n,t,e,r,a,i,o){try{var l=n[i](o),s=l.value}catch(n){return void e(n)}l.done?t(s):Promise.resolve(s).then(r,a)}function K(n){return function(){var t=this,e=arguments;return new Promise((function(r,a){var i=n.apply(t,e);function o(n){H(i,r,a,o,l,"next",n)}function l(n){H(i,r,a,o,l,"throw",n)}o(void 0)}))}}var X={name:"Availability",components:{NcButton:N(),NcCheckboxRadioSwitch:F(),CalendarAvailability:l.Dx,NcSettingsSection:Z(),NcTimezonePicker:Y()},data:function(){var n=I().determine();return{loading:!0,saving:!1,timezone:n?n.name():"UTC",slots:{MO:[],TU:[],WE:[],TH:[],FR:[],SA:[],SU:[]},automated:"yes"===(0,s.loadState)("dav","user_status_automation")}},mounted:function(){var n=this;return K(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:(r=e.sent)?(a=r.slots,i=r.timezoneId,n.slots=a,i&&(n.timezone=i),console.info("availability loaded",n.slots,n.timezoneId)):(console.info("no availability is set"),n.slots={MO:[],TU:[],WE:[],TH:[],FR:[],SA:[],SU:[]}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("could not load existing availability",e.t0),(0,d.x2)(t("dav","Failed to load availability"));case 11:return e.prev=11,n.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})))()},methods:{save:function(){var n=this;return K(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.saving=!0,e.next=4,P(n.slots,n.timezone);case 4:if(!n.automated){e.next=9;break}return e.next=7,R();case 7:e.next=11;break;case 9:return e.next=11,$();case 11:(0,d.s$)(t("dav","Saved availability")),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("could not save availability",e.t0),(0,d.x2)(t("dav","Failed to save availability"));case 18:return e.prev=18,n.saving=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})))()}}},V=r(93379),L=r.n(V),G=r(7795),Q=r.n(G),J=r(90569),nn=r.n(J),tn=r(3565),en=r.n(tn),rn=r(19216),an=r.n(rn),on=r(44589),ln=r.n(on),sn=r(65184),dn={};dn.styleTagTransform=ln(),dn.setAttributes=en(),dn.insert=nn().bind(null,"head"),dn.domAPI=Q(),dn.insertStyleElement=an(),L()(sn.Z,dn),sn.Z&&sn.Z.locals&&sn.Z.locals;var un=(0,r(51900).Z)(X,o,[],!1,null,"aad5ff48",null);un.options.__file="apps/dav/src/views/Availability.vue";var cn=un.exports;a.ZP.prototype.$t=i.translate,new(a.ZP.extend(cn))({}).$mount("#settings-personal-availability")},65184:function(n,t,e){"use strict";var r=e(87537),a=e.n(r),i=e(23645),o=e.n(i)()(a());o.push([n.id,".availability-day[data-v-aad5ff48]{padding:0 10px 0 10px;position:absolute}.availability-slots[data-v-aad5ff48]{display:flex;white-space:nowrap}.availability-slot[data-v-aad5ff48]{display:flex;flex-direction:row;align-items:center}.availability-slot-group[data-v-aad5ff48]{display:flex;flex-direction:column}[data-v-aad5ff48] .mx-input-wrapper{width:85px}[data-v-aad5ff48] .mx-datepicker{width:97px}[data-v-aad5ff48] .multiselect{border:1px solid var(--color-border-dark);width:120px}.time-zone[data-v-aad5ff48]{padding:32px 12px 12px 0}.grid-table[data-v-aad5ff48]{display:grid;margin-bottom:32px;grid-column-gap:24px;grid-row-gap:6px;grid-template-columns:min-content min-content min-content}.button[data-v-aad5ff48]{align-self:flex-end}.label-weekday[data-v-aad5ff48]{position:relative;display:inline-flex;padding-top:4px}.delete-slot[data-v-aad5ff48]{background-color:rgba(0,0,0,0);border:none;padding-bottom:12px;opacity:.5}.delete-slot[data-v-aad5ff48]:hover{opacity:1}.add-another[data-v-aad5ff48]{background-color:rgba(0,0,0,0);border:none;opacity:.5;display:inline-flex;padding:0;margin:0;margin-bottom:3px}.add-another[data-v-aad5ff48]:hover{opacity:1}.to-text[data-v-aad5ff48]{padding-right:12px}.time-zone-text[data-v-aad5ff48]{padding-left:22px}.empty-content[data-v-aad5ff48]{color:var(--color-text-lighter);margin-top:4px}","",{version:3,sources:["webpack://./apps/dav/src/views/Availability.vue"],names:[],mappings:"AAkIA,mCACC,qBAAA,CACA,iBAAA,CAED,qCACC,YAAA,CACA,kBAAA,CAED,oCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CAED,0CACC,YAAA,CACA,qBAAA,CAED,oCACC,UAAA,CAED,iCACC,UAAA,CAED,+BACC,yCAAA,CACA,WAAA,CAED,4BACC,wBAAA,CAED,6BACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,gBAAA,CACA,yDAAA,CAED,yBACC,mBAAA,CAED,gCACC,iBAAA,CACA,mBAAA,CACA,eAAA,CAED,8BACC,8BAAA,CACA,WAAA,CACA,mBAAA,CACA,UAAA,CACA,oCACC,SAAA,CAIF,8BACC,8BAAA,CACA,WAAA,CACA,UAAA,CACA,mBAAA,CACA,SAAA,CACA,QAAA,CACA,iBAAA,CAEA,oCACC,SAAA,CAGF,0BACC,kBAAA,CAED,iCACC,iBAAA,CAED,gCACC,+BAAA,CACA,cAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.availability-day {\r\n\tpadding: 0 10px 0 10px;\r\n\tposition: absolute;\r\n}\r\n.availability-slots {\r\n\tdisplay: flex;\r\n\twhite-space: nowrap;\r\n}\r\n.availability-slot {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n}\r\n.availability-slot-group {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n::v-deep .mx-input-wrapper {\r\n\twidth: 85px;\r\n}\r\n::v-deep .mx-datepicker {\r\n\twidth: 97px;\r\n}\r\n::v-deep .multiselect {\r\n\tborder: 1px solid var(--color-border-dark);\r\n\twidth: 120px;\r\n}\r\n.time-zone {\r\n\tpadding: 32px 12px 12px 0;\r\n}\r\n.grid-table {\r\n\tdisplay: grid;\r\n\tmargin-bottom: 32px;\r\n\tgrid-column-gap: 24px;\r\n\tgrid-row-gap: 6px;\r\n\tgrid-template-columns: min-content min-content min-content;\r\n}\r\n.button {\r\n\talign-self: flex-end;\r\n}\r\n.label-weekday {\r\n\tposition: relative;\r\n\tdisplay: inline-flex;\r\n\tpadding-top: 4px;\r\n}\r\n.delete-slot {\r\n\tbackground-color: transparent;\r\n\tborder: none;\r\n\tpadding-bottom: 12px;\r\n\topacity: .5;\r\n\t&:hover {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n\r\n.add-another {\r\n\tbackground-color: transparent;\r\n\tborder: none;\r\n\topacity: .5;\r\n\tdisplay: inline-flex;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tmargin-bottom: 3px;\r\n\r\n\t&:hover {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n.to-text {\r\n\tpadding-right: 12px;\r\n}\r\n.time-zone-text{\r\n\tpadding-left: 22px;\r\n}\r\n.empty-content {\r\n\tcolor: var(--color-text-lighter);\r\n\tmargin-top: 4px;\r\n}\r\n\r\n"],sourceRoot:""}]),t.Z=o},69862:function(){},40964:function(){}},r={};function a(n){var t=r[n];if(void 0!==t)return t.exports;var i=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,a.amdD=function(){throw new Error("define cannot be used indirect")},a.amdO={},n=[],a.O=function(t,e,r,i){if(!e){var o=1/0;for(u=0;u<n.length;u++){e=n[u][0],r=n[u][1],i=n[u][2];for(var l=!0,s=0;s<e.length;s++)(!1&i||o>=i)&&Object.keys(a.O).every((function(n){return a.O[n](e[s])}))?e.splice(s--,1):(l=!1,i<o&&(o=i));if(l){n.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=n.length;u>0&&n[u-1][2]>i;u--)n[u]=n[u-1];n[u]=[e,r,i]},a.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(t,{a:t}),t},a.d=function(n,t){for(var e in t)a.o(t,e)&&!a.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),a.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n},a.j=3347,function(){a.b=document.baseURI||self.location.href;var n={3347:0};a.O.j=function(t){return 0===n[t]};var t=function(t,e){var r,i,o=e[0],l=e[1],s=e[2],d=0;if(o.some((function(t){return 0!==n[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var u=s(a)}for(t&&t(e);d<o.length;d++)i=o[d],a.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return a.O(u)},e=self.webpackChunknextcloud=self.webpackChunknextcloud||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))}(),a.nc=void 0;var i=a.O(void 0,[7874],(function(){return a(82496)}));i=a.O(i)}();
//# sourceMappingURL=dav-settings-personal-availability.js.map?v=91613264982b49333c97