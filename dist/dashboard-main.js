/*! For license information please see dashboard-main.js.LICENSE.txt */
!function(){"use strict";var n,r={30661:function(n,r,e){var a=e(20144),o=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{attrs:{id:"app-dashboard"}},[r("h2",[t._v(t._s(t.greeting.text))]),t._v(" "),r("ul",{staticClass:"statuses"},t._l(t.sortedRegisteredStatus,(function(t){return r("div",{key:t,attrs:{id:"status-"+t}},[r("div",{ref:"status-"+t,refInFor:!0})])})),0),t._v(" "),r("Draggable",t._b({staticClass:"panels",attrs:{handle:".panel--header"},on:{end:t.saveLayout},model:{value:t.layout,callback:function(n){t.layout=n},expression:"layout"}},"Draggable",{swapThreshold:.3,delay:500,delayOnTouchOnly:!0,touchStartThreshold:3},!1),t._l(t.layout,(function(n){return r("div",{key:t.panels[n].id,staticClass:"panel"},[r("div",{staticClass:"panel--header"},[r("h2",[r("div",{class:t.panels[n].iconClass,attrs:{role:"img"}}),t._v("\n\t\t\t\t\t"+t._s(t.panels[n].title)+"\n\t\t\t\t")])]),t._v(" "),r("div",{staticClass:"panel--content",class:{loading:!t.panels[n].mounted}},[r("div",{ref:t.panels[n].id,refInFor:!0,attrs:{"data-id":t.panels[n].id}})])])})),0),t._v(" "),r("div",{staticClass:"footer"},[r("NcButton",{on:{click:t.showModal},scopedSlots:t._u([{key:"icon",fn:function(){return[r("Pencil",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("dashboard","Customize"))+"\n\t\t")])],1),t._v(" "),t.modal?r("NcModal",{attrs:{size:"large"},on:{close:t.closeModal}},[r("div",{staticClass:"modal__content"},[r("h3",[t._v(t._s(t.t("dashboard","Edit widgets")))]),t._v(" "),r("ol",{staticClass:"panels"},t._l(t.sortedAllStatuses,(function(n){return r("li",{key:n,class:"panel-"+n},[r("input",{staticClass:"checkbox",attrs:{id:"status-checkbox-"+n,type:"checkbox"},domProps:{checked:t.isStatusActive(n)},on:{input:function(r){return t.updateStatusCheckbox(n,r.target.checked)}}}),t._v(" "),r("label",{attrs:{for:"status-checkbox-"+n}},[r("div",{class:t.statusInfo[n].icon,attrs:{role:"img"}}),t._v("\n\t\t\t\t\t\t"+t._s(t.statusInfo[n].text)+"\n\t\t\t\t\t")])])})),0),t._v(" "),r("Draggable",t._b({staticClass:"panels",attrs:{tag:"ol",handle:".draggable"},on:{end:t.saveLayout},model:{value:t.layout,callback:function(n){t.layout=n},expression:"layout"}},"Draggable",{swapThreshold:.3,delay:500,delayOnTouchOnly:!0,touchStartThreshold:3},!1),t._l(t.sortedPanels,(function(n){return r("li",{key:n.id,class:"panel-"+n.id},[r("input",{staticClass:"checkbox",attrs:{id:"panel-checkbox-"+n.id,type:"checkbox"},domProps:{checked:t.isActive(n)},on:{input:function(r){return t.updateCheckbox(n,r.target.checked)}}}),t._v(" "),r("label",{class:{draggable:t.isActive(n)},attrs:{for:"panel-checkbox-"+n.id}},[r("div",{class:n.iconClass,attrs:{role:"img"}}),t._v("\n\t\t\t\t\t\t"+t._s(n.title)+"\n\t\t\t\t\t")])])})),0),t._v(" "),t.isAdmin?r("a",{staticClass:"button",attrs:{href:t.appStoreUrl}},[t._v(t._s(t.t("dashboard","Get more widgets from the App Store")))]):t._e(),t._v(" "),r("h3",[t._v(t._s(t.t("dashboard","Weather service")))]),t._v(" "),r("p",[t._v("\n\t\t\t\t"+t._s(t.t("dashboard","For your privacy, the weather data is requested by your xD Drive server on your behalf so the weather service receives no personal information."))+"\n\t\t\t")]),t._v(" "),r("p",{staticClass:"credits--end"},[r("a",{attrs:{href:"https://api.met.no/doc/TermsOfService",target:"_blank",rel:"noopener"}},[t._v(t._s(t.t("dashboard","Weather data from Met.no")))]),t._v(",\n\t\t\t\t"),r("a",{attrs:{href:"https://wiki.osmfoundation.org/wiki/Privacy_Policy",target:"_blank",rel:"noopener"}},[t._v(t._s(t.t("dashboard","geocoding with Nominatim")))]),t._v(",\n\t\t\t\t"),r("a",{attrs:{href:"https://www.opentopodata.org/#public-api",target:"_blank",rel:"noopener"}},[t._v(t._s(t.t("dashboard","elevation data from OpenTopoData")))]),t._v(".\n\t\t\t")])],1)]):t._e()],1)};o._withStripped=!0;var i=e(79753),s=e(22200),l=e(16453),d=e(4820),c=e(10861),p=e.n(c),u=e(9980),A=e.n(u),h=e(70110),b=e.n(h),v=e(27303),g={data:function(){return{isMobile:this._isMobile()}},beforeMount:function(){window.addEventListener("resize",this._onResize)},beforeDestroy:function(){window.removeEventListener("resize",this._onResize)},methods:{_onResize:function(){this.isMobile=this._isMobile()},_isMobile:function(){return document.documentElement.clientWidth<768}}},m=(0,l.loadState)("dashboard","panels"),f=(0,l.loadState)("dashboard","firstRun"),C={weather:{text:t("dashboard","Weather"),icon:"icon-weather-status"},status:{text:t("dashboard","Status"),icon:"icon-user-status-online"}},x={name:"DashboardApp",components:{NcButton:p(),Draggable:A(),NcModal:b(),Pencil:v.default},mixins:[g],data:function(){var t,n;return{isAdmin:(0,s.getCurrentUser)().isAdmin,timer:new Date,registeredStatus:[],callbacks:{},callbacksStatus:{},allCallbacksStatus:{},statusInfo:C,enabledStatuses:(0,l.loadState)("dashboard","statuses"),panels:m,firstRun:f,displayName:null===(t=(0,s.getCurrentUser)())||void 0===t?void 0:t.displayName,uid:null===(n=(0,s.getCurrentUser)())||void 0===n?void 0:n.uid,layout:(0,l.loadState)("dashboard","layout").filter((function(t){return m[t]})),modal:!1,appStoreUrl:(0,i.generateUrl)("/settings/apps/dashboard"),statuses:{}}},computed:{greeting:function(){var n,r=this.timer.getHours();n=r>=22||r<5?"night":r>=18?"evening":r>=12?"afternoon":"morning";var e={morning:{generic:t("dashboard","Good morning"),withName:t("dashboard","Good morning, {name}",{name:this.displayName},void 0,{escape:!1})},afternoon:{generic:t("dashboard","Good afternoon"),withName:t("dashboard","Good afternoon, {name}",{name:this.displayName},void 0,{escape:!1})},evening:{generic:t("dashboard","Good evening"),withName:t("dashboard","Good evening, {name}",{name:this.displayName},void 0,{escape:!1})},night:{generic:t("dashboard","Hello"),withName:t("dashboard","Hello, {name}",{name:this.displayName},void 0,{escape:!1})}};return{text:this.displayName&&this.uid!==this.displayName?e[n].withName:e[n].generic}},isActive:function(){var t=this;return function(n){return t.layout.indexOf(n.id)>-1}},isStatusActive:function(){var t=this;return function(n){return!(n in t.enabledStatuses)||t.enabledStatuses[n]}},sortedAllStatuses:function(){return Object.keys(this.allCallbacksStatus).slice().sort(this.sortStatuses)},sortedPanels:function(){var t=this;return Object.values(this.panels).sort((function(n,r){var e=t.layout.indexOf(n.id),a=t.layout.indexOf(r.id);return-1===e||-1===a?a-e||n.id-r.id:e-a||n.id-r.id}))},sortedRegisteredStatus:function(){return this.registeredStatus.slice().sort(this.sortStatuses)}},watch:{callbacks:function(){this.rerenderPanels()},callbacksStatus:function(){for(var t in this.callbacksStatus){var n=this.$refs["status-"+t];this.statuses[t]&&this.statuses[t].mounted||(n?(this.callbacksStatus[t](n[0]),a.ZP.set(this.statuses,t,{mounted:!0})):console.error("Failed to register panel in the frontend as no backend data was provided for "+t))}}},mounted:function(){var t=this;this.updateSkipLink(),window.addEventListener("scroll",this.handleScroll),setInterval((function(){t.timer=new Date}),3e4),this.firstRun&&window.addEventListener("scroll",this.disableFirstrunHint)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{register:function(t,n){a.ZP.set(this.callbacks,t,n)},registerStatus:function(t,n){var r=this;a.ZP.set(this.allCallbacksStatus,t,n),this.isStatusActive(t)&&(this.registeredStatus.push(t),this.$nextTick((function(){a.ZP.set(r.callbacksStatus,t,n)})))},rerenderPanels:function(){for(var t in this.callbacks){var n=this.$refs[t];-1!==this.layout.indexOf(t)&&(this.panels[t]&&this.panels[t].mounted||(n?(this.callbacks[t](n[0],{widget:this.panels[t]}),a.ZP.set(this.panels[t],"mounted",!0)):console.error("Failed to register panel in the frontend as no backend data was provided for "+t)))}},saveLayout:function(){d.default.post((0,i.generateUrl)("/apps/dashboard/layout"),{layout:this.layout.join(",")})},saveStatuses:function(){d.default.post((0,i.generateUrl)("/apps/dashboard/statuses"),{statuses:JSON.stringify(this.enabledStatuses)})},showModal:function(){this.modal=!0,this.firstRun=!1},closeModal:function(){this.modal=!1},updateCheckbox:function(t,n){var r=this,e=this.layout.indexOf(t.id);!n&&e>-1?this.layout.splice(e,1):this.layout.push(t.id),a.ZP.set(this.panels[t.id],"mounted",!1),this.saveLayout(),this.$nextTick((function(){return r.rerenderPanels()}))},disableFirstrunHint:function(){var t=this;window.removeEventListener("scroll",this.disableFirstrunHint),setTimeout((function(){t.firstRun=!1}),1e3)},updateSkipLink:function(){document.getElementsByClassName("skip-navigation")[0].setAttribute("href","#app-dashboard")},updateStatusCheckbox:function(t,n){n?this.enableStatus(t):this.disableStatus(t)},enableStatus:function(t){this.enabledStatuses[t]=!0,this.registerStatus(t,this.allCallbacksStatus[t]),this.saveStatuses()},disableStatus:function(t){var n=this;this.enabledStatuses[t]=!1;var r=this.registeredStatus.findIndex((function(n){return n===t}));-1!==r&&(this.registeredStatus.splice(r,1),a.ZP.set(this.statuses,t,{mounted:!1}),this.$nextTick((function(){a.ZP.delete(n.callbacksStatus,t)}))),this.saveStatuses()},sortStatuses:function(t,n){var r=t.toLowerCase(),e=n.toLowerCase();return r>e?1:r<e?-1:0},handleScroll:function(){window.scrollY>70?document.body.classList.add("dashboard--scrolled"):document.body.classList.remove("dashboard--scrolled")}}},k=e(93379),w=e.n(k),y=e(7795),_=e.n(y),S=e(90569),B=e.n(S),D=e(3565),O=e.n(D),N=e(19216),P=e.n(N),E=e(44589),T=e.n(E),F=e(9715),G={};G.styleTagTransform=T(),G.setAttributes=O(),G.insert=B().bind(null,"head"),G.domAPI=_(),G.insertStyleElement=P(),w()(F.Z,G),F.Z&&F.Z.locals&&F.Z.locals;var z=e(73729),M={};M.styleTagTransform=T(),M.setAttributes=O(),M.insert=B().bind(null,"head"),M.domAPI=_(),M.insertStyleElement=P(),w()(z.Z,M),z.Z&&z.Z.locals&&z.Z.locals;var j=(0,e(51900).Z)(x,o,[],!1,null,"37a61812",null);j.options.__file="apps/dashboard/src/DashboardApp.vue";var L=j.exports,I=e(9944),U=e(15168),R=e.n(U);e.nc=btoa((0,s.getRequestToken)()),a.ZP.directive("Tooltip",R()),a.ZP.prototype.t=I.translate,window.OCA.Files||(window.OCA.Files={}),Object.assign(window.OCA.Files,{App:{fileList:{filesClient:OC.Files.getClient()}}},window.OCA.Files);var W=new(a.ZP.extend(L))({}).$mount("#app-content-vue");window.OCA.Dashboard={register:function(t,n){return W.register(t,n)},registerStatus:function(t,n){return W.registerStatus(t,n)}}},9715:function(t,n,r){var e=r(87537),a=r.n(e),o=r(23645),i=r.n(o)()(a());i.push([t.id,"#app-dashboard[data-v-37a61812]{width:100%;min-height:100%;background-size:cover;background-position:center center;background-repeat:no-repeat;background-attachment:fixed}#app-dashboard>h2[data-v-37a61812]{color:var(--color-primary-text);text-align:center;font-size:32px;line-height:130%;padding:1rem 0}.panels[data-v-37a61812]{width:auto;margin:auto;max-width:1800px;display:flex;justify-content:center;flex-direction:row;align-items:flex-start;flex-wrap:wrap}.panel[data-v-37a61812],.panels>div[data-v-37a61812]{width:320px;max-width:100%;margin:16px;background-color:var(--color-main-background-blur);-webkit-backdrop-filter:var(--filter-background-blur);backdrop-filter:var(--filter-background-blur);border-radius:var(--border-radius-large)}#body-user.theme--highcontrast .panel[data-v-37a61812],#body-user.theme--highcontrast .panels>div[data-v-37a61812]{border:2px solid var(--color-border)}.panel.sortable-ghost[data-v-37a61812],.panels>div.sortable-ghost[data-v-37a61812]{opacity:.1}.panel>.panel--header[data-v-37a61812],.panels>div>.panel--header[data-v-37a61812]{display:flex;z-index:1;top:50px;padding:16px;cursor:grab}.panel>.panel--header[data-v-37a61812],.panel>.panel--header[data-v-37a61812]  *,.panels>div>.panel--header[data-v-37a61812],.panels>div>.panel--header[data-v-37a61812]  *{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.panel>.panel--header[data-v-37a61812]:active,.panels>div>.panel--header[data-v-37a61812]:active{cursor:grabbing}.panel>.panel--header a[data-v-37a61812],.panels>div>.panel--header a[data-v-37a61812]{flex-grow:1}.panel>.panel--header>h2[data-v-37a61812],.panels>div>.panel--header>h2[data-v-37a61812]{display:block;align-items:center;flex-grow:1;margin:0;font-size:20px;line-height:24px;font-weight:bold;padding:16px 8px;height:56px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:grab}.panel>.panel--header>h2 div[data-v-37a61812],.panels>div>.panel--header>h2 div[data-v-37a61812]{background-size:32px;width:32px;height:32px;margin-right:16px;background-position:center;float:left}.panel>.panel--content[data-v-37a61812],.panels>div>.panel--content[data-v-37a61812]{margin:0 16px 16px 16px;height:424px;overflow:visible}@media only screen and (max-width: 709px){.panel>.panel--content[data-v-37a61812],.panels>div>.panel--content[data-v-37a61812]{height:auto}}.footer[data-v-37a61812]{display:flex;justify-content:center;transition:bottom var(--animation-slow) ease-in-out;padding:1rem 0}.edit-panels[data-v-37a61812]{display:inline-block;margin:auto;background-position:16px center;padding:12px 16px;padding-left:36px;border-radius:var(--border-radius-pill);max-width:200px;opacity:1;text-align:center}.button[data-v-37a61812],.button-vue[data-v-37a61812],.edit-panels[data-v-37a61812],.statuses[data-v-37a61812]  .action-item .action-item__menutoggle,.statuses[data-v-37a61812]  .action-item.action-item--open .action-item__menutoggle{background-color:var(--color-main-background-blur);-webkit-backdrop-filter:var(--filter-background-blur);backdrop-filter:var(--filter-background-blur);opacity:1 !important}.button[data-v-37a61812]:hover,.button[data-v-37a61812]:focus,.button[data-v-37a61812]:active,.button-vue[data-v-37a61812]:hover,.button-vue[data-v-37a61812]:focus,.button-vue[data-v-37a61812]:active,.edit-panels[data-v-37a61812]:hover,.edit-panels[data-v-37a61812]:focus,.edit-panels[data-v-37a61812]:active,.statuses[data-v-37a61812]  .action-item .action-item__menutoggle:hover,.statuses[data-v-37a61812]  .action-item .action-item__menutoggle:focus,.statuses[data-v-37a61812]  .action-item .action-item__menutoggle:active,.statuses[data-v-37a61812]  .action-item.action-item--open .action-item__menutoggle:hover,.statuses[data-v-37a61812]  .action-item.action-item--open .action-item__menutoggle:focus,.statuses[data-v-37a61812]  .action-item.action-item--open .action-item__menutoggle:active{background-color:var(--color-background-hover) !important}.button[data-v-37a61812]:focus-visible,.button-vue[data-v-37a61812]:focus-visible,.edit-panels[data-v-37a61812]:focus-visible,.statuses[data-v-37a61812]  .action-item .action-item__menutoggle:focus-visible,.statuses[data-v-37a61812]  .action-item.action-item--open .action-item__menutoggle:focus-visible{box-shadow:0 0 0 2px var(--color-main-text) !important}.modal__content[data-v-37a61812]{padding:32px 16px;text-align:center}.modal__content ol[data-v-37a61812]{display:flex;flex-direction:row;justify-content:center;list-style-type:none;padding-bottom:16px}.modal__content li label[data-v-37a61812]{position:relative;display:block;padding:48px 16px 14px 16px;margin:8px;width:140px;background-color:var(--color-background-hover);border:2px solid var(--color-main-background);border-radius:var(--border-radius-large);text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.modal__content li label div[data-v-37a61812]{position:absolute;top:16px;width:24px;height:24px;background-size:24px}.modal__content li label[data-v-37a61812]:hover{border-color:var(--color-primary)}.modal__content li:not(.panel-status) label div[data-v-37a61812]{filter:var(--background-invert-if-dark)}.modal__content li input[type=checkbox].checkbox+label[data-v-37a61812]:before{position:absolute;right:12px;top:16px}.modal__content li input:focus+label[data-v-37a61812]{border-color:var(--color-primary)}.modal__content h3[data-v-37a61812]{font-weight:bold}.modal__content h3[data-v-37a61812]:not(:first-of-type){margin-top:64px}.modal__content .button[data-v-37a61812]{display:inline-block;padding:10px 16px;margin:0}.modal__content p[data-v-37a61812]{max-width:650px;margin:0 auto}.modal__content p a[data-v-37a61812]:hover,.modal__content p a[data-v-37a61812]:focus{border-bottom:2px solid var(--color-border)}.modal__content .credits--end[data-v-37a61812]{padding-bottom:32px;color:var(--color-text-maxcontrast)}.modal__content .credits--end a[data-v-37a61812]{color:var(--color-text-maxcontrast)}.flip-list-move[data-v-37a61812]{transition:transform var(--animation-slow)}.statuses[data-v-37a61812]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;margin-bottom:36px}.statuses>div[data-v-37a61812]{margin:8px}","",{version:3,sources:["webpack://./apps/dashboard/src/DashboardApp.vue"],names:[],mappings:"AAuXA,gCACC,UAAA,CACA,eAAA,CACA,qBAAA,CACA,iCAAA,CACA,2BAAA,CACA,2BAAA,CAEA,mCACC,+BAAA,CACA,iBAAA,CACA,cAAA,CACA,gBAAA,CACA,cAAA,CAIF,yBACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CAGD,qDACC,WAAA,CACA,cAAA,CACA,WAAA,CACA,kDAAA,CACA,qDAAA,CACA,6CAAA,CACA,wCAAA,CAEA,mHACC,oCAAA,CAGD,mFACE,UAAA,CAGF,mFACC,YAAA,CACA,SAAA,CACA,QAAA,CACA,YAAA,CACA,WAAA,CAEA,4KACC,0BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGD,iGACC,eAAA,CAGD,uFACC,WAAA,CAGD,yFACC,aAAA,CACA,kBAAA,CACA,WAAA,CACA,QAAA,CACA,cAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,WAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,WAAA,CACA,iGACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,0BAAA,CACA,UAAA,CAKH,qFACC,uBAAA,CACA,YAAA,CAEA,gBAAA,CAID,0CACC,qFACC,WAAA,CAAA,CAKH,yBACC,YAAA,CACA,sBAAA,CACA,mDAAA,CACA,cAAA,CAGD,8BACC,oBAAA,CACA,WAAA,CACA,+BAAA,CACA,iBAAA,CACA,iBAAA,CACA,uCAAA,CACA,eAAA,CACA,SAAA,CACA,iBAAA,CAGD,0OAKC,kDAAA,CACA,qDAAA,CACA,6CAAA,CACA,oBAAA,CAEA,6xBAGC,yDAAA,CAED,gTACC,sDAAA,CAIF,iCACC,iBAAA,CACA,iBAAA,CAEA,oCACC,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,oBAAA,CACA,mBAAA,CAGA,0CACC,iBAAA,CACA,aAAA,CACA,2BAAA,CACA,UAAA,CACA,WAAA,CACA,8CAAA,CACA,6CAAA,CACA,wCAAA,CACA,eAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAEA,8CACC,iBAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CACA,oBAAA,CAGD,gDACC,iCAAA,CAKF,iEACC,uCAAA,CAGD,+EACC,iBAAA,CACA,UAAA,CACA,QAAA,CAGD,sDACC,iCAAA,CAIF,oCACC,gBAAA,CAEA,wDACC,eAAA,CAKF,yCACC,oBAAA,CACA,iBAAA,CACA,QAAA,CAGD,mCACC,eAAA,CACA,aAAA,CAEA,sFAEC,2CAAA,CAIF,+CACC,mBAAA,CACA,mCAAA,CAEA,iDACC,mCAAA,CAKH,iCACC,0CAAA,CAGD,2BACC,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CACA,kBAAA,CAEA,+BACC,UAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#app-dashboard {\r\n\twidth: 100%;\r\n\tmin-height: 100%;\r\n\tbackground-size: cover;\r\n\tbackground-position: center center;\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-attachment: fixed;\r\n\r\n\t> h2 {\r\n\t\tcolor: var(--color-primary-text);\r\n\t\ttext-align: center;\r\n\t\tfont-size: 32px;\r\n\t\tline-height: 130%;\r\n\t\tpadding: 1rem 0;\r\n\t}\r\n}\r\n\r\n.panels {\r\n\twidth: auto;\r\n\tmargin: auto;\r\n\tmax-width: 1800px;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tflex-direction: row;\r\n\talign-items: flex-start;\r\n\tflex-wrap: wrap;\r\n}\r\n\r\n.panel, .panels > div {\r\n\twidth: 320px;\r\n\tmax-width: 100%;\r\n\tmargin: 16px;\r\n\tbackground-color: var(--color-main-background-blur);\r\n\t-webkit-backdrop-filter: var(--filter-background-blur);\r\n\tbackdrop-filter: var(--filter-background-blur);\r\n\tborder-radius: var(--border-radius-large);\r\n\r\n\t#body-user.theme--highcontrast & {\r\n\t\tborder: 2px solid var(--color-border);\r\n\t}\r\n\r\n\t&.sortable-ghost {\r\n\t\t opacity: 0.1;\r\n\t}\r\n\r\n\t& > .panel--header {\r\n\t\tdisplay: flex;\r\n\t\tz-index: 1;\r\n\t\ttop: 50px;\r\n\t\tpadding: 16px;\r\n\t\tcursor: grab;\r\n\r\n\t\t&, ::v-deep * {\r\n\t\t\t-webkit-touch-callout: none;\r\n\t\t\t-webkit-user-select: none;\r\n\t\t\t-khtml-user-select: none;\r\n\t\t\t-moz-user-select: none;\r\n\t\t\t-ms-user-select: none;\r\n\t\t\tuser-select: none;\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\tcursor: grabbing;\r\n\t\t}\r\n\r\n\t\ta {\r\n\t\t\tflex-grow: 1;\r\n\t\t}\r\n\r\n\t\t> h2 {\r\n\t\t\tdisplay: block;\r\n\t\t\talign-items: center;\r\n\t\t\tflex-grow: 1;\r\n\t\t\tmargin: 0;\r\n\t\t\tfont-size: 20px;\r\n\t\t\tline-height: 24px;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tpadding: 16px 8px;\r\n\t\t\theight: 56px;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\tcursor: grab;\r\n\t\t\tdiv {\r\n\t\t\t\tbackground-size: 32px;\r\n\t\t\t\twidth: 32px;\r\n\t\t\t\theight: 32px;\r\n\t\t\t\tmargin-right: 16px;\r\n\t\t\t\tbackground-position: center;\r\n\t\t\t\tfloat: left;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& > .panel--content {\r\n\t\tmargin: 0 16px 16px 16px;\r\n\t\theight: 424px;\r\n\t\t// We specifically do not want scrollbars inside widgets\r\n\t\toverflow: visible;\r\n\t}\r\n\r\n\t// No need to extend height of widgets if only one column is shown\r\n\t@media only screen and (max-width: 709px) {\r\n\t\t& > .panel--content {\r\n\t\t\theight: auto;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.footer {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\ttransition: bottom var(--animation-slow) ease-in-out;\r\n\tpadding: 1rem 0;\r\n}\r\n\r\n.edit-panels {\r\n\tdisplay: inline-block;\r\n\tmargin:auto;\r\n\tbackground-position: 16px center;\r\n\tpadding: 12px 16px;\r\n\tpadding-left: 36px;\r\n\tborder-radius: var(--border-radius-pill);\r\n\tmax-width: 200px;\r\n\topacity: 1;\r\n\ttext-align: center;\r\n}\r\n\r\n.button,\r\n.button-vue,\r\n.edit-panels,\r\n.statuses ::v-deep .action-item .action-item__menutoggle,\r\n.statuses ::v-deep .action-item.action-item--open .action-item__menutoggle {\r\n\tbackground-color: var(--color-main-background-blur);\r\n\t-webkit-backdrop-filter: var(--filter-background-blur);\r\n\tbackdrop-filter: var(--filter-background-blur);\r\n\topacity: 1 !important;\r\n\r\n\t&:hover,\r\n\t&:focus,\r\n\t&:active {\r\n\t\tbackground-color: var(--color-background-hover)!important;\r\n\t}\r\n\t&:focus-visible {\r\n\t\tbox-shadow: 0 0 0 2px var(--color-main-text) !important;\r\n\t}\r\n}\r\n\r\n.modal__content {\r\n\tpadding: 32px 16px;\r\n\ttext-align: center;\r\n\r\n\tol {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\tlist-style-type: none;\r\n\t\tpadding-bottom: 16px;\r\n\t}\r\n\tli {\r\n\t\tlabel {\r\n\t\t\tposition: relative;\r\n\t\t\tdisplay: block;\r\n\t\t\tpadding: 48px 16px 14px 16px;\r\n\t\t\tmargin: 8px;\r\n\t\t\twidth: 140px;\r\n\t\t\tbackground-color: var(--color-background-hover);\r\n\t\t\tborder: 2px solid var(--color-main-background);\r\n\t\t\tborder-radius: var(--border-radius-large);\r\n\t\t\ttext-align: left;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\twhite-space: nowrap;\r\n\r\n\t\t\tdiv {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 16px;\r\n\t\t\t\twidth: 24px;\r\n\t\t\t\theight: 24px;\r\n\t\t\t\tbackground-size: 24px;\r\n\t\t\t}\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tborder-color: var(--color-primary);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Do not invert status icons\r\n\t\t&:not(.panel-status) label div {\r\n\t\t\tfilter: var(--background-invert-if-dark);\r\n\t\t}\r\n\r\n\t\tinput[type='checkbox'].checkbox + label:before {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 12px;\r\n\t\t\ttop: 16px;\r\n\t\t}\r\n\r\n\t\tinput:focus + label {\r\n\t\t\tborder-color: var(--color-primary);\r\n\t\t}\r\n\t}\r\n\r\n\th3 {\r\n\t\tfont-weight: bold;\r\n\r\n\t\t&:not(:first-of-type) {\r\n\t\t\tmargin-top: 64px;\r\n\t\t}\r\n\t}\r\n\r\n\t// Adjust design of 'Get more widgets' button\r\n\t.button {\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 10px 16px;\r\n\t\tmargin: 0;\r\n\t}\r\n\r\n\tp {\r\n\t\tmax-width: 650px;\r\n\t\tmargin: 0 auto;\r\n\r\n\t\ta:hover,\r\n\t\ta:focus {\r\n\t\t\tborder-bottom: 2px solid var(--color-border);\r\n\t\t}\r\n\t}\r\n\r\n\t.credits--end {\r\n\t\tpadding-bottom: 32px;\r\n\t\tcolor: var(--color-text-maxcontrast);\r\n\r\n\t\ta {\r\n\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.flip-list-move {\r\n\ttransition: transform var(--animation-slow);\r\n}\r\n\r\n.statuses {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\tflex-wrap: wrap;\r\n\tmargin-bottom: 36px;\r\n\r\n\t& > div {\r\n\t\tmargin: 8px;\r\n\t}\r\n}\r\n"],sourceRoot:""}]),n.Z=i},73729:function(t,n,r){var e=r(87537),a=r.n(e),o=r(23645),i=r.n(o)()(a());i.push([t.id,"\nhtml, body {\r\n\tbackground-attachment: fixed;\n}\n#body-user #header {\r\n\tposition: fixed;\n}\n#content {\r\n\toverflow: auto;\n}\r\n","",{version:3,sources:["webpack://./apps/dashboard/src/DashboardApp.vue"],names:[],mappings:";AAsnBA;CACA,4BAAA;AACA;AAEA;CACA,eAAA;AACA;AAEA;CACA,cAAA;AACA",sourcesContent:["<template>\r\n\t<div id=\"app-dashboard\">\r\n\t\t<h2>{{ greeting.text }}</h2>\r\n\t\t<ul class=\"statuses\">\r\n\t\t\t<div v-for=\"status in sortedRegisteredStatus\"\r\n\t\t\t\t:id=\"'status-' + status\"\r\n\t\t\t\t:key=\"status\">\r\n\t\t\t\t<div :ref=\"'status-' + status\" />\r\n\t\t\t</div>\r\n\t\t</ul>\r\n\r\n\t\t<Draggable v-model=\"layout\"\r\n\t\t\tclass=\"panels\"\r\n\t\t\tv-bind=\"{swapThreshold: 0.30, delay: 500, delayOnTouchOnly: true, touchStartThreshold: 3}\"\r\n\t\t\thandle=\".panel--header\"\r\n\t\t\t@end=\"saveLayout\">\r\n\t\t\t<div v-for=\"panelId in layout\" :key=\"panels[panelId].id\" class=\"panel\">\r\n\t\t\t\t<div class=\"panel--header\">\r\n\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t<div :class=\"panels[panelId].iconClass\" role=\"img\" />\r\n\t\t\t\t\t\t{{ panels[panelId].title }}\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"panel--content\" :class=\"{ loading: !panels[panelId].mounted }\">\r\n\t\t\t\t\t<div :ref=\"panels[panelId].id\" :data-id=\"panels[panelId].id\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Draggable>\r\n\r\n\t\t<div class=\"footer\">\r\n\t\t\t<NcButton @click=\"showModal\">\r\n\t\t\t\t<template #icon>\r\n\t\t\t\t\t<Pencil :size=\"20\" />\r\n\t\t\t\t</template>\r\n\t\t\t\t{{ t('dashboard', 'Customize') }}\r\n\t\t\t</NcButton>\r\n\t\t</div>\r\n\r\n\t\t<NcModal v-if=\"modal\" size=\"large\" @close=\"closeModal\">\r\n\t\t\t<div class=\"modal__content\">\r\n\t\t\t\t<h3>{{ t('dashboard', 'Edit widgets') }}</h3>\r\n\t\t\t\t<ol class=\"panels\">\r\n\t\t\t\t\t<li v-for=\"status in sortedAllStatuses\" :key=\"status\" :class=\"'panel-' + status\">\r\n\t\t\t\t\t\t<input :id=\"'status-checkbox-' + status\"\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tclass=\"checkbox\"\r\n\t\t\t\t\t\t\t:checked=\"isStatusActive(status)\"\r\n\t\t\t\t\t\t\t@input=\"updateStatusCheckbox(status, $event.target.checked)\">\r\n\t\t\t\t\t\t<label :for=\"'status-checkbox-' + status\">\r\n\t\t\t\t\t\t\t<div :class=\"statusInfo[status].icon\" role=\"img\" />\r\n\t\t\t\t\t\t\t{{ statusInfo[status].text }}\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ol>\r\n\t\t\t\t<Draggable v-model=\"layout\"\r\n\t\t\t\t\tclass=\"panels\"\r\n\t\t\t\t\ttag=\"ol\"\r\n\t\t\t\t\tv-bind=\"{swapThreshold: 0.30, delay: 500, delayOnTouchOnly: true, touchStartThreshold: 3}\"\r\n\t\t\t\t\thandle=\".draggable\"\r\n\t\t\t\t\t@end=\"saveLayout\">\r\n\t\t\t\t\t<li v-for=\"panel in sortedPanels\" :key=\"panel.id\" :class=\"'panel-' + panel.id\">\r\n\t\t\t\t\t\t<input :id=\"'panel-checkbox-' + panel.id\"\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tclass=\"checkbox\"\r\n\t\t\t\t\t\t\t:checked=\"isActive(panel)\"\r\n\t\t\t\t\t\t\t@input=\"updateCheckbox(panel, $event.target.checked)\">\r\n\t\t\t\t\t\t<label :for=\"'panel-checkbox-' + panel.id\" :class=\"{ draggable: isActive(panel) }\">\r\n\t\t\t\t\t\t\t<div :class=\"panel.iconClass\" role=\"img\" />\r\n\t\t\t\t\t\t\t{{ panel.title }}\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</Draggable>\r\n\r\n\t\t\t\t<a v-if=\"isAdmin\" :href=\"appStoreUrl\" class=\"button\">{{ t('dashboard', 'Get more widgets from the App Store') }}</a>\r\n\r\n\t\t\t\t<h3>{{ t('dashboard', 'Weather service') }}</h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{{ t('dashboard', 'For your privacy, the weather data is requested by your xD Drive server on your behalf so the weather service receives no personal information.') }}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class=\"credits--end\">\r\n\t\t\t\t\t<a href=\"https://api.met.no/doc/TermsOfService\" target=\"_blank\" rel=\"noopener\">{{ t('dashboard', 'Weather data from Met.no') }}</a>,\r\n\t\t\t\t\t<a href=\"https://wiki.osmfoundation.org/wiki/Privacy_Policy\" target=\"_blank\" rel=\"noopener\">{{ t('dashboard', 'geocoding with Nominatim') }}</a>,\r\n\t\t\t\t\t<a href=\"https://www.opentopodata.org/#public-api\" target=\"_blank\" rel=\"noopener\">{{ t('dashboard', 'elevation data from OpenTopoData') }}</a>.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</NcModal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { generateUrl } from '@nextcloud/router'\r\nimport { getCurrentUser } from '@nextcloud/auth'\r\nimport { loadState } from '@nextcloud/initial-state'\r\nimport axios from '@nextcloud/axios'\r\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton'\r\nimport Draggable from 'vuedraggable'\r\nimport NcModal from '@nextcloud/vue/dist/Components/NcModal'\r\nimport Pencil from 'vue-material-design-icons/Pencil.vue'\r\nimport Vue from 'vue'\r\n\r\nimport isMobile from './mixins/isMobile.js'\r\n\r\nconst panels = loadState('dashboard', 'panels')\r\nconst firstRun = loadState('dashboard', 'firstRun')\r\n\r\nconst statusInfo = {\r\n\tweather: {\r\n\t\ttext: t('dashboard', 'Weather'),\r\n\t\ticon: 'icon-weather-status',\r\n\t},\r\n\tstatus: {\r\n\t\ttext: t('dashboard', 'Status'),\r\n\t\ticon: 'icon-user-status-online',\r\n\t},\r\n}\r\n\r\nexport default {\r\n\tname: 'DashboardApp',\r\n\tcomponents: {\r\n\t\tNcButton,\r\n\t\tDraggable,\r\n\t\tNcModal,\r\n\t\tPencil,\r\n\t},\r\n\tmixins: [\r\n\t\tisMobile,\r\n\t],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisAdmin: getCurrentUser().isAdmin,\r\n\t\t\ttimer: new Date(),\r\n\t\t\tregisteredStatus: [],\r\n\t\t\tcallbacks: {},\r\n\t\t\tcallbacksStatus: {},\r\n\t\t\tallCallbacksStatus: {},\r\n\t\t\tstatusInfo,\r\n\t\t\tenabledStatuses: loadState('dashboard', 'statuses'),\r\n\t\t\tpanels,\r\n\t\t\tfirstRun,\r\n\t\t\tdisplayName: getCurrentUser()?.displayName,\r\n\t\t\tuid: getCurrentUser()?.uid,\r\n\t\t\tlayout: loadState('dashboard', 'layout').filter((panelId) => panels[panelId]),\r\n\t\t\tmodal: false,\r\n\t\t\tappStoreUrl: generateUrl('/settings/apps/dashboard'),\r\n\t\t\tstatuses: {},\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tgreeting() {\r\n\t\t\tconst time = this.timer.getHours()\r\n\r\n\t\t\t// Determine part of the day\r\n\t\t\tlet partOfDay\r\n\t\t\tif (time >= 22 || time < 5) {\r\n\t\t\t\tpartOfDay = 'night'\r\n\t\t\t} else if (time >= 18) {\r\n\t\t\t\tpartOfDay = 'evening'\r\n\t\t\t} else if (time >= 12) {\r\n\t\t\t\tpartOfDay = 'afternoon'\r\n\t\t\t} else {\r\n\t\t\t\tpartOfDay = 'morning'\r\n\t\t\t}\r\n\r\n\t\t\t// Define the greetings\r\n\t\t\tconst good = {\r\n\t\t\t\tmorning: {\r\n\t\t\t\t\tgeneric: t('dashboard', 'Good morning'),\r\n\t\t\t\t\twithName: t('dashboard', 'Good morning, {name}', { name: this.displayName }, undefined, { escape: false }),\r\n\t\t\t\t},\r\n\t\t\t\tafternoon: {\r\n\t\t\t\t\tgeneric: t('dashboard', 'Good afternoon'),\r\n\t\t\t\t\twithName: t('dashboard', 'Good afternoon, {name}', { name: this.displayName }, undefined, { escape: false }),\r\n\t\t\t\t},\r\n\t\t\t\tevening: {\r\n\t\t\t\t\tgeneric: t('dashboard', 'Good evening'),\r\n\t\t\t\t\twithName: t('dashboard', 'Good evening, {name}', { name: this.displayName }, undefined, { escape: false }),\r\n\t\t\t\t},\r\n\t\t\t\tnight: {\r\n\t\t\t\t\t// Don't use \"Good night\" as it's not a greeting\r\n\t\t\t\t\tgeneric: t('dashboard', 'Hello'),\r\n\t\t\t\t\twithName: t('dashboard', 'Hello, {name}', { name: this.displayName }, undefined, { escape: false }),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\t\t// Figure out which greeting to show\r\n\t\t\tconst shouldShowName = this.displayName && this.uid !== this.displayName\r\n\t\t\treturn { text: shouldShowName ? good[partOfDay].withName : good[partOfDay].generic }\r\n\t\t},\r\n\r\n\t\tisActive() {\r\n\t\t\treturn (panel) => this.layout.indexOf(panel.id) > -1\r\n\t\t},\r\n\t\tisStatusActive() {\r\n\t\t\treturn (status) => !(status in this.enabledStatuses) || this.enabledStatuses[status]\r\n\t\t},\r\n\r\n\t\tsortedAllStatuses() {\r\n\t\t\treturn Object.keys(this.allCallbacksStatus).slice().sort(this.sortStatuses)\r\n\t\t},\r\n\t\tsortedPanels() {\r\n\t\t\treturn Object.values(this.panels).sort((a, b) => {\r\n\t\t\t\tconst indexA = this.layout.indexOf(a.id)\r\n\t\t\t\tconst indexB = this.layout.indexOf(b.id)\r\n\t\t\t\tif (indexA === -1 || indexB === -1) {\r\n\t\t\t\t\treturn indexB - indexA || a.id - b.id\r\n\t\t\t\t}\r\n\t\t\t\treturn indexA - indexB || a.id - b.id\r\n\t\t\t})\r\n\t\t},\r\n\t\tsortedRegisteredStatus() {\r\n\t\t\treturn this.registeredStatus.slice().sort(this.sortStatuses)\r\n\t\t},\r\n\t},\r\n\r\n\twatch: {\r\n\t\tcallbacks() {\r\n\t\t\tthis.rerenderPanels()\r\n\t\t},\r\n\t\tcallbacksStatus() {\r\n\t\t\tfor (const app in this.callbacksStatus) {\r\n\t\t\t\tconst element = this.$refs['status-' + app]\r\n\t\t\t\tif (this.statuses[app] && this.statuses[app].mounted) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\tthis.callbacksStatus[app](element[0])\r\n\t\t\t\t\tVue.set(this.statuses, app, { mounted: true })\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error('Failed to register panel in the frontend as no backend data was provided for ' + app)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.updateSkipLink()\r\n\t\twindow.addEventListener('scroll', this.handleScroll)\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\tthis.timer = new Date()\r\n\t\t}, 30000)\r\n\r\n\t\tif (this.firstRun) {\r\n\t\t\twindow.addEventListener('scroll', this.disableFirstrunHint)\r\n\t\t}\r\n\t},\r\n\tdestroyed() {\r\n\t\twindow.removeEventListener('scroll', this.handleScroll)\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * Method to register panels that will be called by the integrating apps\r\n\t\t *\r\n\t\t * @param {string} app The unique app id for the widget\r\n\t\t * @param {Function} callback The callback function to register a panel which gets the DOM element passed as parameter\r\n\t\t */\r\n\t\tregister(app, callback) {\r\n\t\t\tVue.set(this.callbacks, app, callback)\r\n\t\t},\r\n\t\tregisterStatus(app, callback) {\r\n\t\t\t// always save callbacks in case user enables the status later\r\n\t\t\tVue.set(this.allCallbacksStatus, app, callback)\r\n\t\t\t// register only if status is enabled or missing from config\r\n\t\t\tif (this.isStatusActive(app)) {\r\n\t\t\t\tthis.registeredStatus.push(app)\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tVue.set(this.callbacksStatus, app, callback)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\trerenderPanels() {\r\n\t\t\tfor (const app in this.callbacks) {\r\n\t\t\t\tconst element = this.$refs[app]\r\n\t\t\t\tif (this.layout.indexOf(app) === -1) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tif (this.panels[app] && this.panels[app].mounted) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\tthis.callbacks[app](element[0], {\r\n\t\t\t\t\t\twidget: this.panels[app],\r\n\t\t\t\t\t})\r\n\t\t\t\t\tVue.set(this.panels[app], 'mounted', true)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error('Failed to register panel in the frontend as no backend data was provided for ' + app)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsaveLayout() {\r\n\t\t\taxios.post(generateUrl('/apps/dashboard/layout'), {\r\n\t\t\t\tlayout: this.layout.join(','),\r\n\t\t\t})\r\n\t\t},\r\n\t\tsaveStatuses() {\r\n\t\t\taxios.post(generateUrl('/apps/dashboard/statuses'), {\r\n\t\t\t\tstatuses: JSON.stringify(this.enabledStatuses),\r\n\t\t\t})\r\n\t\t},\r\n\t\tshowModal() {\r\n\t\t\tthis.modal = true\r\n\t\t\tthis.firstRun = false\r\n\t\t},\r\n\t\tcloseModal() {\r\n\t\t\tthis.modal = false\r\n\t\t},\r\n\t\tupdateCheckbox(panel, currentValue) {\r\n\t\t\tconst index = this.layout.indexOf(panel.id)\r\n\t\t\tif (!currentValue && index > -1) {\r\n\t\t\t\tthis.layout.splice(index, 1)\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.layout.push(panel.id)\r\n\t\t\t}\r\n\t\t\tVue.set(this.panels[panel.id], 'mounted', false)\r\n\t\t\tthis.saveLayout()\r\n\t\t\tthis.$nextTick(() => this.rerenderPanels())\r\n\t\t},\r\n\t\tdisableFirstrunHint() {\r\n\t\t\twindow.removeEventListener('scroll', this.disableFirstrunHint)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.firstRun = false\r\n\t\t\t}, 1000)\r\n\t\t},\r\n\t\tupdateSkipLink() {\r\n\t\t\t// Make sure \"Skip to main content\" link points to the app content\r\n\t\t\tdocument.getElementsByClassName('skip-navigation')[0].setAttribute('href', '#app-dashboard')\r\n\t\t},\r\n\t\tupdateStatusCheckbox(app, checked) {\r\n\t\t\tif (checked) {\r\n\t\t\t\tthis.enableStatus(app)\r\n\t\t\t} else {\r\n\t\t\t\tthis.disableStatus(app)\r\n\t\t\t}\r\n\t\t},\r\n\t\tenableStatus(app) {\r\n\t\t\tthis.enabledStatuses[app] = true\r\n\t\t\tthis.registerStatus(app, this.allCallbacksStatus[app])\r\n\t\t\tthis.saveStatuses()\r\n\t\t},\r\n\t\tdisableStatus(app) {\r\n\t\t\tthis.enabledStatuses[app] = false\r\n\t\t\tconst i = this.registeredStatus.findIndex((s) => s === app)\r\n\t\t\tif (i !== -1) {\r\n\t\t\t\tthis.registeredStatus.splice(i, 1)\r\n\t\t\t\tVue.set(this.statuses, app, { mounted: false })\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tVue.delete(this.callbacksStatus, app)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.saveStatuses()\r\n\t\t},\r\n\t\tsortStatuses(a, b) {\r\n\t\t\tconst al = a.toLowerCase()\r\n\t\t\tconst bl = b.toLowerCase()\r\n\t\t\treturn al > bl\r\n\t\t\t\t? 1\r\n\t\t\t\t: al < bl\r\n\t\t\t\t\t? -1\r\n\t\t\t\t\t: 0\r\n\t\t},\r\n\t\thandleScroll() {\r\n\t\t\tif (window.scrollY > 70) {\r\n\t\t\t\tdocument.body.classList.add('dashboard--scrolled')\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.classList.remove('dashboard--scrolled')\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\r\n<\/script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#app-dashboard {\r\n\twidth: 100%;\r\n\tmin-height: 100%;\r\n\tbackground-size: cover;\r\n\tbackground-position: center center;\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-attachment: fixed;\r\n\r\n\t> h2 {\r\n\t\tcolor: var(--color-primary-text);\r\n\t\ttext-align: center;\r\n\t\tfont-size: 32px;\r\n\t\tline-height: 130%;\r\n\t\tpadding: 1rem 0;\r\n\t}\r\n}\r\n\r\n.panels {\r\n\twidth: auto;\r\n\tmargin: auto;\r\n\tmax-width: 1800px;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tflex-direction: row;\r\n\talign-items: flex-start;\r\n\tflex-wrap: wrap;\r\n}\r\n\r\n.panel, .panels > div {\r\n\twidth: 320px;\r\n\tmax-width: 100%;\r\n\tmargin: 16px;\r\n\tbackground-color: var(--color-main-background-blur);\r\n\t-webkit-backdrop-filter: var(--filter-background-blur);\r\n\tbackdrop-filter: var(--filter-background-blur);\r\n\tborder-radius: var(--border-radius-large);\r\n\r\n\t#body-user.theme--highcontrast & {\r\n\t\tborder: 2px solid var(--color-border);\r\n\t}\r\n\r\n\t&.sortable-ghost {\r\n\t\t opacity: 0.1;\r\n\t}\r\n\r\n\t& > .panel--header {\r\n\t\tdisplay: flex;\r\n\t\tz-index: 1;\r\n\t\ttop: 50px;\r\n\t\tpadding: 16px;\r\n\t\tcursor: grab;\r\n\r\n\t\t&, ::v-deep * {\r\n\t\t\t-webkit-touch-callout: none;\r\n\t\t\t-webkit-user-select: none;\r\n\t\t\t-khtml-user-select: none;\r\n\t\t\t-moz-user-select: none;\r\n\t\t\t-ms-user-select: none;\r\n\t\t\tuser-select: none;\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\tcursor: grabbing;\r\n\t\t}\r\n\r\n\t\ta {\r\n\t\t\tflex-grow: 1;\r\n\t\t}\r\n\r\n\t\t> h2 {\r\n\t\t\tdisplay: block;\r\n\t\t\talign-items: center;\r\n\t\t\tflex-grow: 1;\r\n\t\t\tmargin: 0;\r\n\t\t\tfont-size: 20px;\r\n\t\t\tline-height: 24px;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tpadding: 16px 8px;\r\n\t\t\theight: 56px;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\tcursor: grab;\r\n\t\t\tdiv {\r\n\t\t\t\tbackground-size: 32px;\r\n\t\t\t\twidth: 32px;\r\n\t\t\t\theight: 32px;\r\n\t\t\t\tmargin-right: 16px;\r\n\t\t\t\tbackground-position: center;\r\n\t\t\t\tfloat: left;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& > .panel--content {\r\n\t\tmargin: 0 16px 16px 16px;\r\n\t\theight: 424px;\r\n\t\t// We specifically do not want scrollbars inside widgets\r\n\t\toverflow: visible;\r\n\t}\r\n\r\n\t// No need to extend height of widgets if only one column is shown\r\n\t@media only screen and (max-width: 709px) {\r\n\t\t& > .panel--content {\r\n\t\t\theight: auto;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.footer {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\ttransition: bottom var(--animation-slow) ease-in-out;\r\n\tpadding: 1rem 0;\r\n}\r\n\r\n.edit-panels {\r\n\tdisplay: inline-block;\r\n\tmargin:auto;\r\n\tbackground-position: 16px center;\r\n\tpadding: 12px 16px;\r\n\tpadding-left: 36px;\r\n\tborder-radius: var(--border-radius-pill);\r\n\tmax-width: 200px;\r\n\topacity: 1;\r\n\ttext-align: center;\r\n}\r\n\r\n.button,\r\n.button-vue,\r\n.edit-panels,\r\n.statuses ::v-deep .action-item .action-item__menutoggle,\r\n.statuses ::v-deep .action-item.action-item--open .action-item__menutoggle {\r\n\tbackground-color: var(--color-main-background-blur);\r\n\t-webkit-backdrop-filter: var(--filter-background-blur);\r\n\tbackdrop-filter: var(--filter-background-blur);\r\n\topacity: 1 !important;\r\n\r\n\t&:hover,\r\n\t&:focus,\r\n\t&:active {\r\n\t\tbackground-color: var(--color-background-hover)!important;\r\n\t}\r\n\t&:focus-visible {\r\n\t\tbox-shadow: 0 0 0 2px var(--color-main-text) !important;\r\n\t}\r\n}\r\n\r\n.modal__content {\r\n\tpadding: 32px 16px;\r\n\ttext-align: center;\r\n\r\n\tol {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\tlist-style-type: none;\r\n\t\tpadding-bottom: 16px;\r\n\t}\r\n\tli {\r\n\t\tlabel {\r\n\t\t\tposition: relative;\r\n\t\t\tdisplay: block;\r\n\t\t\tpadding: 48px 16px 14px 16px;\r\n\t\t\tmargin: 8px;\r\n\t\t\twidth: 140px;\r\n\t\t\tbackground-color: var(--color-background-hover);\r\n\t\t\tborder: 2px solid var(--color-main-background);\r\n\t\t\tborder-radius: var(--border-radius-large);\r\n\t\t\ttext-align: left;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\twhite-space: nowrap;\r\n\r\n\t\t\tdiv {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 16px;\r\n\t\t\t\twidth: 24px;\r\n\t\t\t\theight: 24px;\r\n\t\t\t\tbackground-size: 24px;\r\n\t\t\t}\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tborder-color: var(--color-primary);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Do not invert status icons\r\n\t\t&:not(.panel-status) label div {\r\n\t\t\tfilter: var(--background-invert-if-dark);\r\n\t\t}\r\n\r\n\t\tinput[type='checkbox'].checkbox + label:before {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 12px;\r\n\t\t\ttop: 16px;\r\n\t\t}\r\n\r\n\t\tinput:focus + label {\r\n\t\t\tborder-color: var(--color-primary);\r\n\t\t}\r\n\t}\r\n\r\n\th3 {\r\n\t\tfont-weight: bold;\r\n\r\n\t\t&:not(:first-of-type) {\r\n\t\t\tmargin-top: 64px;\r\n\t\t}\r\n\t}\r\n\r\n\t// Adjust design of 'Get more widgets' button\r\n\t.button {\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 10px 16px;\r\n\t\tmargin: 0;\r\n\t}\r\n\r\n\tp {\r\n\t\tmax-width: 650px;\r\n\t\tmargin: 0 auto;\r\n\r\n\t\ta:hover,\r\n\t\ta:focus {\r\n\t\t\tborder-bottom: 2px solid var(--color-border);\r\n\t\t}\r\n\t}\r\n\r\n\t.credits--end {\r\n\t\tpadding-bottom: 32px;\r\n\t\tcolor: var(--color-text-maxcontrast);\r\n\r\n\t\ta {\r\n\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.flip-list-move {\r\n\ttransition: transform var(--animation-slow);\r\n}\r\n\r\n.statuses {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\tflex-wrap: wrap;\r\n\tmargin-bottom: 36px;\r\n\r\n\t& > div {\r\n\t\tmargin: 8px;\r\n\t}\r\n}\r\n</style>\r\n<style>\r\nhtml, body {\r\n\tbackground-attachment: fixed;\r\n}\r\n\r\n#body-user #header {\r\n\tposition: fixed;\r\n}\r\n\r\n#content {\r\n\toverflow: auto;\r\n}\r\n</style>\r\n"],sourceRoot:""}]),n.Z=i}},e={};function a(t){var n=e[t];if(void 0!==n)return n.exports;var o=e[t]={id:t,loaded:!1,exports:{}};return r[t].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=r,a.amdD=function(){throw new Error("define cannot be used indirect")},a.amdO={},n=[],a.O=function(t,r,e,o){if(!r){var i=1/0;for(c=0;c<n.length;c++){r=n[c][0],e=n[c][1],o=n[c][2];for(var s=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(s=!1,o<i&&(i=o));if(s){n.splice(c--,1);var d=e();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=n.length;c>0&&n[c-1][2]>o;c--)n[c]=n[c-1];n[c]=[r,e,o]},a.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(n,{a:n}),n},a.d=function(t,n){for(var r in n)a.o(n,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},a.j=4773,function(){a.b=document.baseURI||self.location.href;var t={4773:0};a.O.j=function(n){return 0===t[n]};var n=function(n,r){var e,o,i=r[0],s=r[1],l=r[2],d=0;if(i.some((function(n){return 0!==t[n]}))){for(e in s)a.o(s,e)&&(a.m[e]=s[e]);if(l)var c=l(a)}for(n&&n(r);d<i.length;d++)o=i[d],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(c)},r=self.webpackChunknextcloud=self.webpackChunknextcloud||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}(),a.nc=void 0;var o=a.O(void 0,[7874],(function(){return a(30661)}));o=a.O(o)}();
//# sourceMappingURL=dashboard-main.js.map?v=354cf2f770633d840950