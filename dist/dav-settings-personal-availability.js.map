{"version":3,"file":"dav-settings-personal-availability.js?v=91613264982b49333c97","mappings":"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","sources":["webpack:///nextcloud/webpack\\runtime\\chunk loaded","webpack:///nextcloud/apps\\dav\\src\\views\\Availability.vue?vue&type=template&id=aad5ff48&scoped=true&","webpack:///nextcloud/apps\\dav\\src\\dav\\client.js","webpack:///nextcloud/apps\\dav\\src\\service\\logger.js","webpack:///nextcloud/apps\\dav\\src\\service\\CalendarService.js","webpack:///nextcloud/apps\\dav\\src\\service\\PreferenceService.js","webpack:///nextcloud/apps\\dav\\src\\views\\Availability.vue","webpack:///nextcloud/apps\\dav\\src\\views\\Availability.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/dav/src/views/Availability.vue?15c3","webpack://nextcloud/./apps/dav/src/views/Availability.vue?aa5a","webpack:///nextcloud/apps\\dav\\src\\settings-personal-availability.js","webpack:///nextcloud/apps\\dav\\src\\views\\Availability.vue?vue&type=style&index=0&id=aad5ff48&lang=scss&scoped=true&","webpack:///nextcloud/webpack\\bootstrap","webpack:///nextcloud/webpack\\runtime\\amd define","webpack:///nextcloud/webpack\\runtime\\amd options","webpack:///nextcloud/webpack\\runtime\\compat get default export","webpack:///nextcloud/webpack\\runtime\\define property getters","webpack:///nextcloud/webpack\\runtime\\global","webpack:///nextcloud/webpack\\runtime\\hasOwnProperty shorthand","webpack:///nextcloud/webpack\\runtime\\make namespace object","webpack:///nextcloud/webpack\\runtime\\node module decorator","webpack:///nextcloud/webpack\\runtime\\runtimeId","webpack:///nextcloud/webpack\\runtime\\jsonp chunk loading","webpack:///nextcloud/webpack\\runtime\\nonce","webpack:///nextcloud/webpack\\startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"NcSettingsSection\",\n    {\n      attrs: {\n        title: _vm.$t(\"dav\", \"Availability\"),\n        description: _vm.$t(\n          \"dav\",\n          \"If you configure your working hours, other users will see when you are out of office when they book a meeting.\"\n        ),\n      },\n    },\n    [\n      _c(\"div\", { staticClass: \"time-zone\" }, [\n        _c(\"strong\", [\n          _vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.$t(\"dav\", \"Time zone:\")) + \"\\n\\t\\t\"),\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"span\",\n          { staticClass: \"time-zone-text\" },\n          [\n            _c(\"NcTimezonePicker\", {\n              model: {\n                value: _vm.timezone,\n                callback: function ($$v) {\n                  _vm.timezone = $$v\n                },\n                expression: \"timezone\",\n              },\n            }),\n          ],\n          1\n        ),\n      ]),\n      _vm._v(\" \"),\n      _c(\"CalendarAvailability\", {\n        attrs: {\n          slots: _vm.slots,\n          loading: _vm.loading,\n          \"l10n-to\": _vm.$t(\"dav\", \"to\"),\n          \"l10n-delete-slot\": _vm.$t(\"dav\", \"Delete slot\"),\n          \"l10n-empty-day\": _vm.$t(\"dav\", \"No working hours set\"),\n          \"l10n-add-slot\": _vm.$t(\"dav\", \"Add slot\"),\n          \"l10n-monday\": _vm.$t(\"dav\", \"Monday\"),\n          \"l10n-tuesday\": _vm.$t(\"dav\", \"Tuesday\"),\n          \"l10n-wednesday\": _vm.$t(\"dav\", \"Wednesday\"),\n          \"l10n-thursday\": _vm.$t(\"dav\", \"Thursday\"),\n          \"l10n-friday\": _vm.$t(\"dav\", \"Friday\"),\n          \"l10n-saturday\": _vm.$t(\"dav\", \"Saturday\"),\n          \"l10n-sunday\": _vm.$t(\"dav\", \"Sunday\"),\n        },\n        on: {\n          \"update:slots\": function ($event) {\n            _vm.slots = $event\n          },\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"NcCheckboxRadioSwitch\",\n        {\n          attrs: { checked: _vm.automated },\n          on: {\n            \"update:checked\": function ($event) {\n              _vm.automated = $event\n            },\n          },\n        },\n        [\n          _vm._v(\n            \"\\n\\t\\t\" +\n              _vm._s(\n                _vm.$t(\n                  \"dav\",\n                  'Automatically set user status to \"Do not disturb\" outside of availability to mute all notifications.'\n                )\n              ) +\n              \"\\n\\t\"\n          ),\n        ]\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"NcButton\",\n        {\n          attrs: { disabled: _vm.loading || _vm.saving, type: \"primary\" },\n          on: { click: _vm.save },\n        },\n        [_vm._v(\"\\n\\t\\t\" + _vm._s(_vm.$t(\"dav\", \"Save\")) + \"\\n\\t\")]\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/*\r\n * @copyright 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport * as webdav from 'webdav'\r\nimport axios from '@nextcloud/axios'\r\nimport memoize from 'lodash/fp/memoize'\r\nimport { generateRemoteUrl } from '@nextcloud/router'\r\nimport { getCurrentUser } from '@nextcloud/auth'\r\n\r\nexport const getClient = memoize((service) => {\r\n\t// Add this so the server knows it is an request from the browser\r\n\taxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\r\n\r\n\t// force our axios\r\n\tconst patcher = webdav.getPatcher()\r\n\tpatcher.patch('request', axios)\r\n\r\n\treturn webdav.createClient(\r\n\t\tgenerateRemoteUrl(`dav/${service}/${getCurrentUser().uid}`)\r\n\t)\r\n})\r\n","/*\r\n * @copyright 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\nimport { getLoggerBuilder } from '@nextcloud/logger'\r\n\r\nconst logger = getLoggerBuilder()\r\n\t.setApp('dav')\r\n\t.detectUser()\r\n\t.build()\r\n\r\nexport default logger\r\n","/**\r\n * @copyright 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\nimport { getClient } from '../dav/client'\r\nimport logger from './logger'\r\nimport { parseXML } from 'webdav/dist/node/tools/dav'\r\n\r\nimport {\r\n\tslotsToVavailability,\r\n\tvavailabilityToSlots,\r\n} from '@nextcloud/calendar-availability-vue'\r\n\r\n/**\r\n *\r\n */\r\nexport function getEmptySlots() {\r\n\treturn {\r\n\t\tMO: [],\r\n\t\tTU: [],\r\n\t\tWE: [],\r\n\t\tTH: [],\r\n\t\tFR: [],\r\n\t\tSA: [],\r\n\t\tSU: [],\r\n\t}\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport async function findScheduleInboxAvailability() {\r\n\tconst client = getClient('calendars')\r\n\r\n\tconst response = await client.customRequest('inbox', {\r\n\t\tmethod: 'PROPFIND',\r\n\t\tdata: `<?xml version=\"1.0\"?>\r\n\t\t\t<x0:propfind xmlns:x0=\"DAV:\">\r\n\t\t\t  <x0:prop>\r\n\t\t\t\t<x1:calendar-availability xmlns:x1=\"urn:ietf:params:xml:ns:caldav\"/>\r\n\t\t\t  </x0:prop>\r\n\t\t\t</x0:propfind>`,\r\n\t})\r\n\r\n\tconst xml = await parseXML(response.data)\r\n\r\n\tif (!xml) {\r\n\t\treturn undefined\r\n\t}\r\n\r\n\tconst availability = xml?.multistatus?.response[0]?.propstat?.prop['calendar-availability']\r\n\tif (!availability) {\r\n\t\treturn undefined\r\n\t}\r\n\r\n\treturn vavailabilityToSlots(availability)\r\n}\r\n\r\n/**\r\n * @param {any} slots -\r\n * @param {any} timezoneId -\r\n */\r\nexport async function saveScheduleInboxAvailability(slots, timezoneId) {\r\n\tconst all = [...Object.keys(slots).flatMap(dayId => slots[dayId].map(slot => ({\r\n\t\t...slot,\r\n\t\tday: dayId,\r\n\t})))]\r\n\r\n\tconst vavailability = slotsToVavailability(all, timezoneId)\r\n\r\n\tlogger.debug('New availability ical created', {\r\n\t\tvavailability,\r\n\t})\r\n\r\n\tconst client = getClient('calendars')\r\n\tawait client.customRequest('inbox', {\r\n\t\tmethod: 'PROPPATCH',\r\n\t\tdata: `<?xml version=\"1.0\"?>\r\n\t\t\t<x0:propertyupdate xmlns:x0=\"DAV:\">\r\n\t\t\t  <x0:set>\r\n\t\t\t\t<x0:prop>\r\n\t\t\t\t  <x1:calendar-availability xmlns:x1=\"urn:ietf:params:xml:ns:caldav\">${vavailability}</x1:calendar-availability>\r\n\t\t\t\t</x0:prop>\r\n\t\t\t  </x0:set>\r\n\t\t\t</x0:propertyupdate>`,\r\n\t})\r\n}\r\n","/**\r\n * @copyright 2022 Joas Schilling <coding@schilljs.com>\r\n *\r\n * @author Joas Schilling <coding@schilljs.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport axios from '@nextcloud/axios'\r\nimport { generateOcsUrl } from '@nextcloud/router'\r\n\r\n/**\r\n * Enable user status automation based on availability\r\n */\r\nexport async function enableUserStatusAutomation() {\r\n\treturn await axios.post(\r\n\t\tgenerateOcsUrl('/apps/provisioning_api/api/v1/config/users/{appId}/{configKey}', {\r\n\t\t\tappId: 'dav',\r\n\t\t\tconfigKey: 'user_status_automation',\r\n\t\t}),\r\n\t\t{\r\n\t\t\tconfigValue: 'yes',\r\n\t\t}\r\n\t)\r\n}\r\n\r\n/**\r\n * Disable user status automation based on availability\r\n */\r\nexport async function disableUserStatusAutomation() {\r\n\treturn await axios.delete(\r\n\t\tgenerateOcsUrl('/apps/provisioning_api/api/v1/config/users/{appId}/{configKey}', {\r\n\t\t\tappId: 'dav',\r\n\t\t\tconfigKey: 'user_status_automation',\r\n\t\t})\r\n\t)\r\n}\r\n","<template>\r\n\t<NcSettingsSection :title=\"$t('dav', 'Availability')\"\r\n\t\t:description=\"$t('dav', 'If you configure your working hours, other users will see when you are out of office when they book a meeting.')\">\r\n\t\t<div class=\"time-zone\">\r\n\t\t\t<strong>\r\n\t\t\t\t{{ $t('dav', 'Time zone:') }}\r\n\t\t\t</strong>\r\n\t\t\t<span class=\"time-zone-text\">\r\n\t\t\t\t<NcTimezonePicker v-model=\"timezone\" />\r\n\t\t\t</span>\r\n\t\t</div>\r\n\r\n\t\t<CalendarAvailability :slots.sync=\"slots\"\r\n\t\t\t:loading=\"loading\"\r\n\t\t\t:l10n-to=\"$t('dav', 'to')\"\r\n\t\t\t:l10n-delete-slot=\"$t('dav', 'Delete slot')\"\r\n\t\t\t:l10n-empty-day=\"$t('dav', 'No working hours set')\"\r\n\t\t\t:l10n-add-slot=\"$t('dav', 'Add slot')\"\r\n\t\t\t:l10n-monday=\"$t('dav', 'Monday')\"\r\n\t\t\t:l10n-tuesday=\"$t('dav', 'Tuesday')\"\r\n\t\t\t:l10n-wednesday=\"$t('dav', 'Wednesday')\"\r\n\t\t\t:l10n-thursday=\"$t('dav', 'Thursday')\"\r\n\t\t\t:l10n-friday=\"$t('dav', 'Friday')\"\r\n\t\t\t:l10n-saturday=\"$t('dav', 'Saturday')\"\r\n\t\t\t:l10n-sunday=\"$t('dav', 'Sunday')\" />\r\n\r\n\t\t<NcCheckboxRadioSwitch :checked.sync=\"automated\">\r\n\t\t\t{{ $t('dav', 'Automatically set user status to \"Do not disturb\" outside of availability to mute all notifications.') }}\r\n\t\t</NcCheckboxRadioSwitch>\r\n\r\n\t\t<NcButton :disabled=\"loading || saving\"\r\n\t\t\ttype=\"primary\"\r\n\t\t\t@click=\"save\">\r\n\t\t\t{{ $t('dav', 'Save') }}\r\n\t\t</NcButton>\r\n\t</NcSettingsSection>\r\n</template>\r\n\r\n<script>\r\nimport { CalendarAvailability } from '@nextcloud/calendar-availability-vue'\r\nimport { loadState } from '@nextcloud/initial-state'\r\nimport {\r\n\tshowError,\r\n\tshowSuccess,\r\n} from '@nextcloud/dialogs'\r\nimport {\r\n\tfindScheduleInboxAvailability,\r\n\tgetEmptySlots,\r\n\tsaveScheduleInboxAvailability,\r\n} from '../service/CalendarService'\r\nimport {\r\n\tenableUserStatusAutomation,\r\n\tdisableUserStatusAutomation,\r\n} from '../service/PreferenceService'\r\nimport jstz from 'jstimezonedetect'\r\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton'\r\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch'\r\nimport NcSettingsSection from '@nextcloud/vue/dist/Components/NcSettingsSection'\r\nimport NcTimezonePicker from '@nextcloud/vue/dist/Components/NcTimezonePicker'\r\n\r\nexport default {\r\n\tname: 'Availability',\r\n\tcomponents: {\r\n\t\tNcButton,\r\n\t\tNcCheckboxRadioSwitch,\r\n\t\tCalendarAvailability,\r\n\t\tNcSettingsSection,\r\n\t\tNcTimezonePicker,\r\n\t},\r\n\tdata() {\r\n\t\t// Try to determine the current timezone, and fall back to UTC otherwise\r\n\t\tconst defaultTimezone = jstz.determine()\r\n\t\tconst defaultTimezoneId = defaultTimezone ? defaultTimezone.name() : 'UTC'\r\n\r\n\t\treturn {\r\n\t\t\tloading: true,\r\n\t\t\tsaving: false,\r\n\t\t\ttimezone: defaultTimezoneId,\r\n\t\t\tslots: getEmptySlots(),\r\n\t\t\tautomated: loadState('dav', 'user_status_automation') === 'yes',\r\n\t\t}\r\n\t},\r\n\tasync mounted() {\r\n\t\ttry {\r\n\t\t\tconst slotData = await findScheduleInboxAvailability()\r\n\t\t\tif (!slotData) {\r\n\t\t\t\tconsole.info('no availability is set')\r\n\t\t\t\tthis.slots = getEmptySlots()\r\n\t\t\t} else {\r\n\t\t\t\tconst { slots, timezoneId } = slotData\r\n\t\t\t\tthis.slots = slots\r\n\t\t\t\tif (timezoneId) {\r\n\t\t\t\t\tthis.timezone = timezoneId\r\n\t\t\t\t}\r\n\t\t\t\tconsole.info('availability loaded', this.slots, this.timezoneId)\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('could not load existing availability', e)\r\n\r\n\t\t\tshowError(t('dav', 'Failed to load availability'))\r\n\t\t} finally {\r\n\t\t\tthis.loading = false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tasync save() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.saving = true\r\n\r\n\t\t\t\tawait saveScheduleInboxAvailability(this.slots, this.timezone)\r\n\t\t\t\tif (this.automated) {\r\n\t\t\t\t\tawait enableUserStatusAutomation()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait disableUserStatusAutomation()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshowSuccess(t('dav', 'Saved availability'))\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('could not save availability', e)\r\n\r\n\t\t\t\tshowError(t('dav', 'Failed to save availability'))\r\n\t\t\t} finally {\r\n\t\t\t\tthis.saving = false\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.availability-day {\r\n\tpadding: 0 10px 0 10px;\r\n\tposition: absolute;\r\n}\r\n.availability-slots {\r\n\tdisplay: flex;\r\n\twhite-space: nowrap;\r\n}\r\n.availability-slot {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n}\r\n.availability-slot-group {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n::v-deep .mx-input-wrapper {\r\n\twidth: 85px;\r\n}\r\n::v-deep .mx-datepicker {\r\n\twidth: 97px;\r\n}\r\n::v-deep .multiselect {\r\n\tborder: 1px solid var(--color-border-dark);\r\n\twidth: 120px;\r\n}\r\n.time-zone {\r\n\tpadding: 32px 12px 12px 0;\r\n}\r\n.grid-table {\r\n\tdisplay: grid;\r\n\tmargin-bottom: 32px;\r\n\tgrid-column-gap: 24px;\r\n\tgrid-row-gap: 6px;\r\n\tgrid-template-columns: min-content min-content min-content;\r\n}\r\n.button {\r\n\talign-self: flex-end;\r\n}\r\n.label-weekday {\r\n\tposition: relative;\r\n\tdisplay: inline-flex;\r\n\tpadding-top: 4px;\r\n}\r\n.delete-slot {\r\n\tbackground-color: transparent;\r\n\tborder: none;\r\n\tpadding-bottom: 12px;\r\n\topacity: .5;\r\n\t&:hover {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n\r\n.add-another {\r\n\tbackground-color: transparent;\r\n\tborder: none;\r\n\topacity: .5;\r\n\tdisplay: inline-flex;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tmargin-bottom: 3px;\r\n\r\n\t&:hover {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n.to-text {\r\n\tpadding-right: 12px;\r\n}\r\n.time-zone-text{\r\n\tpadding-left: 22px;\r\n}\r\n.empty-content {\r\n\tcolor: var(--color-text-lighter);\r\n\tmargin-top: 4px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Availability.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Availability.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Availability.vue?vue&type=style&index=0&id=aad5ff48&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Availability.vue?vue&type=style&index=0&id=aad5ff48&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Availability.vue?vue&type=template&id=aad5ff48&scoped=true&\"\nimport script from \"./Availability.vue?vue&type=script&lang=js&\"\nexport * from \"./Availability.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Availability.vue?vue&type=style&index=0&id=aad5ff48&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aad5ff48\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('aad5ff48')) {\n      api.createRecord('aad5ff48', component.options)\n    } else {\n      api.reload('aad5ff48', component.options)\n    }\n    module.hot.accept(\"./Availability.vue?vue&type=template&id=aad5ff48&scoped=true&\", function () {\n      api.rerender('aad5ff48', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/dav/src/views/Availability.vue\"\nexport default component.exports","import Vue from 'vue'\r\nimport { translate } from '@nextcloud/l10n'\r\nimport Availability from './views/Availability'\r\n\r\nVue.prototype.$t = translate\r\n\r\nconst View = Vue.extend(Availability);\r\n\r\n(new View({})).$mount('#settings-personal-availability')\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".availability-day[data-v-aad5ff48]{padding:0 10px 0 10px;position:absolute}.availability-slots[data-v-aad5ff48]{display:flex;white-space:nowrap}.availability-slot[data-v-aad5ff48]{display:flex;flex-direction:row;align-items:center}.availability-slot-group[data-v-aad5ff48]{display:flex;flex-direction:column}[data-v-aad5ff48] .mx-input-wrapper{width:85px}[data-v-aad5ff48] .mx-datepicker{width:97px}[data-v-aad5ff48] .multiselect{border:1px solid var(--color-border-dark);width:120px}.time-zone[data-v-aad5ff48]{padding:32px 12px 12px 0}.grid-table[data-v-aad5ff48]{display:grid;margin-bottom:32px;grid-column-gap:24px;grid-row-gap:6px;grid-template-columns:min-content min-content min-content}.button[data-v-aad5ff48]{align-self:flex-end}.label-weekday[data-v-aad5ff48]{position:relative;display:inline-flex;padding-top:4px}.delete-slot[data-v-aad5ff48]{background-color:rgba(0,0,0,0);border:none;padding-bottom:12px;opacity:.5}.delete-slot[data-v-aad5ff48]:hover{opacity:1}.add-another[data-v-aad5ff48]{background-color:rgba(0,0,0,0);border:none;opacity:.5;display:inline-flex;padding:0;margin:0;margin-bottom:3px}.add-another[data-v-aad5ff48]:hover{opacity:1}.to-text[data-v-aad5ff48]{padding-right:12px}.time-zone-text[data-v-aad5ff48]{padding-left:22px}.empty-content[data-v-aad5ff48]{color:var(--color-text-lighter);margin-top:4px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/dav/src/views/Availability.vue\"],\"names\":[],\"mappings\":\"AAkIA,mCACC,qBAAA,CACA,iBAAA,CAED,qCACC,YAAA,CACA,kBAAA,CAED,oCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CAED,0CACC,YAAA,CACA,qBAAA,CAED,oCACC,UAAA,CAED,iCACC,UAAA,CAED,+BACC,yCAAA,CACA,WAAA,CAED,4BACC,wBAAA,CAED,6BACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,gBAAA,CACA,yDAAA,CAED,yBACC,mBAAA,CAED,gCACC,iBAAA,CACA,mBAAA,CACA,eAAA,CAED,8BACC,8BAAA,CACA,WAAA,CACA,mBAAA,CACA,UAAA,CACA,oCACC,SAAA,CAIF,8BACC,8BAAA,CACA,WAAA,CACA,UAAA,CACA,mBAAA,CACA,SAAA,CACA,QAAA,CACA,iBAAA,CAEA,oCACC,SAAA,CAGF,0BACC,kBAAA,CAED,iCACC,iBAAA,CAED,gCACC,+BAAA,CACA,cAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.availability-day {\\r\\n\\tpadding: 0 10px 0 10px;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n.availability-slots {\\r\\n\\tdisplay: flex;\\r\\n\\twhite-space: nowrap;\\r\\n}\\r\\n.availability-slot {\\r\\n\\tdisplay: flex;\\r\\n\\tflex-direction: row;\\r\\n\\talign-items: center;\\r\\n}\\r\\n.availability-slot-group {\\r\\n\\tdisplay: flex;\\r\\n\\tflex-direction: column;\\r\\n}\\r\\n::v-deep .mx-input-wrapper {\\r\\n\\twidth: 85px;\\r\\n}\\r\\n::v-deep .mx-datepicker {\\r\\n\\twidth: 97px;\\r\\n}\\r\\n::v-deep .multiselect {\\r\\n\\tborder: 1px solid var(--color-border-dark);\\r\\n\\twidth: 120px;\\r\\n}\\r\\n.time-zone {\\r\\n\\tpadding: 32px 12px 12px 0;\\r\\n}\\r\\n.grid-table {\\r\\n\\tdisplay: grid;\\r\\n\\tmargin-bottom: 32px;\\r\\n\\tgrid-column-gap: 24px;\\r\\n\\tgrid-row-gap: 6px;\\r\\n\\tgrid-template-columns: min-content min-content min-content;\\r\\n}\\r\\n.button {\\r\\n\\talign-self: flex-end;\\r\\n}\\r\\n.label-weekday {\\r\\n\\tposition: relative;\\r\\n\\tdisplay: inline-flex;\\r\\n\\tpadding-top: 4px;\\r\\n}\\r\\n.delete-slot {\\r\\n\\tbackground-color: transparent;\\r\\n\\tborder: none;\\r\\n\\tpadding-bottom: 12px;\\r\\n\\topacity: .5;\\r\\n\\t&:hover {\\r\\n\\t\\topacity: 1;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.add-another {\\r\\n\\tbackground-color: transparent;\\r\\n\\tborder: none;\\r\\n\\topacity: .5;\\r\\n\\tdisplay: inline-flex;\\r\\n\\tpadding: 0;\\r\\n\\tmargin: 0;\\r\\n\\tmargin-bottom: 3px;\\r\\n\\r\\n\\t&:hover {\\r\\n\\t\\topacity: 1;\\r\\n\\t}\\r\\n}\\r\\n.to-text {\\r\\n\\tpadding-right: 12px;\\r\\n}\\r\\n.time-zone-text{\\r\\n\\tpadding-left: 22px;\\r\\n}\\r\\n.empty-content {\\r\\n\\tcolor: var(--color-text-lighter);\\r\\n\\tmargin-top: 4px;\\r\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 3347;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t3347: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7874], function() { return __webpack_require__(82496); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","render","_vm","this","_h","$createElement","_c","_self","attrs","title","$t","description","staticClass","_v","_s","model","value","timezone","callback","$$v","expression","slots","loading","on","$event","checked","automated","disabled","saving","type","click","save","_withStripped","getClient","memoize","service","axios","webdav","patch","generateRemoteUrl","getCurrentUser","uid","getLoggerBuilder","setApp","detectUser","build","findScheduleInboxAvailability","client","customRequest","method","data","response","parseXML","xml","undefined","availability","multistatus","propstat","prop","vavailabilityToSlots","saveScheduleInboxAvailability","timezoneId","all","Object","keys","flatMap","dayId","map","slot","day","vavailability","slotsToVavailability","logger","enableUserStatusAutomation","generateOcsUrl","appId","configKey","configValue","disableUserStatusAutomation","MO","TU","WE","TH","FR","SA","SU","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","component","__file","Vue","translate","Availability","$mount","___CSS_LOADER_EXPORT___","push","module","id","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","call","m","amdD","Error","amdO","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","b","document","baseURI","self","location","href","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","forEach","bind","nc","__webpack_exports__"],"sourceRoot":""}