{"version":3,"file":"settings-vue-settings-personal-webauthn.js?v=6c3380658c6e4d083ed9","mappings":"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","sources":["webpack:///nextcloud/webpack\\runtime\\chunk loaded","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\Section.vue?vue&type=template&id=47c82c6e&scoped=true&","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\AddDevice.vue?vue&type=template&id=15f8a53b&scoped=true&","webpack:///nextcloud/apps\\settings\\src\\logger.js","webpack:///nextcloud/apps\\settings\\src\\service\\WebAuthnRegistrationSerice.js","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\AddDevice.vue","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\AddDevice.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/settings/src/components/WebAuthn/AddDevice.vue?bc3c","webpack://nextcloud/./apps/settings/src/components/WebAuthn/AddDevice.vue?5011","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\Device.vue?vue&type=template&id=1b250cbc&scoped=true&","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\Device.vue?vue&type=script&lang=js&","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\Device.vue","webpack://nextcloud/./apps/settings/src/components/WebAuthn/Device.vue?10b2","webpack://nextcloud/./apps/settings/src/components/WebAuthn/Device.vue?06c3","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\Section.vue","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\Section.vue?vue&type=script&lang=js&","webpack://nextcloud/./apps/settings/src/components/WebAuthn/Section.vue?3346","webpack:///nextcloud/apps\\settings\\src\\main-personal-webauth.js","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\AddDevice.vue?vue&type=style&index=0&id=15f8a53b&scoped=true&lang=css&","webpack:///nextcloud/apps\\settings\\src\\components\\WebAuthn\\Device.vue?vue&type=style&index=0&id=1b250cbc&scoped=true&lang=css&","webpack:///nextcloud/webpack\\bootstrap","webpack:///nextcloud/webpack\\runtime\\amd define","webpack:///nextcloud/webpack\\runtime\\amd options","webpack:///nextcloud/webpack\\runtime\\compat get default export","webpack:///nextcloud/webpack\\runtime\\define property getters","webpack:///nextcloud/webpack\\runtime\\global","webpack:///nextcloud/webpack\\runtime\\hasOwnProperty shorthand","webpack:///nextcloud/webpack\\runtime\\make namespace object","webpack:///nextcloud/webpack\\runtime\\node module decorator","webpack:///nextcloud/webpack\\runtime\\runtimeId","webpack:///nextcloud/webpack\\runtime\\jsonp chunk loading","webpack:///nextcloud/webpack\\runtime\\nonce","webpack:///nextcloud/webpack\\startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"section\", attrs: { id: \"security-webauthn\" } },\n    [\n      _c(\"h2\", [\n        _vm._v(_vm._s(_vm.t(\"settings\", \"Passwordless Authentication\"))),\n      ]),\n      _vm._v(\" \"),\n      _c(\"p\", { staticClass: \"settings-hint hidden-when-empty\" }, [\n        _vm._v(\n          \"\\n\\t\\t\" +\n            _vm._s(\n              _vm.t(\n                \"settings\",\n                \"Set up your account for passwordless authentication following the FIDO2 standard.\"\n              )\n            ) +\n            \"\\n\\t\"\n        ),\n      ]),\n      _vm._v(\" \"),\n      _vm.devices.length === 0\n        ? _c(\"p\", [\n            _vm._v(\n              \"\\n\\t\\t\" +\n                _vm._s(_vm.t(\"settings\", \"No devices configured.\")) +\n                \"\\n\\t\"\n            ),\n          ])\n        : _c(\"p\", [\n            _vm._v(\n              \"\\n\\t\\t\" +\n                _vm._s(\n                  _vm.t(\n                    \"settings\",\n                    \"The following devices are configured for your account:\"\n                  )\n                ) +\n                \"\\n\\t\"\n            ),\n          ]),\n      _vm._v(\" \"),\n      _vm._l(_vm.sortedDevices, function (device) {\n        return _c(\"Device\", {\n          key: device.id,\n          attrs: { name: device.name },\n          on: {\n            delete: function ($event) {\n              return _vm.deleteDevice(device.id)\n            },\n          },\n        })\n      }),\n      _vm._v(\" \"),\n      !_vm.hasPublicKeyCredential\n        ? _c(\"p\", { staticClass: \"warning\" }, [\n            _vm._v(\n              \"\\n\\t\\t\" +\n                _vm._s(\n                  _vm.t(\"settings\", \"Your browser does not support WebAuthn.\")\n                ) +\n                \"\\n\\t\"\n            ),\n          ])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.hasPublicKeyCredential\n        ? _c(\"AddDevice\", {\n            attrs: { \"is-https\": _vm.isHttps, \"is-localhost\": _vm.isLocalhost },\n            on: { added: _vm.deviceAdded },\n          })\n        : _vm._e(),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return !_vm.isHttps && !_vm.isLocalhost\n    ? _c(\"div\", [\n        _vm._v(\n          \"\\n\\t\" +\n            _vm._s(\n              _vm.t(\n                \"settings\",\n                \"Passwordless authentication requires a secure connection.\"\n              )\n            ) +\n            \"\\n\"\n        ),\n      ])\n    : _c(\"div\", [\n        _vm.step === _vm.RegistrationSteps.READY\n          ? _c(\"div\", [\n              _c(\"button\", { on: { click: _vm.start } }, [\n                _vm._v(\n                  \"\\n\\t\\t\\t\" +\n                    _vm._s(_vm.t(\"settings\", \"Add WebAuthn device\")) +\n                    \"\\n\\t\\t\"\n                ),\n              ]),\n            ])\n          : _vm.step === _vm.RegistrationSteps.REGISTRATION\n          ? _c(\"div\", { staticClass: \"new-webauthn-device\" }, [\n              _c(\"span\", {\n                staticClass: \"icon-loading-small webauthn-loading\",\n              }),\n              _vm._v(\n                \"\\n\\t\\t\" +\n                  _vm._s(\n                    _vm.t(\"settings\", \"Please authorize your WebAuthn device.\")\n                  ) +\n                  \"\\n\\t\"\n              ),\n            ])\n          : _vm.step === _vm.RegistrationSteps.NAMING\n          ? _c(\"div\", { staticClass: \"new-webauthn-device\" }, [\n              _c(\"span\", {\n                staticClass: \"icon-loading-small webauthn-loading\",\n              }),\n              _vm._v(\" \"),\n              _c(\"input\", {\n                directives: [\n                  {\n                    name: \"model\",\n                    rawName: \"v-model\",\n                    value: _vm.name,\n                    expression: \"name\",\n                  },\n                ],\n                attrs: {\n                  type: \"text\",\n                  placeholder: _vm.t(\"settings\", \"Name your device\"),\n                },\n                domProps: { value: _vm.name },\n                on: {\n                  \":keyup\": function ($event) {\n                    if (\n                      !$event.type.indexOf(\"key\") &&\n                      _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                    ) {\n                      return null\n                    }\n                    return _vm.submit.apply(null, arguments)\n                  },\n                  input: function ($event) {\n                    if ($event.target.composing) {\n                      return\n                    }\n                    _vm.name = $event.target.value\n                  },\n                },\n              }),\n              _vm._v(\" \"),\n              _c(\"button\", { on: { click: _vm.submit } }, [\n                _vm._v(\n                  \"\\n\\t\\t\\t\" + _vm._s(_vm.t(\"settings\", \"Add\")) + \"\\n\\t\\t\"\n                ),\n              ]),\n            ])\n          : _vm.step === _vm.RegistrationSteps.PERSIST\n          ? _c(\"div\", { staticClass: \"new-webauthn-device\" }, [\n              _c(\"span\", {\n                staticClass: \"icon-loading-small webauthn-loading\",\n              }),\n              _vm._v(\n                \"\\n\\t\\t\" +\n                  _vm._s(_vm.t(\"settings\", \"Adding your device …\")) +\n                  \"\\n\\t\"\n              ),\n            ])\n          : _c(\"div\", [\n              _vm._v(\n                \"\\n\\t\\tInvalid registration step. This should not have happened.\\n\\t\"\n              ),\n            ]),\n      ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/**\r\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { getLoggerBuilder } from '@nextcloud/logger'\r\n\r\nexport default getLoggerBuilder()\r\n\t.setApp('settings')\r\n\t.detectUser()\r\n\t.build()\r\n","/**\r\n * @copyright 2020, Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport axios from '@nextcloud/axios'\r\nimport { generateUrl } from '@nextcloud/router'\r\n\r\n/**\r\n *\r\n */\r\nexport async function startRegistration() {\r\n\tconst url = generateUrl('/settings/api/personal/webauthn/registration')\r\n\r\n\tconst resp = await axios.get(url)\r\n\treturn resp.data\r\n}\r\n\r\n/**\r\n * @param {any} name -\r\n * @param {any} data -\r\n */\r\nexport async function finishRegistration(name, data) {\r\n\tconst url = generateUrl('/settings/api/personal/webauthn/registration')\r\n\r\n\tconst resp = await axios.post(url, { name, data })\r\n\treturn resp.data\r\n}\r\n\r\n/**\r\n * @param {any} id -\r\n */\r\nexport async function removeRegistration(id) {\r\n\tconst url = generateUrl(`/settings/api/personal/webauthn/registration/${id}`)\r\n\r\n\tawait axios.delete(url)\r\n}\r\n","<!--\r\n  - @copyright 2020, Roeland Jago Douma <roeland@famdouma.nl>\r\n  -\r\n  - @author Roeland Jago Douma <roeland@famdouma.nl>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n  -->\r\n\r\n<template>\r\n\t<div v-if=\"!isHttps && !isLocalhost\">\r\n\t\t{{ t('settings', 'Passwordless authentication requires a secure connection.') }}\r\n\t</div>\r\n\t<div v-else>\r\n\t\t<div v-if=\"step === RegistrationSteps.READY\">\r\n\t\t\t<button @click=\"start\">\r\n\t\t\t\t{{ t('settings', 'Add WebAuthn device') }}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div v-else-if=\"step === RegistrationSteps.REGISTRATION\"\r\n\t\t\tclass=\"new-webauthn-device\">\r\n\t\t\t<span class=\"icon-loading-small webauthn-loading\" />\r\n\t\t\t{{ t('settings', 'Please authorize your WebAuthn device.') }}\r\n\t\t</div>\r\n\r\n\t\t<div v-else-if=\"step === RegistrationSteps.NAMING\"\r\n\t\t\tclass=\"new-webauthn-device\">\r\n\t\t\t<span class=\"icon-loading-small webauthn-loading\" />\r\n\t\t\t<input v-model=\"name\"\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\t:placeholder=\"t('settings', 'Name your device')\"\r\n\t\t\t\t@:keyup.enter=\"submit\">\r\n\t\t\t<button @click=\"submit\">\r\n\t\t\t\t{{ t('settings', 'Add') }}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div v-else-if=\"step === RegistrationSteps.PERSIST\"\r\n\t\t\tclass=\"new-webauthn-device\">\r\n\t\t\t<span class=\"icon-loading-small webauthn-loading\" />\r\n\t\t\t{{ t('settings', 'Adding your device …') }}\r\n\t\t</div>\r\n\r\n\t\t<div v-else>\r\n\t\t\tInvalid registration step. This should not have happened.\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { confirmPassword } from '@nextcloud/password-confirmation'\r\nimport '@nextcloud/password-confirmation/dist/style.css'\r\n\r\nimport logger from '../../logger'\r\nimport {\r\n\tstartRegistration,\r\n\tfinishRegistration,\r\n} from '../../service/WebAuthnRegistrationSerice'\r\n\r\nconst logAndPass = (text) => (data) => {\r\n\tlogger.debug(text)\r\n\treturn data\r\n}\r\n\r\nconst RegistrationSteps = Object.freeze({\r\n\tREADY: 1,\r\n\tREGISTRATION: 2,\r\n\tNAMING: 3,\r\n\tPERSIST: 4,\r\n})\r\n\r\nexport default {\r\n\tname: 'AddDevice',\r\n\tprops: {\r\n\t\thttpWarning: Boolean,\r\n\t\tisHttps: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tisLocalhost: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tname: '',\r\n\t\t\tcredential: {},\r\n\t\t\tRegistrationSteps,\r\n\t\t\tstep: RegistrationSteps.READY,\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tarrayToBase64String(a) {\r\n\t\t\treturn btoa(String.fromCharCode(...a))\r\n\t\t},\r\n\t\tstart() {\r\n\t\t\tthis.step = RegistrationSteps.REGISTRATION\r\n\t\t\tconsole.debug('Starting WebAuthn registration')\r\n\r\n\t\t\treturn confirmPassword()\r\n\t\t\t\t.then(this.getRegistrationData)\r\n\t\t\t\t.then(this.register.bind(this))\r\n\t\t\t\t.then(() => { this.step = RegistrationSteps.NAMING })\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.error(err.name, err.message)\r\n\t\t\t\t\tthis.step = RegistrationSteps.READY\r\n\t\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetRegistrationData() {\r\n\t\t\tconsole.debug('Fetching webauthn registration data')\r\n\r\n\t\t\tconst base64urlDecode = function(input) {\r\n\t\t\t\t// Replace non-url compatible chars with base64 standard chars\r\n\t\t\t\tinput = input\r\n\t\t\t\t\t.replace(/-/g, '+')\r\n\t\t\t\t\t.replace(/_/g, '/')\r\n\r\n\t\t\t\t// Pad out with standard base64 required padding characters\r\n\t\t\t\tconst pad = input.length % 4\r\n\t\t\t\tif (pad) {\r\n\t\t\t\t\tif (pad === 1) {\r\n\t\t\t\t\t\tthrow new Error('InvalidLengthError: Input base64url string is the wrong length to determine padding')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput += new Array(5 - pad).join('=')\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn window.atob(input)\r\n\t\t\t}\r\n\r\n\t\t\treturn startRegistration()\r\n\t\t\t\t.then(publicKey => {\r\n\t\t\t\t\tconsole.debug(publicKey)\r\n\t\t\t\t\tpublicKey.challenge = Uint8Array.from(base64urlDecode(publicKey.challenge), c => c.charCodeAt(0))\r\n\t\t\t\t\tpublicKey.user.id = Uint8Array.from(publicKey.user.id, c => c.charCodeAt(0))\r\n\t\t\t\t\treturn publicKey\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.error('Error getting webauthn registration data from server', err)\r\n\t\t\t\t\tthrow new Error(t('settings', 'Server error while trying to add WebAuthn device'))\r\n\t\t\t\t})\r\n\t\t},\r\n\r\n\t\tregister(publicKey) {\r\n\t\t\tconsole.debug('starting webauthn registration')\r\n\r\n\t\t\treturn navigator.credentials.create({ publicKey })\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tthis.credential = {\r\n\t\t\t\t\t\tid: data.id,\r\n\t\t\t\t\t\ttype: data.type,\r\n\t\t\t\t\t\trawId: this.arrayToBase64String(new Uint8Array(data.rawId)),\r\n\t\t\t\t\t\tresponse: {\r\n\t\t\t\t\t\t\tclientDataJSON: this.arrayToBase64String(new Uint8Array(data.response.clientDataJSON)),\r\n\t\t\t\t\t\t\tattestationObject: this.arrayToBase64String(new Uint8Array(data.response.attestationObject)),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\r\n\t\tsubmit() {\r\n\t\t\tthis.step = RegistrationSteps.PERSIST\r\n\r\n\t\t\treturn confirmPassword()\r\n\t\t\t\t.then(logAndPass('confirmed password'))\r\n\t\t\t\t.then(this.saveRegistrationData)\r\n\t\t\t\t.then(logAndPass('registration data saved'))\r\n\t\t\t\t.then(() => this.reset())\r\n\t\t\t\t.then(logAndPass('app reset'))\r\n\t\t\t\t.catch(console.error.bind(this))\r\n\t\t},\r\n\r\n\t\tasync saveRegistrationData() {\r\n\t\t\ttry {\r\n\t\t\t\tconst device = await finishRegistration(this.name, JSON.stringify(this.credential))\r\n\r\n\t\t\t\tlogger.info('new device added', { device })\r\n\r\n\t\t\t\tthis.$emit('added', device)\r\n\t\t\t} catch (err) {\r\n\t\t\t\tlogger.error('Error persisting webauthn registration', { error: err })\r\n\t\t\t\tthrow new Error(t('settings', 'Server error while trying to complete WebAuthn device registration'))\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\treset() {\r\n\t\t\tthis.name = ''\r\n\t\t\tthis.registrationData = {}\r\n\t\t\tthis.step = RegistrationSteps.READY\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\t.webauthn-loading {\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: sub;\r\n\t\tmargin-left: 2px;\r\n\t\tmargin-right: 2px;\r\n\t}\r\n\r\n\t.new-webauthn-device {\r\n\t\tline-height: 300%;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddDevice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddDevice.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddDevice.vue?vue&type=style&index=0&id=15f8a53b&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddDevice.vue?vue&type=style&index=0&id=15f8a53b&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./AddDevice.vue?vue&type=template&id=15f8a53b&scoped=true&\"\nimport script from \"./AddDevice.vue?vue&type=script&lang=js&\"\nexport * from \"./AddDevice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddDevice.vue?vue&type=style&index=0&id=15f8a53b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15f8a53b\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('15f8a53b')) {\n      api.createRecord('15f8a53b', component.options)\n    } else {\n      api.reload('15f8a53b', component.options)\n    }\n    module.hot.accept(\"./AddDevice.vue?vue&type=template&id=15f8a53b&scoped=true&\", function () {\n      api.rerender('15f8a53b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/settings/src/components/WebAuthn/AddDevice.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"webauthn-device\" },\n    [\n      _c(\"span\", { staticClass: \"icon-webauthn-device\" }),\n      _vm._v(\n        \"\\n\\t\" +\n          _vm._s(_vm.name || _vm.t(\"settings\", \"Unnamed device\")) +\n          \"\\n\\t\"\n      ),\n      _c(\n        \"NcActions\",\n        { attrs: { \"force-menu\": true } },\n        [\n          _c(\n            \"NcActionButton\",\n            {\n              attrs: { icon: \"icon-delete\" },\n              on: {\n                click: function ($event) {\n                  return _vm.$emit(\"delete\")\n                },\n              },\n            },\n            [\n              _vm._v(\n                \"\\n\\t\\t\\t\" + _vm._s(_vm.t(\"settings\", \"Delete\")) + \"\\n\\t\\t\"\n              ),\n            ]\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Device.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Device.vue?vue&type=script&lang=js&\"","<!--\r\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n  -\r\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n  -->\r\n\r\n<template>\r\n\t<div class=\"webauthn-device\">\r\n\t\t<span class=\"icon-webauthn-device\" />\r\n\t\t{{ name || t('settings', 'Unnamed device') }}\r\n\t\t<NcActions :force-menu=\"true\">\r\n\t\t\t<NcActionButton icon=\"icon-delete\" @click=\"$emit('delete')\">\r\n\t\t\t\t{{ t('settings', 'Delete') }}\r\n\t\t\t</NcActionButton>\r\n\t\t</NcActions>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions'\r\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton'\r\n\r\nexport default {\r\n\tname: 'Device',\r\n\tcomponents: {\r\n\t\tNcActionButton,\r\n\t\tNcActions,\r\n\t},\r\n\tprops: {\r\n\t\tname: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\t.webauthn-device {\r\n\t\tline-height: 300%;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.icon-webauthn-device {\r\n\t\tdisplay: inline-block;\r\n\t\tbackground-size: 100%;\r\n\t\tpadding: 3px;\r\n\t\tmargin: 3px;\r\n\t}\r\n</style>\r\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Device.vue?vue&type=style&index=0&id=1b250cbc&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Device.vue?vue&type=style&index=0&id=1b250cbc&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Device.vue?vue&type=template&id=1b250cbc&scoped=true&\"\nimport script from \"./Device.vue?vue&type=script&lang=js&\"\nexport * from \"./Device.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Device.vue?vue&type=style&index=0&id=1b250cbc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b250cbc\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1b250cbc')) {\n      api.createRecord('1b250cbc', component.options)\n    } else {\n      api.reload('1b250cbc', component.options)\n    }\n    module.hot.accept(\"./Device.vue?vue&type=template&id=1b250cbc&scoped=true&\", function () {\n      api.rerender('1b250cbc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/settings/src/components/WebAuthn/Device.vue\"\nexport default component.exports","<!--\r\n  - @copyright 2020, Roeland Jago Douma <roeland@famdouma.nl>\r\n  -\r\n  - @author Roeland Jago Douma <roeland@famdouma.nl>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n  -->\r\n\r\n<template>\r\n\t<div id=\"security-webauthn\" class=\"section\">\r\n\t\t<h2>{{ t('settings', 'Passwordless Authentication') }}</h2>\r\n\t\t<p class=\"settings-hint hidden-when-empty\">\r\n\t\t\t{{ t('settings', 'Set up your account for passwordless authentication following the FIDO2 standard.') }}\r\n\t\t</p>\r\n\t\t<p v-if=\"devices.length === 0\">\r\n\t\t\t{{ t('settings', 'No devices configured.') }}\r\n\t\t</p>\r\n\t\t<p v-else>\r\n\t\t\t{{ t('settings', 'The following devices are configured for your account:') }}\r\n\t\t</p>\r\n\t\t<Device v-for=\"device in sortedDevices\"\r\n\t\t\t:key=\"device.id\"\r\n\t\t\t:name=\"device.name\"\r\n\t\t\t@delete=\"deleteDevice(device.id)\" />\r\n\r\n\t\t<p v-if=\"!hasPublicKeyCredential\" class=\"warning\">\r\n\t\t\t{{ t('settings', 'Your browser does not support WebAuthn.') }}\r\n\t\t</p>\r\n\r\n\t\t<AddDevice v-if=\"hasPublicKeyCredential\"\r\n\t\t\t:is-https=\"isHttps\"\r\n\t\t\t:is-localhost=\"isLocalhost\"\r\n\t\t\t@added=\"deviceAdded\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { confirmPassword } from '@nextcloud/password-confirmation'\r\nimport '@nextcloud/password-confirmation/dist/style.css'\r\nimport sortBy from 'lodash/fp/sortBy'\r\n\r\nimport AddDevice from './AddDevice'\r\nimport Device from './Device'\r\nimport logger from '../../logger'\r\nimport { removeRegistration } from '../../service/WebAuthnRegistrationSerice'\r\n\r\nconst sortByName = sortBy('name')\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tAddDevice,\r\n\t\tDevice,\r\n\t},\r\n\tprops: {\r\n\t\tinitialDevices: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tisHttps: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tisLocalhost: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\thasPublicKeyCredential: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdevices: this.initialDevices,\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tsortedDevices() {\r\n\t\t\treturn sortByName(this.devices)\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tdeviceAdded(device) {\r\n\t\t\tlogger.debug(`adding new device to the list ${device.id}`)\r\n\r\n\t\t\tthis.devices.push(device)\r\n\t\t},\r\n\t\tasync deleteDevice(id) {\r\n\t\t\tlogger.info(`deleting webauthn device ${id}`)\r\n\r\n\t\t\tawait confirmPassword()\r\n\t\t\tawait removeRegistration(id)\r\n\r\n\t\t\tthis.devices = this.devices.filter(d => d.id !== id)\r\n\r\n\t\t\tlogger.info(`webauthn device ${id} removed successfully`)\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Section.vue?vue&type=template&id=47c82c6e&scoped=true&\"\nimport script from \"./Section.vue?vue&type=script&lang=js&\"\nexport * from \"./Section.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47c82c6e\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\WORKS\\\\BHSoft\\\\Projects\\\\nextcloud-server\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('47c82c6e')) {\n      api.createRecord('47c82c6e', component.options)\n    } else {\n      api.reload('47c82c6e', component.options)\n    }\n    module.hot.accept(\"./Section.vue?vue&type=template&id=47c82c6e&scoped=true&\", function () {\n      api.rerender('47c82c6e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/settings/src/components/WebAuthn/Section.vue\"\nexport default component.exports","/**\r\n * @copyright 2020, Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport Vue from 'vue'\r\nimport { loadState } from '@nextcloud/initial-state'\r\n\r\nimport WebAuthnSection from './components/WebAuthn/Section'\r\n\r\n// eslint-disable-next-line camelcase\r\n__webpack_nonce__ = btoa(OC.requestToken)\r\n\r\nVue.prototype.t = t\r\n\r\nconst View = Vue.extend(WebAuthnSection)\r\nconst devices = loadState('settings', 'webauthn-devices')\r\nnew View({\r\n\tpropsData: {\r\n\t\tinitialDevices: devices,\r\n\t\tisHttps: window.location.protocol === 'https:',\r\n\t\tisLocalhost: window.location.hostname === 'localhost',\r\n\t\thasPublicKeyCredential: typeof (window.PublicKeyCredential) !== 'undefined',\r\n\t},\r\n}).$mount('#security-webauthn')\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.webauthn-loading[data-v-15f8a53b] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: sub;\\n\\tmargin-left: 2px;\\n\\tmargin-right: 2px;\\n}\\n.new-webauthn-device[data-v-15f8a53b] {\\n\\tline-height: 300%;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/settings/src/components/WebAuthn/AddDevice.vue\"],\"names\":[],\"mappings\":\";AAiNA;CACA,qBAAA;CACA,mBAAA;CACA,gBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA\",\"sourcesContent\":[\"<!--\\r\\n  - @copyright 2020, Roeland Jago Douma <roeland@famdouma.nl>\\r\\n  -\\r\\n  - @author Roeland Jago Douma <roeland@famdouma.nl>\\r\\n  -\\r\\n  - @license GNU AGPL version 3 or any later version\\r\\n  -\\r\\n  - This program is free software: you can redistribute it and/or modify\\r\\n  - it under the terms of the GNU Affero General Public License as\\r\\n  - published by the Free Software Foundation, either version 3 of the\\r\\n  - License, or (at your option) any later version.\\r\\n  -\\r\\n  - This program is distributed in the hope that it will be useful,\\r\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\r\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\r\\n  - GNU Affero General Public License for more details.\\r\\n  -\\r\\n  - You should have received a copy of the GNU Affero General Public License\\r\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\r\\n  -->\\r\\n\\r\\n<template>\\r\\n\\t<div v-if=\\\"!isHttps && !isLocalhost\\\">\\r\\n\\t\\t{{ t('settings', 'Passwordless authentication requires a secure connection.') }}\\r\\n\\t</div>\\r\\n\\t<div v-else>\\r\\n\\t\\t<div v-if=\\\"step === RegistrationSteps.READY\\\">\\r\\n\\t\\t\\t<button @click=\\\"start\\\">\\r\\n\\t\\t\\t\\t{{ t('settings', 'Add WebAuthn device') }}\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div v-else-if=\\\"step === RegistrationSteps.REGISTRATION\\\"\\r\\n\\t\\t\\tclass=\\\"new-webauthn-device\\\">\\r\\n\\t\\t\\t<span class=\\\"icon-loading-small webauthn-loading\\\" />\\r\\n\\t\\t\\t{{ t('settings', 'Please authorize your WebAuthn device.') }}\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div v-else-if=\\\"step === RegistrationSteps.NAMING\\\"\\r\\n\\t\\t\\tclass=\\\"new-webauthn-device\\\">\\r\\n\\t\\t\\t<span class=\\\"icon-loading-small webauthn-loading\\\" />\\r\\n\\t\\t\\t<input v-model=\\\"name\\\"\\r\\n\\t\\t\\t\\ttype=\\\"text\\\"\\r\\n\\t\\t\\t\\t:placeholder=\\\"t('settings', 'Name your device')\\\"\\r\\n\\t\\t\\t\\t@:keyup.enter=\\\"submit\\\">\\r\\n\\t\\t\\t<button @click=\\\"submit\\\">\\r\\n\\t\\t\\t\\t{{ t('settings', 'Add') }}\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div v-else-if=\\\"step === RegistrationSteps.PERSIST\\\"\\r\\n\\t\\t\\tclass=\\\"new-webauthn-device\\\">\\r\\n\\t\\t\\t<span class=\\\"icon-loading-small webauthn-loading\\\" />\\r\\n\\t\\t\\t{{ t('settings', 'Adding your device …') }}\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div v-else>\\r\\n\\t\\t\\tInvalid registration step. This should not have happened.\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</template>\\r\\n\\r\\n<script>\\r\\nimport { confirmPassword } from '@nextcloud/password-confirmation'\\r\\nimport '@nextcloud/password-confirmation/dist/style.css'\\r\\n\\r\\nimport logger from '../../logger'\\r\\nimport {\\r\\n\\tstartRegistration,\\r\\n\\tfinishRegistration,\\r\\n} from '../../service/WebAuthnRegistrationSerice'\\r\\n\\r\\nconst logAndPass = (text) => (data) => {\\r\\n\\tlogger.debug(text)\\r\\n\\treturn data\\r\\n}\\r\\n\\r\\nconst RegistrationSteps = Object.freeze({\\r\\n\\tREADY: 1,\\r\\n\\tREGISTRATION: 2,\\r\\n\\tNAMING: 3,\\r\\n\\tPERSIST: 4,\\r\\n})\\r\\n\\r\\nexport default {\\r\\n\\tname: 'AddDevice',\\r\\n\\tprops: {\\r\\n\\t\\thttpWarning: Boolean,\\r\\n\\t\\tisHttps: {\\r\\n\\t\\t\\ttype: Boolean,\\r\\n\\t\\t\\tdefault: false,\\r\\n\\t\\t},\\r\\n\\t\\tisLocalhost: {\\r\\n\\t\\t\\ttype: Boolean,\\r\\n\\t\\t\\tdefault: false,\\r\\n\\t\\t},\\r\\n\\t},\\r\\n\\tdata() {\\r\\n\\t\\treturn {\\r\\n\\t\\t\\tname: '',\\r\\n\\t\\t\\tcredential: {},\\r\\n\\t\\t\\tRegistrationSteps,\\r\\n\\t\\t\\tstep: RegistrationSteps.READY,\\r\\n\\t\\t}\\r\\n\\t},\\r\\n\\tmethods: {\\r\\n\\t\\tarrayToBase64String(a) {\\r\\n\\t\\t\\treturn btoa(String.fromCharCode(...a))\\r\\n\\t\\t},\\r\\n\\t\\tstart() {\\r\\n\\t\\t\\tthis.step = RegistrationSteps.REGISTRATION\\r\\n\\t\\t\\tconsole.debug('Starting WebAuthn registration')\\r\\n\\r\\n\\t\\t\\treturn confirmPassword()\\r\\n\\t\\t\\t\\t.then(this.getRegistrationData)\\r\\n\\t\\t\\t\\t.then(this.register.bind(this))\\r\\n\\t\\t\\t\\t.then(() => { this.step = RegistrationSteps.NAMING })\\r\\n\\t\\t\\t\\t.catch(err => {\\r\\n\\t\\t\\t\\t\\tconsole.error(err.name, err.message)\\r\\n\\t\\t\\t\\t\\tthis.step = RegistrationSteps.READY\\r\\n\\t\\t\\t\\t})\\r\\n\\t\\t},\\r\\n\\r\\n\\t\\tgetRegistrationData() {\\r\\n\\t\\t\\tconsole.debug('Fetching webauthn registration data')\\r\\n\\r\\n\\t\\t\\tconst base64urlDecode = function(input) {\\r\\n\\t\\t\\t\\t// Replace non-url compatible chars with base64 standard chars\\r\\n\\t\\t\\t\\tinput = input\\r\\n\\t\\t\\t\\t\\t.replace(/-/g, '+')\\r\\n\\t\\t\\t\\t\\t.replace(/_/g, '/')\\r\\n\\r\\n\\t\\t\\t\\t// Pad out with standard base64 required padding characters\\r\\n\\t\\t\\t\\tconst pad = input.length % 4\\r\\n\\t\\t\\t\\tif (pad) {\\r\\n\\t\\t\\t\\t\\tif (pad === 1) {\\r\\n\\t\\t\\t\\t\\t\\tthrow new Error('InvalidLengthError: Input base64url string is the wrong length to determine padding')\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\tinput += new Array(5 - pad).join('=')\\r\\n\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\treturn window.atob(input)\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\treturn startRegistration()\\r\\n\\t\\t\\t\\t.then(publicKey => {\\r\\n\\t\\t\\t\\t\\tconsole.debug(publicKey)\\r\\n\\t\\t\\t\\t\\tpublicKey.challenge = Uint8Array.from(base64urlDecode(publicKey.challenge), c => c.charCodeAt(0))\\r\\n\\t\\t\\t\\t\\tpublicKey.user.id = Uint8Array.from(publicKey.user.id, c => c.charCodeAt(0))\\r\\n\\t\\t\\t\\t\\treturn publicKey\\r\\n\\t\\t\\t\\t})\\r\\n\\t\\t\\t\\t.catch(err => {\\r\\n\\t\\t\\t\\t\\tconsole.error('Error getting webauthn registration data from server', err)\\r\\n\\t\\t\\t\\t\\tthrow new Error(t('settings', 'Server error while trying to add WebAuthn device'))\\r\\n\\t\\t\\t\\t})\\r\\n\\t\\t},\\r\\n\\r\\n\\t\\tregister(publicKey) {\\r\\n\\t\\t\\tconsole.debug('starting webauthn registration')\\r\\n\\r\\n\\t\\t\\treturn navigator.credentials.create({ publicKey })\\r\\n\\t\\t\\t\\t.then(data => {\\r\\n\\t\\t\\t\\t\\tthis.credential = {\\r\\n\\t\\t\\t\\t\\t\\tid: data.id,\\r\\n\\t\\t\\t\\t\\t\\ttype: data.type,\\r\\n\\t\\t\\t\\t\\t\\trawId: this.arrayToBase64String(new Uint8Array(data.rawId)),\\r\\n\\t\\t\\t\\t\\t\\tresponse: {\\r\\n\\t\\t\\t\\t\\t\\t\\tclientDataJSON: this.arrayToBase64String(new Uint8Array(data.response.clientDataJSON)),\\r\\n\\t\\t\\t\\t\\t\\t\\tattestationObject: this.arrayToBase64String(new Uint8Array(data.response.attestationObject)),\\r\\n\\t\\t\\t\\t\\t\\t},\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t})\\r\\n\\t\\t},\\r\\n\\r\\n\\t\\tsubmit() {\\r\\n\\t\\t\\tthis.step = RegistrationSteps.PERSIST\\r\\n\\r\\n\\t\\t\\treturn confirmPassword()\\r\\n\\t\\t\\t\\t.then(logAndPass('confirmed password'))\\r\\n\\t\\t\\t\\t.then(this.saveRegistrationData)\\r\\n\\t\\t\\t\\t.then(logAndPass('registration data saved'))\\r\\n\\t\\t\\t\\t.then(() => this.reset())\\r\\n\\t\\t\\t\\t.then(logAndPass('app reset'))\\r\\n\\t\\t\\t\\t.catch(console.error.bind(this))\\r\\n\\t\\t},\\r\\n\\r\\n\\t\\tasync saveRegistrationData() {\\r\\n\\t\\t\\ttry {\\r\\n\\t\\t\\t\\tconst device = await finishRegistration(this.name, JSON.stringify(this.credential))\\r\\n\\r\\n\\t\\t\\t\\tlogger.info('new device added', { device })\\r\\n\\r\\n\\t\\t\\t\\tthis.$emit('added', device)\\r\\n\\t\\t\\t} catch (err) {\\r\\n\\t\\t\\t\\tlogger.error('Error persisting webauthn registration', { error: err })\\r\\n\\t\\t\\t\\tthrow new Error(t('settings', 'Server error while trying to complete WebAuthn device registration'))\\r\\n\\t\\t\\t}\\r\\n\\t\\t},\\r\\n\\r\\n\\t\\treset() {\\r\\n\\t\\t\\tthis.name = ''\\r\\n\\t\\t\\tthis.registrationData = {}\\r\\n\\t\\t\\tthis.step = RegistrationSteps.READY\\r\\n\\t\\t},\\r\\n\\t},\\r\\n}\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\n\\t.webauthn-loading {\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tvertical-align: sub;\\r\\n\\t\\tmargin-left: 2px;\\r\\n\\t\\tmargin-right: 2px;\\r\\n\\t}\\r\\n\\r\\n\\t.new-webauthn-device {\\r\\n\\t\\tline-height: 300%;\\r\\n\\t}\\r\\n</style>\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.webauthn-device[data-v-1b250cbc] {\\n\\tline-height: 300%;\\n\\tdisplay: flex;\\n}\\n.icon-webauthn-device[data-v-1b250cbc] {\\n\\tdisplay: inline-block;\\n\\tbackground-size: 100%;\\n\\tpadding: 3px;\\n\\tmargin: 3px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/settings/src/components/WebAuthn/Device.vue\"],\"names\":[],\"mappings\":\";AAqDA;CACA,iBAAA;CACA,aAAA;AACA;AAEA;CACA,qBAAA;CACA,qBAAA;CACA,YAAA;CACA,WAAA;AACA\",\"sourcesContent\":[\"<!--\\r\\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\r\\n  -\\r\\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\r\\n  -\\r\\n  - @license GNU AGPL version 3 or any later version\\r\\n  -\\r\\n  - This program is free software: you can redistribute it and/or modify\\r\\n  - it under the terms of the GNU Affero General Public License as\\r\\n  - published by the Free Software Foundation, either version 3 of the\\r\\n  - License, or (at your option) any later version.\\r\\n  -\\r\\n  - This program is distributed in the hope that it will be useful,\\r\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\r\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\r\\n  - GNU Affero General Public License for more details.\\r\\n  -\\r\\n  - You should have received a copy of the GNU Affero General Public License\\r\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\r\\n  -->\\r\\n\\r\\n<template>\\r\\n\\t<div class=\\\"webauthn-device\\\">\\r\\n\\t\\t<span class=\\\"icon-webauthn-device\\\" />\\r\\n\\t\\t{{ name || t('settings', 'Unnamed device') }}\\r\\n\\t\\t<NcActions :force-menu=\\\"true\\\">\\r\\n\\t\\t\\t<NcActionButton icon=\\\"icon-delete\\\" @click=\\\"$emit('delete')\\\">\\r\\n\\t\\t\\t\\t{{ t('settings', 'Delete') }}\\r\\n\\t\\t\\t</NcActionButton>\\r\\n\\t\\t</NcActions>\\r\\n\\t</div>\\r\\n</template>\\r\\n\\r\\n<script>\\r\\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions'\\r\\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton'\\r\\n\\r\\nexport default {\\r\\n\\tname: 'Device',\\r\\n\\tcomponents: {\\r\\n\\t\\tNcActionButton,\\r\\n\\t\\tNcActions,\\r\\n\\t},\\r\\n\\tprops: {\\r\\n\\t\\tname: {\\r\\n\\t\\t\\ttype: String,\\r\\n\\t\\t\\trequired: true,\\r\\n\\t\\t},\\r\\n\\t},\\r\\n}\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\n\\t.webauthn-device {\\r\\n\\t\\tline-height: 300%;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t}\\r\\n\\r\\n\\t.icon-webauthn-device {\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tbackground-size: 100%;\\r\\n\\t\\tpadding: 3px;\\r\\n\\t\\tmargin: 3px;\\r\\n\\t}\\r\\n</style>\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 1602;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t1602: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7874], function() { return __webpack_require__(57077); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","_v","_s","t","devices","length","_l","sortedDevices","device","key","name","on","delete","$event","deleteDevice","hasPublicKeyCredential","_e","isHttps","isLocalhost","added","deviceAdded","_withStripped","step","RegistrationSteps","READY","click","start","REGISTRATION","NAMING","directives","rawName","value","expression","type","placeholder","domProps","indexOf","_k","keyCode","submit","apply","arguments","input","target","composing","PERSIST","getLoggerBuilder","setApp","detectUser","build","url","generateUrl","axios","resp","data","finishRegistration","removeRegistration","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","component","__file","icon","$emit","__webpack_nonce__","btoa","OC","requestToken","Vue","WebAuthnSection","propsData","initialDevices","loadState","window","location","protocol","hostname","PublicKeyCredential","$mount","___CSS_LOADER_EXPORT___","push","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","loaded","__webpack_modules__","call","m","amdD","Error","amdO","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","b","document","baseURI","self","href","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","forEach","bind","nc","__webpack_exports__"],"sourceRoot":""}